"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[595],{595:(N,Z,c)=>{c.r(Z),c.d(Z,{ProductModule:()=>Ue});var i=c(9808),C=c(3075),h=c(4851),x=c(4423),b=c(845),d=c(5787),v=c(1497),g=c(4534),A=c(8018),a=c(1424),r=c(3407),_=c(9748),M=c(9603),U=c(7010),D=c(5315),w=c(8507),m=c(9783),f=c(4930),u=c(2162),T=c(4451),e=c(5e3),P=c(330),y=c(85),E=c(242),L=c(4297),R=c(5652),J=c(7232);function O(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.deleteSelectedImeis())}),e.qZA()}}function $(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"div",19)(1,"button",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openNew())}),e.qZA(),e.YNc(2,O,1,0,"button",21),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.selectedImeis&&t.selectedImeis.length>0)}}function F(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"div",23)(1,"h5",24),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",25),e._UZ(5,"i",26),e.TgZ(6,"input",27),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.getParams.searchText=o)})("change",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.getImeis())}),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,"label.imei_management")," "),e.xp6(4),e.Q6J("ngModel",t.getParams.searchText)}}function B(n,p){1&n&&(e.TgZ(0,"tr")(1,"th",28)(2,"div",29),e._uU(3),e.ALo(4,"translate"),e._UZ(5,"p-sortIcon",30),e.qZA()(),e.TgZ(6,"th")(7,"div",31),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"th",32)(11,"div",33),e._uU(12),e.ALo(13,"translate"),e._UZ(14,"p-sortIcon",34),e.qZA()(),e.TgZ(15,"th",35)(16,"div",29),e._uU(17),e.ALo(18,"translate"),e._UZ(19,"p-sortIcon",36),e.qZA()(),e.TgZ(20,"th",37)(21,"div",38),e._uU(22),e.ALo(23,"translate"),e._UZ(24,"p-sortIcon",39),e.qZA()(),e.TgZ(25,"th",40)(26,"div",33),e._uU(27),e.ALo(28,"translate"),e._UZ(29,"p-sortIcon",41),e.qZA()(),e.TgZ(30,"th",42)(31,"div",33),e._uU(32),e.ALo(33,"translate"),e._UZ(34,"p-sortIcon",43),e.qZA()()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,7,"label.serial_number")," "),e.xp6(5),e.hij(" ",e.lcZ(9,9,"label.image")," "),e.xp6(4),e.hij(" ",e.lcZ(13,11,"label.model_name")," "),e.xp6(5),e.hij(" ",e.lcZ(18,13,"label.model_number")," "),e.xp6(5),e.hij(" ",e.lcZ(23,15,"label.color")," "),e.xp6(5),e.hij(" ",e.lcZ(28,17,"label.capacity")," "),e.xp6(5),e.hij(" ",e.lcZ(33,19,"label.carrier_lock")," "))}function k(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"tr",44),e.NdJ("click",function(){const s=e.CHM(t).$implicit,I=e.oxw();return e.KtG(I.editImei(s))}),e.TgZ(1,"td",45)(2,"span",46),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._uU(5),e.qZA(),e.TgZ(6,"td",47),e._UZ(7,"img",48),e.qZA(),e.TgZ(8,"td",45)(9,"span",46),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._uU(12),e.qZA(),e.TgZ(13,"td",45)(14,"span",46),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._uU(17),e.qZA(),e.TgZ(18,"td",49)(19,"span",46),e._uU(20),e.ALo(21,"translate"),e.qZA(),e._UZ(22,"div",50),e.qZA(),e.TgZ(23,"td",49)(24,"span",46),e._uU(25),e.ALo(26,"translate"),e.qZA(),e._uU(27),e.qZA(),e.TgZ(28,"td",45)(29,"span",46),e._uU(30),e.ALo(31,"translate"),e.qZA(),e._UZ(32,"p-badge",51),e.qZA()()}if(2&n){const t=p.$implicit,l=e.oxw();e.Q6J("pContextMenuRow",t),e.xp6(3),e.Oqu(e.lcZ(4,16,"label.serial_number")),e.xp6(2),e.hij(" ",t.productName," "),e.xp6(2),e.Q6J("src",l.getModelNameImage(t.modelName),e.LSH),e.xp6(3),e.Oqu(e.lcZ(11,18,"label.model_name")),e.xp6(2),e.hij(" ",l.getModelName(t.modelName)," "),e.xp6(3),e.Oqu(e.lcZ(16,20,"label.model_number")),e.xp6(2),e.hij(" ",t.modelNumber," "),e.xp6(3),e.Oqu(e.lcZ(21,22,"label.color")),e.xp6(2),e.Udp("background-color",l.getImeiColor(t.color)),e.xp6(3),e.Oqu(e.lcZ(26,24,"label.capacity")),e.xp6(2),e.hij(" ",l.getImeiCapacity(t.capacity)," "),e.xp6(3),e.Oqu(e.lcZ(31,26,"label.carrier_lock")),e.xp6(2),e.Q6J("value",t.carrierLock)("severity",t.carrierLock?"success":"info")}}function Y(n,p){1&n&&(e.TgZ(0,"small",71),e._uU(1,"imei code is required."),e.qZA())}function Q(n,p){if(1&n&&(e.TgZ(0,"div",73),e._UZ(1,"img",74),e.TgZ(2,"div"),e._uU(3),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.image,e.LSH),e.xp6(2),e.Oqu(t.label)}}function K(n,p){if(1&n&&e.YNc(0,Q,4,2,"div",72),2&n){const t=e.oxw(2);e.Q6J("ngIf",t.imei.modelName)}}function j(n,p){if(1&n&&(e.TgZ(0,"div",73),e._UZ(1,"img",74),e.TgZ(2,"div"),e._uU(3),e.qZA()()),2&n){const t=p.$implicit;e.xp6(1),e.Q6J("src",t.image,e.LSH),e.xp6(2),e.Oqu(t.label)}}function H(n,p){1&n&&(e.TgZ(0,"small",71),e._uU(1,"Model name is required."),e.qZA())}function G(n,p){1&n&&(e.TgZ(0,"small",71),e._uU(1,"Model number is required."),e.qZA())}function z(n,p){if(1&n&&(e.TgZ(0,"div",73),e._UZ(1,"div",50),e.TgZ(2,"div"),e._uU(3),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Udp("background-color",t.color),e.xp6(2),e.Oqu(t.label)}}function W(n,p){if(1&n&&e.YNc(0,z,4,3,"div",72),2&n){const t=e.oxw(2);e.Q6J("ngIf",t.imei.color)}}function V(n,p){if(1&n&&(e.TgZ(0,"div",73),e._UZ(1,"div",50),e.TgZ(2,"div"),e._uU(3),e.qZA()()),2&n){const t=p.$implicit;e.xp6(1),e.Udp("background-color",t.color),e.xp6(2),e.Oqu(t.label)}}function X(n,p){1&n&&(e.TgZ(0,"small",71),e._uU(1,"Color is required."),e.qZA())}function ee(n,p){if(1&n&&(e.TgZ(0,"div",73)(1,"div"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.label)}}function te(n,p){if(1&n&&e.YNc(0,ee,3,1,"div",72),2&n){const t=e.oxw(2);e.Q6J("ngIf",t.imei.capacity)}}function ne(n,p){if(1&n&&(e.TgZ(0,"div",73)(1,"div"),e._uU(2),e.qZA()()),2&n){const t=p.$implicit;e.xp6(2),e.Oqu(t.label)}}function ie(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"div",75)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div")(5,"button",76),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onAddInsurances())}),e.qZA()()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,2,"label.insurance_management")," "),e.xp6(3),e.Q6J("label","Add"))}function oe(n,p){1&n&&(e.TgZ(0,"tr")(1,"th",77),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"th",77),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th",78),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th",79),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"th",78),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,4,"label.insurance_code")," "),e.xp6(3),e.hij(" ",e.lcZ(6,6,"label.insurance_name")," "),e.xp6(3),e.hij(" ",e.lcZ(9,8,"label.month")," "),e.xp6(3),e.hij(" ",e.lcZ(12,10,"label.description")," "))}function le(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"input",88),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.insuranceCode=o)}),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.Q6J("ngModel",t.insuranceCode)}}function ae(n,p){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.insuranceCode," ")}}function ce(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"input",88),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.insuranceName=o)}),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.Q6J("ngModel",t.insuranceName)}}function re(n,p){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.insuranceName," ")}}function pe(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"p-inputNumber",89),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.month=o)}),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.Q6J("ngModel",t.month)}}function se(n,p){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.month," ")}}function me(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"input",88),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.description=o)}),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.Q6J("ngModel",t.description)}}function _e(n,p){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.description," ")}}function de(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"button",90),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.onRowEditInit(o))}),e.qZA()}}function ue(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"button",91),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.onRowEditSave(o))}),e.qZA()}}function ge(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"button",92),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),s=o.$implicit,I=o.rowIndex,De=e.oxw(2);return e.KtG(De.onRowEditCancel(s,I))}),e.qZA()}}function he(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"tr",80)(1,"td")(2,"p-cellEditor"),e.YNc(3,le,1,1,"ng-template",81),e.YNc(4,ae,1,1,"ng-template",82),e.qZA()(),e.TgZ(5,"td")(6,"p-cellEditor"),e.YNc(7,ce,1,1,"ng-template",81),e.YNc(8,re,1,1,"ng-template",82),e.qZA()(),e.TgZ(9,"td")(10,"p-cellEditor"),e.YNc(11,pe,1,1,"ng-template",81),e.YNc(12,se,1,1,"ng-template",82),e.qZA()(),e.TgZ(13,"td")(14,"p-cellEditor"),e.YNc(15,me,1,1,"ng-template",81),e.YNc(16,_e,1,1,"ng-template",82),e.qZA()(),e.TgZ(17,"td")(18,"div",83),e.YNc(19,de,1,0,"button",84),e.YNc(20,ue,1,0,"button",85),e.YNc(21,ge,1,0,"button",86),e.TgZ(22,"button",87),e.NdJ("click",function(){const s=e.CHM(t).$implicit,I=e.oxw(2);return e.KtG(I.deleteBillDetail(s))}),e.qZA()()()()}if(2&n){const l=p.editing;e.Q6J("pEditableRow",p.$implicit),e.xp6(19),e.Q6J("ngIf",!l),e.xp6(1),e.Q6J("ngIf",l),e.xp6(1),e.Q6J("ngIf",l)}}const q=function(n){return{"ng-invalid ng-dirty":n}},fe=function(){return{"margin-bottom":"2em"}};function Te(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",52)(2,"label",53),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",54),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.imei.productName=o)}),e.qZA(),e.YNc(6,Y,2,0,"small",55),e.qZA(),e.TgZ(7,"div",52)(8,"label",56),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"p-dropdown",57),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.imei.modelName=o)}),e.YNc(12,K,1,1,"ng-template",58),e.YNc(13,j,4,2,"ng-template",59),e.qZA(),e.YNc(14,H,2,0,"small",55),e.qZA(),e.TgZ(15,"div",52)(16,"label",60),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"input",61),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.imei.modelNumber=o)}),e.qZA(),e.YNc(20,G,2,0,"small",55),e.qZA(),e.TgZ(21,"div",52)(22,"label",62),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"p-dropdown",57),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.imei.color=o)}),e.YNc(26,W,1,1,"ng-template",58),e.YNc(27,V,4,3,"ng-template",59),e.qZA(),e.YNc(28,X,2,0,"small",55),e.qZA(),e.TgZ(29,"div",63)(30,"label",64),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"p-calendar",65),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.selectedDate=o)}),e.qZA()(),e.TgZ(34,"div",66)(35,"label",67),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"p-dropdown",57),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.imei.capacity=o)}),e.YNc(39,te,1,1,"ng-template",58),e.YNc(40,ne,3,1,"ng-template",59),e.qZA()(),e.TgZ(41,"div",68)(42,"label",64),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.TgZ(45,"p-inputSwitch",69),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.imei.carrierLock=o)}),e.qZA()(),e.TgZ(46,"p-card",3),e.YNc(47,ie,6,4,"ng-template",10),e.TgZ(48,"p-table",70),e.YNc(49,oe,14,12,"ng-template",10),e.YNc(50,he,23,4,"ng-template",11),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,42,"label.serial_number")),e.xp6(2),e.Q6J("ngModel",t.imei.productName)("ngClass",e.VKq(56,q,t.submitted&&!t.imei.productName)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.imei.productName),e.xp6(3),e.Oqu(e.lcZ(10,44,"label.model_name")),e.xp6(2),e.Q6J("options",t.modelNames)("ngModel",t.imei.modelName)("optionLabel","label")("optionValue","code")("filter",!0)("showClear",!0)("appendTo","body"),e.xp6(3),e.Q6J("ngIf",t.submitted&&!t.imei.modelName),e.xp6(3),e.Oqu(e.lcZ(18,46,"label.model_number")),e.xp6(2),e.Q6J("ngModel",t.imei.modelNumber)("ngClass",e.VKq(58,q,t.submitted&&!t.imei.modelNumber)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.imei.modelNumber),e.xp6(3),e.Oqu(e.lcZ(24,48,"label.color")),e.xp6(2),e.Q6J("options",t.imeiColors)("ngModel",t.imei.color)("optionLabel","label")("optionValue","code")("filter",!0)("showClear",!0)("appendTo","body"),e.xp6(3),e.Q6J("ngIf",t.submitted&&!t.imei.color),e.xp6(3),e.Oqu(e.lcZ(32,50,"label.sale_date")),e.xp6(2),e.Q6J("ngModel",t.selectedDate)("appendTo","body"),e.xp6(3),e.Oqu(e.lcZ(37,52,"label.capacity")),e.xp6(2),e.Q6J("options",t.imeiCapacities)("ngModel",t.imei.capacity)("optionLabel","label")("optionValue","code")("filter",!0)("showClear",!0)("appendTo","body"),e.xp6(5),e.Oqu(e.lcZ(44,54,"label.carrier_lock")),e.xp6(2),e.Q6J("ngModel",t.imei.carrierLock),e.xp6(1),e.Akn(e.DdM(60,fe)),e.xp6(2),e.Q6J("value",t.insurances)}}function Ce(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"button",93),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideDialog())}),e.qZA(),e.TgZ(1,"button",94),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.saveImei())}),e.qZA()}}function xe(n,p){if(1&n&&(e.TgZ(0,"span"),e._uU(1,"Are you sure you want to delete "),e.TgZ(2,"b"),e._uU(3),e.qZA(),e._uU(4,"?"),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Oqu(t.imei.productName)}}function Ze(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"button",95),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteImeiDialog=!1)}),e.qZA(),e.TgZ(1,"button",96),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.confirmDelete())}),e.qZA()}}function be(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"button",95),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteImeisDialog=!1)}),e.qZA(),e.TgZ(1,"button",96),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.confirmDeleteSelected())}),e.qZA()}}const ve=function(){return["productName","productName","phone","email","address"]},Ae=function(){return[5,10,20]},Me=function(){return{width:"100rem"}},S=function(){return{width:"450px"}};let Pe=(()=>{class n{constructor(t,l,o){this.imeiService=t,this.billService=l,this.messageService=o,this.appUtil=f.Z,this.imeiDialog=!1,this.deleteImeiDialog=!1,this.deleteImeisDialog=!1,this.insurances=[],this.imei={},this.selectedImeis=[],this.selectedImei={},this.selectedDate=new Date,this.submitted=!1,this.cols=[],this.items=[],this.rowsPerPageOptions=[5,10,20],this.modelNames=this.appUtil.getModelNames(),this.imeiColors=this.appUtil.getImeiColor(),this.imeiCapacities=this.appUtil.getImeiCapacities(),this.loading=!1,this.getParams={page:0,pageSize:5,sortField:"id",isSort:!0,searchText:""},this.lstImeis=[],this.totalRecords=0,this.totalPages=0,this.first=0,this.bills=[],this.clonedProducts={}}ngOnInit(){this.getListBill(),this.cols=[{field:"productName",header:"Imei name"},{field:"modelName",header:"Model name"},{field:"modelNumber",header:"Model number"},{field:"capacity",header:"Capacity"},{field:"carrierLock",header:"Carrier lock"}],this.items=[{label:"View",icon:"pi pi-fw pi-search",command:()=>{this.editImei(this.selectedImei)}},{label:"Delete",icon:"pi pi-fw pi-times",command:()=>{this.deleteImei(this.selectedImei)}}]}getImeis(t,l=!1){this.pendingRequest&&this.pendingRequest.unsubscribe(),this.loading=!0,t&&(console.log(t),this.getParams.page=t.first/t.rows,this.getParams.pageSize=t.rows+1,this.getParams.sortField=t.sortField,this.getParams.isSort=1===t.sortOrder),l&&this.imeiService.getExcelReport(this.getParams).subscribe(o=>{f.Z.scrollToTop(),this.openDownloadFile(o.data,"excel")}),Object.keys(this.getParams).forEach(o=>null==this.getParams[o]&&delete this.getParams[o]),this.pendingRequest=this.imeiService.getPagingImei(this.getParams).subscribe(o=>{f.Z.scrollToTop(),this.lstImeis=o.data,this.totalRecords=o.totalItems||0,this.totalPages=o.totalItems/o.pageSize,console.log(this.lstImeis),this.loading=!1})}getModelName(t){const l=this.modelNames.find(o=>o.code===t);return l?l.label:""}getModelNameImage(t){const l=this.modelNames.find(o=>o.code===t);return l?l.image:""}getImeiColor(t){const l=this.imeiColors.find(o=>o.code===t);return l?l.color:""}getImeiCapacity(t){const l=this.imeiCapacities.find(o=>o.code===t);return l?l.label:""}openDownloadFile(t,l){try{const o=this.imeiService.getFolderPathDownload(t,l);o&&window.open(o)}catch(o){this.messageService.add({severity:"error",summary:"Error Message",detail:"File invalid"})}}openNew(){this.imei={},this.insurances=[],this.submitted=!1,this.imeiDialog=!0}deleteSelectedImeis(){this.deleteImeisDialog=!0}editImei(t){this.imei=Object.assign({},t),this.selectedDate=this.imei.saleDate?new Date(this.imei.saleDate.toString()):new Date,this.insurances=this.imei.insurances||[],this.imeiDialog=!0}deleteImei(t){this.deleteImeiDialog=!0,this.imei=Object.assign({},t)}confirmDeleteSelected(){this.imeiService.deleteMultipleImei(this.selectedImeis.map(t=>t.id)).subscribe(()=>{this.deleteImeisDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Imei Deleted",life:3e3}),this.selectedImeis=[],this.getImeis()})}confirmDelete(){this.imeiService.deleteImei(this.imei.id).subscribe(t=>{this.deleteImeiDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Imei Deleted",life:3e3}),this.imei={},this.getImeis()})}hideDialog(){this.imeiDialog=!1,this.submitted=!1,this.imei={},this.getImeis()}toLocalDateTimeString(t){const l=(o,s=2)=>o.toString().padStart(s,"0");return t.getFullYear()+"-"+l(t.getMonth()+1)+"-"+l(t.getDate())+"T"+l(t.getHours())+":"+l(t.getMinutes())+":"+l(t.getSeconds())+"."+l(t.getMilliseconds(),3)}saveImei(){this.submitted=!0,this.insurances.forEach(t=>{t.billId=t.bilL_ID||t.billId,t.productId=t.producT_ID||t.productId}),this.imei.insurances=this.insurances,this.imei.saleDate=this.toLocalDateTimeString(this.selectedDate),this.imei.id?this.imeiService.updateImei(this.cleanObject(this.imei),this.imei.id).subscribe(t=>{this.messageService.add({severity:"success",summary:"Successful",detail:"Imei Updated",life:3e3}),this.hideDialog()}):(this.imei.id=0,this.imeiService.createImei(this.cleanObject(this.imei)).subscribe(t=>{this.messageService.add({severity:"success",summary:"Successful",detail:"Imei Created",life:3e3}),this.hideDialog()}))}getListBill(){this.billService.getAllBills().subscribe(t=>{this.bills=t.data})}onAddInsurances(){var t;this.insurances.push({bilL_ID:0,billId:0,producT_ID:(null===(t=this.imei)||void 0===t?void 0:t.id)||0,productId:0,insuranceCode:"BH-"+this.appUtil.createId(7),insuranceName:"",month:0,isGeneral:!1,description:""})}onRowEditInit(t){this.clonedProducts[t.id]=Object.assign({},t)}onRowEditSave(t){delete this.clonedProducts[t.id]}onRowEditCancel(t,l){delete this.clonedProducts[t.id]}deleteBillDetail(t){this.insurances=this.insurances.filter(l=>l!==t)}cleanObject(t){return Object.assign({},t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.s),e.Y36(T.C),e.Y36(m.ez))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e._Bn([m.ez])],decls:28,vars:36,consts:[[3,"model"],["cm",""],[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","first","lazy","totalRecords","selection","contextMenu","contextMenuSelection","rowHover","firstChange","onLazyLoad","selectionChange","contextMenuSelectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"p-fluid",3,"visible","header","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","label","Delete","icon","pi pi-trash","class","p-button-danger",3,"click",4,"ngIf"],["pButton","","pRipple","","label","Delete","icon","pi pi-trash",1,"p-button-danger",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",1,"w-full","sm:w-auto",3,"ngModel","ngModelChange","change"],["pSortableColumn","productName"],[1,"flex","align-items-center","w-9rem"],["field","productName"],[1,"text-center","w-9rem"],["pSortableColumn","modelName"],[1,"flex","align-items-center","w-8rem"],["field","modelName"],["pSortableColumn","modelNumber"],["field","modelNumber"],["pSortableColumn","color"],[1,"flex","align-items-center","w-6rem"],["field","color"],["pSortableColumn","capacity"],["field","capacity"],["pSortableColumn","carrierLock"],["field","carrierLock"],[1,"cursor-pointer",3,"pContextMenuRow","click"],[1,"w-2"],[1,"p-column-title"],[1,"w-2","text-center"],["width","60","height","60",3,"src"],[1,"w-1"],[1,"imei-color"],[3,"value","severity"],[1,"field","col-12","sm:col-4"],["for","productName"],["type","text","pInputText","","id","productName","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","modelName"],["filterBy","label",3,"options","ngModel","optionLabel","optionValue","filter","showClear","appendTo","ngModelChange"],["pTemplate","selectedItem"],["pTemplate","item"],["for","modelNumber"],["type","text","pInputText","","id","modelNumber","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["for","color"],[1,"field","col-12","sm:col-4","flex","flex-column"],["for","carrierLock"],["dateFormat","dd/mm/yy",3,"ngModel","appendTo","ngModelChange"],[1,"field","col-12","sm:col-2"],["for","capacity"],[1,"field","col-12","sm:col-2","flex","flex-column"],[1,"pt-2",3,"ngModel","ngModelChange"],["dataKey","id","editMode","row",3,"value"],[1,"ng-dirty","ng-invalid"],["class","flex align-items-center gap-2",4,"ngIf"],[1,"flex","align-items-center","gap-2"],["width","30","height","20",3,"src"],[1,"flex","justify-content-between","px-4","pt-4"],["pButton","","pRipple","","icon","pi pi-plus",3,"label","click"],[2,"width","20%"],[2,"width","15%"],[2,"width","30%"],[3,"pEditableRow"],["pTemplate","input"],["pTemplate","output"],[1,"flex","align-items-center","justify-content-center","gap-2"],["pButton","","pRipple","","icon","pi pi-pencil","class","p-button-rounded p-button-warning","pInitEditableRow","",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check","class","p-button-rounded p-button-text p-button-success mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times","class","p-button-rounded p-button-text p-button-danger",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"],["pInputText","","type","text","required","",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["pButton","","pRipple","","icon","pi pi-pencil","pInitEditableRow","",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check",1,"p-button-rounded","p-button-text","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times",1,"p-button-rounded","p-button-text","p-button-danger",3,"click"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",3,"click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",3,"click"]],template:function(t,l){if(1&t&&(e._UZ(0,"p-contextMenu",0,1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"p-toast"),e.TgZ(6,"p-toolbar",5),e.YNc(7,$,3,1,"ng-template",6),e.qZA(),e.TgZ(8,"p-table",7,8),e.NdJ("firstChange",function(s){return l.first=s})("onLazyLoad",function(s){return l.getImeis(s)})("selectionChange",function(s){return l.selectedImeis=s})("contextMenuSelectionChange",function(s){return l.selectedImei=s}),e.YNc(10,F,7,4,"ng-template",9),e.YNc(11,B,35,21,"ng-template",10),e.YNc(12,k,33,28,"ng-template",11),e.qZA()(),e.TgZ(13,"p-dialog",12),e.NdJ("visibleChange",function(s){return l.imeiDialog=s}),e.ALo(14,"translate"),e.YNc(15,Te,51,61,"ng-template",13),e.YNc(16,Ce,2,0,"ng-template",14),e.qZA(),e.TgZ(17,"p-dialog",15),e.NdJ("visibleChange",function(s){return l.deleteImeiDialog=s}),e.TgZ(18,"div",16),e._UZ(19,"i",17),e.YNc(20,xe,5,1,"span",18),e.qZA(),e.YNc(21,Ze,2,0,"ng-template",14),e.qZA(),e.TgZ(22,"p-dialog",15),e.NdJ("visibleChange",function(s){return l.deleteImeisDialog=s}),e.TgZ(23,"div",16),e._UZ(24,"i",17),e.TgZ(25,"span"),e._uU(26,"Are you sure you want to delete selected imeis?"),e.qZA()(),e.YNc(27,be,2,0,"ng-template",14),e.qZA()()()),2&t){const o=e.MAs(1);e.Q6J("model",l.items),e.xp6(8),e.Q6J("value",l.lstImeis)("columns",l.cols)("rows",10)("globalFilterFields",e.DdM(31,ve))("paginator",!0)("rowsPerPageOptions",e.DdM(32,Ae))("showCurrentPageReport",!0)("first",l.first)("lazy",!0)("totalRecords",l.totalRecords)("selection",l.selectedImeis)("contextMenu",o)("contextMenuSelection",l.selectedImei)("rowHover",!0),e.xp6(5),e.Akn(e.DdM(33,Me)),e.Q6J("visible",l.imeiDialog)("header",e.lcZ(14,29,l.appUtil.isEmpty(l.imei)?"label.imei_add":"label.imei_edit"))("modal",!0),e.xp6(4),e.Akn(e.DdM(34,S)),e.Q6J("visible",l.deleteImeiDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",l.imei),e.xp6(2),e.Akn(e.DdM(35,S)),e.Q6J("visible",l.deleteImeisDialog)("modal",!0)}},dependencies:[P.xV,i.mk,i.O5,h.iA,m.jx,h.lQ,h.zi,h.YL,h.fz,h.D$,h.Pv,h.U1,h.wT,b.Hq,C.Fj,C.JJ,C.Q7,C.On,d.H,v.FN,g.o,a.o,_.Lt,U.Rn,D.V,y.Ct,E.Ql,L.Z,R.f,J.X$],encapsulation:2}),n})(),Ie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[w.Bz.forChild([{path:"",component:Pe}]),w.Bz]}),n})();var Ne=c(373);let Ue=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[u.s,T.C,Ne.r],imports:[P.vI,J.aw,i.ez,Ie,h.U$,x.O,C.u5,b.hJ,d.T,v.EV,g.V,A.Xt,a.j,r.A,_.kW,M.cc,U.L$,D.S,y.TX,E.Iu,L.d,R._8]}),n})()},373:(N,Z,c)=>{c.d(Z,{r:()=>v});var i=c(4004),C=c(2340),h=c(1637),x=c(5e3),b=c(520);const d=`${h.Z.DEFAULT_URLS.API}/Accessories`;let v=(()=>{class g{constructor(a){this.http=a}getPagingAccessory(a){return this.http.get(`${d}`,{params:a}).pipe((0,i.U)(r=>r))}getAllAccessor(){return this.http.get(`${d}/list`,{}).pipe((0,i.U)(a=>a))}getAccessoryDetail(a){return this.http.get(`${d}/${a}`,{}).pipe((0,i.U)(_=>_))}createAccessory(a){return this.http.post(`${d}`,a).pipe((0,i.U)(_=>_))}updateAccessory(a,r){return this.http.put(`${d}`,a).pipe((0,i.U)(M=>M))}deleteAccessory(a){return this.http.delete(`${d}/${a}`,{}).pipe((0,i.U)(_=>_))}deleteMultipleAccessory(a){return this.http.post(`${d}/multiple`,a).pipe()}getExcelReport(a){return this.http.get(`${d}/export-excel-customer`,{}).pipe((0,i.U)(_=>_))}getFolderPathDownload(a,r){return C.N.serverURL+`/ReportDownload/DownloadReportFromFile?filename=${a}&fileType=${r}`}}return g.\u0275fac=function(a){return new(a||g)(x.LFG(b.eN))},g.\u0275prov=x.Yz7({token:g,factory:g.\u0275fac}),g})()},4451:(N,Z,c)=>{c.d(Z,{C:()=>v});var i=c(4004),C=c(2340),h=c(1637),x=c(5e3),b=c(520);const d=`${h.Z.DEFAULT_URLS.API}/Bills`;let v=(()=>{class g{constructor(a){this.http=a}searchImei(a){return this.http.get(`${d}/public/search`,{params:a}).pipe((0,i.U)(r=>r))}getPagingBills(a){return this.http.get(`${d}`,{params:a}).pipe((0,i.U)(r=>r))}getAllBills(){return this.http.get(`${d}/list`,{}).pipe((0,i.U)(a=>a))}getBillDetail(a){return this.http.get(`${d}/${a}`,{}).pipe((0,i.U)(_=>_))}createBill(a){return this.http.post(`${d}`,a).pipe((0,i.U)(_=>_))}updateBill(a,r){return this.http.put(`${d}`,a).pipe((0,i.U)(M=>M))}deleteBill(a){return this.http.delete(`${d}/${a}`,{}).pipe((0,i.U)(_=>_))}deleteMultipleBill(a){return this.http.post(`${d}/multiple`,a).pipe()}getExcelReport(a){return this.http.get(`${d}/export-excel-customer`,{}).pipe((0,i.U)(_=>_))}getFolderPathDownload(a,r){return C.N.serverURL+`/ReportDownload/DownloadReportFromFile?filename=${a}&fileType=${r}`}}return g.\u0275fac=function(a){return new(a||g)(x.LFG(b.eN))},g.\u0275prov=x.Yz7({token:g,factory:g.\u0275fac}),g})()},2162:(N,Z,c)=>{c.d(Z,{s:()=>v});var i=c(4004),C=c(2340),h=c(1637),x=c(5e3),b=c(520);const d=`${h.Z.DEFAULT_URLS.API}/Products`;let v=(()=>{class g{constructor(a){this.http=a}getPagingImei(a){return this.http.get(`${d}`,{params:a}).pipe((0,i.U)(r=>r))}getAllImei(){return this.http.get(`${d}/list`,{}).pipe((0,i.U)(a=>a))}getImeiDetail(a){return this.http.get(`${d}/${a}`,{}).pipe((0,i.U)(_=>_))}createImei(a){return this.http.post(`${d}`,a).pipe((0,i.U)(_=>_))}updateImei(a,r){return console.log(a),this.http.put(`${d}`,a).pipe((0,i.U)(M=>M))}deleteImei(a){return this.http.delete(`${d}/${a}`,{}).pipe((0,i.U)(_=>_))}deleteMultipleImei(a){return this.http.post(`${d}/multiple`,a).pipe()}getExcelReport(a){return this.http.get(`${d}/export-excel-imei`,{}).pipe((0,i.U)(_=>_))}getFolderPathDownload(a,r){return C.N.serverURL+`/ReportDownload/DownloadReportFromFile?filename=${a}&fileType=${r}`}}return g.\u0275fac=function(a){return new(a||g)(x.LFG(b.eN))},g.\u0275prov=x.Yz7({token:g,factory:g.\u0275fac}),g})()},4297:(N,Z,c)=>{c.d(Z,{Z:()=>D,d:()=>w});var i=c(5e3),C=c(9808),h=c(9783);function x(m,f){1&m&&i.GkF(0)}function b(m,f){if(1&m&&(i.TgZ(0,"div",8),i.Hsn(1,1),i.YNc(2,x,1,0,"ng-container",6),i.qZA()),2&m){const u=i.oxw();i.xp6(2),i.Q6J("ngTemplateOutlet",u.headerTemplate)}}function d(m,f){1&m&&i.GkF(0)}function v(m,f){if(1&m&&(i.TgZ(0,"div",9),i._uU(1),i.YNc(2,d,1,0,"ng-container",6),i.qZA()),2&m){const u=i.oxw();i.xp6(1),i.hij(" ",u.header," "),i.xp6(1),i.Q6J("ngTemplateOutlet",u.titleTemplate)}}function g(m,f){1&m&&i.GkF(0)}function A(m,f){if(1&m&&(i.TgZ(0,"div",10),i._uU(1),i.YNc(2,g,1,0,"ng-container",6),i.qZA()),2&m){const u=i.oxw();i.xp6(1),i.hij(" ",u.subheader," "),i.xp6(1),i.Q6J("ngTemplateOutlet",u.subtitleTemplate)}}function a(m,f){1&m&&i.GkF(0)}function r(m,f){1&m&&i.GkF(0)}function _(m,f){if(1&m&&(i.TgZ(0,"div",11),i.Hsn(1,2),i.YNc(2,r,1,0,"ng-container",6),i.qZA()),2&m){const u=i.oxw();i.xp6(2),i.Q6J("ngTemplateOutlet",u.footerTemplate)}}const M=["*",[["p-header"]],[["p-footer"]]],U=["*","p-header","p-footer"];let D=(()=>{class m{constructor(u){this.el=u}ngAfterContentInit(){this.templates.forEach(u=>{switch(u.getType()){case"header":this.headerTemplate=u.template;break;case"title":this.titleTemplate=u.template;break;case"subtitle":this.subtitleTemplate=u.template;break;case"content":default:this.contentTemplate=u.template;break;case"footer":this.footerTemplate=u.template}})}getBlockableElement(){return this.el.nativeElement.children[0]}}return m.\u0275fac=function(u){return new(u||m)(i.Y36(i.SBq))},m.\u0275cmp=i.Xpm({type:m,selectors:[["p-card"]],contentQueries:function(u,T,e){if(1&u&&(i.Suo(e,h.h4,5),i.Suo(e,h.$_,5),i.Suo(e,h.jx,4)),2&u){let P;i.iGM(P=i.CRH())&&(T.headerFacet=P.first),i.iGM(P=i.CRH())&&(T.footerFacet=P.first),i.iGM(P=i.CRH())&&(T.templates=P)}},hostAttrs:[1,"p-element"],inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},ngContentSelectors:U,decls:9,vars:9,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(u,T){1&u&&(i.F$t(M),i.TgZ(0,"div",0),i.YNc(1,b,3,1,"div",1),i.TgZ(2,"div",2),i.YNc(3,v,3,2,"div",3),i.YNc(4,A,3,2,"div",4),i.TgZ(5,"div",5),i.Hsn(6),i.YNc(7,a,1,0,"ng-container",6),i.qZA(),i.YNc(8,_,3,1,"div",7),i.qZA()()),2&u&&(i.Tol(T.styleClass),i.Q6J("ngClass","p-card p-component")("ngStyle",T.style),i.xp6(1),i.Q6J("ngIf",T.headerFacet||T.headerTemplate),i.xp6(2),i.Q6J("ngIf",T.header||T.titleTemplate),i.xp6(1),i.Q6J("ngIf",T.subheader||T.subtitleTemplate),i.xp6(3),i.Q6J("ngTemplateOutlet",T.contentTemplate),i.xp6(1),i.Q6J("ngIf",T.footerFacet||T.footerTemplate))},dependencies:[C.mk,C.O5,C.tP,C.PC],styles:[".p-card-header img{width:100%}\n"],encapsulation:2,changeDetection:0}),m})(),w=(()=>{class m{}return m.\u0275fac=function(u){return new(u||m)},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({imports:[C.ez,h.m8]}),m})()}}]);