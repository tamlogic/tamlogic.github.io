"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[321],{1321:(L,C,r)=>{r.r(C),r.d(C,{CustomerModule:()=>X});var g=r(9808),m=r(3075),_=r(4851),v=r(4423),h=r(845),f=r(5787),p=r(1497),Z=r(4534),d=r(8018),x=r(1424),l=r(3407),i=r(9748),c=r(9603),b=r(7010),U=r(5315),D=r(8507),A=r(9783),y=r(1726),T=r(4930),w=r(1637),e=r(5e3),S=r(330),N=r(7232);function J(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.deleteSelectedcustomers())}),e.qZA()}2&o&&e.Q6J("hidden",!0)}function R(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"div",19)(1,"button",20),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.openNew())}),e.qZA(),e.YNc(2,J,1,1,"button",21),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.selectedcustomers&&t.selectedcustomers.length>0)}}function E(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"div",23)(1,"h5",24),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",25),e._UZ(5,"i",26),e.TgZ(6,"input",27),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.getParams.searchText=s)})("change",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.getCustomers())}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,"label.customer_management")," "),e.xp6(4),e.Q6J("ngModel",t.getParams.searchText)}}function O(o,u){1&o&&(e.TgZ(0,"tr")(1,"th",28),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"p-sortIcon",29),e.qZA(),e.TgZ(5,"th",30),e._uU(6),e.ALo(7,"translate"),e._UZ(8,"p-sortIcon",31),e.qZA(),e.TgZ(9,"th",32),e._uU(10),e.ALo(11,"translate"),e._UZ(12,"p-sortIcon",33),e.qZA(),e.TgZ(13,"th",34),e._uU(14),e.ALo(15,"translate"),e._UZ(16,"p-sortIcon",35),e.qZA(),e.TgZ(17,"th",36),e._uU(18),e.ALo(19,"translate"),e._UZ(20,"p-sortIcon",37),e.qZA()()),2&o&&(e.xp6(2),e.hij(" ",e.lcZ(3,5,"label.customer_code"),""),e.xp6(4),e.hij(" ",e.lcZ(7,7,"label.customer_name"),""),e.xp6(4),e.hij(" ",e.lcZ(11,9,"label.phone"),""),e.xp6(4),e.hij(" ",e.lcZ(15,11,"label.email"),""),e.xp6(4),e.hij(" ",e.lcZ(19,13,"label.address"),""))}function I(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"tr",38),e.NdJ("click",function(){const a=e.CHM(t).$implicit,ee=e.oxw();return e.KtG(ee.editCustomer(a))}),e.TgZ(1,"td",39)(2,"span",40),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._uU(5),e.qZA(),e.TgZ(6,"td",39)(7,"span",40),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"td",39)(12,"span",40),e._uU(13),e.ALo(14,"translate"),e.qZA(),e._uU(15),e.qZA(),e.TgZ(16,"td",39)(17,"span",40),e._uU(18),e.ALo(19,"translate"),e.qZA(),e._uU(20),e.qZA(),e.TgZ(21,"td",39)(22,"span",40),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._uU(25),e.qZA()()}if(2&o){const t=u.$implicit;e.Q6J("pContextMenuRow",t),e.xp6(3),e.Oqu(e.lcZ(4,11,"label.customer_code")),e.xp6(2),e.hij(" ",t.customerCode," "),e.xp6(3),e.Oqu(e.lcZ(9,13,"label.customer_name")),e.xp6(2),e.hij(" ",t.customerName," "),e.xp6(3),e.Oqu(e.lcZ(14,15,"label.phone")),e.xp6(2),e.hij(" ",t.phone," "),e.xp6(3),e.Oqu(e.lcZ(19,17,"label.email")),e.xp6(2),e.hij(" ",t.email," "),e.xp6(3),e.Oqu(e.lcZ(24,19,"label.address")),e.xp6(2),e.hij(" ",t.address," ")}}const M=function(o){return{name:o}};function F(o,u){1&o&&(e.TgZ(0,"small",52),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij("",e.xi3(2,1,"info.is_required",e.VKq(6,M,e.lcZ(3,4,"label.customer_name")))," "))}function j(o,u){1&o&&(e.TgZ(0,"small",52),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.xi3(2,1,"info.is_required",e.VKq(6,M,e.lcZ(3,4,"label.phone")))))}function K(o,u){1&o&&(e.TgZ(0,"small",52),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.xi3(2,1,"info.is_required",e.VKq(6,M,e.lcZ(3,4,"label.address")))))}const q=function(o){return{"ng-invalid ng-dirty":o}};function Q(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",41)(2,"label",42),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",43),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.customer.customerName=s)}),e.qZA(),e.YNc(6,F,4,8,"small",44),e.qZA(),e.TgZ(7,"div",41)(8,"label",45),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"input",46),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.customer.phone=s)}),e.qZA(),e.YNc(12,j,4,8,"small",44),e.qZA(),e.TgZ(13,"div",41)(14,"label",47),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"input",48),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.customer.email=s)}),e.qZA()(),e.TgZ(18,"div",49)(19,"label",50),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"textarea",51),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.customer.address=s)}),e.qZA(),e.YNc(23,K,4,8,"small",44),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,13,"label.customer_name")),e.xp6(2),e.Q6J("ngModel",t.customer.customerName)("ngClass",e.VKq(21,q,t.submitted&&!t.customer.customerName)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.customer.customerName),e.xp6(3),e.Oqu(e.lcZ(10,15,"label.phone")),e.xp6(2),e.Q6J("ngModel",t.customer.phone)("ngClass",e.VKq(23,q,t.submitted&&!t.customer.phone)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.customer.phone),e.xp6(3),e.Oqu(e.lcZ(16,17,"label.email")),e.xp6(2),e.Q6J("ngModel",t.customer.email),e.xp6(3),e.Oqu(e.lcZ(21,19,"label.address")),e.xp6(2),e.Q6J("ngModel",t.customer.address),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.customer.email)}}function H(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.hideDialog())}),e.qZA(),e.TgZ(1,"button",54),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.saveCustomer())}),e.qZA()}}function B(o,u){if(1&o&&(e.TgZ(0,"span"),e._uU(1,"Are you sure you want to delete "),e.TgZ(2,"b"),e._uU(3),e.qZA(),e._uU(4,"?"),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.customer.customerCode)}}function $(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"button",55),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.deleteCustomerDialog=!1)}),e.qZA(),e.TgZ(1,"button",56),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.confirmDelete())}),e.qZA()}}function z(o,u){if(1&o){const t=e.EpF();e.TgZ(0,"button",55),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.deleteCustomersDialog=!1)}),e.qZA(),e.TgZ(1,"button",56),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.confirmDeleteSelected())}),e.qZA()}}const G=function(){return["customerCode","customerName","phone","email","address"]},Y=function(){return[5,10,20]},k=function(){return{width:"70rem"}},P=function(){return{width:"450px"}};let V=(()=>{class o{constructor(t,n){this.customerService=t,this.messageService=n,this.appUtil=T.Z,this.customerDialog=!1,this.deleteCustomerDialog=!1,this.deleteCustomersDialog=!1,this.customers=[],this.customer={},this.selectedcustomers=[],this.submitted=!1,this.cols=[],this.rowsPerPageOptions=[5,10,20],this.items=[],this.loading=!1,this.getParams={page:0,pageSize:5,sortField:"id",isSort:!0,searchText:""},this.lstCustomers=[],this.selectedCustomer={},this.totalRecords=0,this.totalPages=0,this.first=0}ngOnInit(){this.cols=[{field:"customerCode",header:"Customer code"},{field:"customerName",header:"Customer name"},{field:"phone",header:"Phone"},{field:"email",header:"Email"},{field:"address",header:"Address"}],this.items=[{label:"View",icon:"pi pi-fw pi-search",command:()=>{this.editCustomer(this.selectedCustomer)}},{label:"Delete",icon:"pi pi-fw pi-times",command:()=>{this.deleteCustomer(this.selectedCustomer)}}]}getCustomers(t,n=!1){this.pendingRequest&&this.pendingRequest.unsubscribe(),this.loading=!0,t&&(this.getParams.page=t.first/t.rows,this.getParams.pageSize=t.rows+1,this.getParams.sortField=t.sortField,this.getParams.isSort=1===t.sortOrder),n&&this.customerService.getExcelReport(this.getParams).subscribe(s=>{T.Z.scrollToTop(),this.openDownloadFile(s.data,"excel")}),Object.keys(this.getParams).forEach(s=>null==this.getParams[s]&&delete this.getParams[s]),this.pendingRequest=this.customerService.getPagingCustomer(this.getParams).subscribe(s=>{T.Z.scrollToTop(),this.lstCustomers=s.data,this.totalRecords=s.totalItems||0,this.totalPages=s.totalItems/s.pageSize,console.log(this.lstCustomers),this.loading=!1})}openDownloadFile(t,n){try{const s=this.customerService.getFolderPathDownload(t,n);s&&window.open(s)}catch(s){this.messageService.add({severity:"error",summary:"Error Message",detail:"File invalid"})}}openNew(){this.customer={},this.submitted=!1,this.customerDialog=!0}deleteSelectedcustomers(){this.deleteCustomersDialog=!0}editCustomer(t){this.customer=Object.assign({},t),this.customerDialog=!0}deleteCustomer(t){this.deleteCustomerDialog=!0,this.customer=Object.assign({},t)}confirmDeleteSelected(){this.customerService.deleteMultipleCustomer(this.selectedcustomers.map(t=>t.id)).subscribe(()=>{this.deleteCustomersDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"customers Deleted",life:3e3}),this.selectedcustomers=[],this.getCustomers()})}confirmDelete(){this.customerService.deleteCustomer(this.customer.id).subscribe(t=>{this.deleteCustomerDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"customer Deleted",life:3e3}),this.customer={},this.getCustomers()})}hideDialog(){this.customerDialog=!1,this.submitted=!1,this.customer={},this.getCustomers()}saveCustomer(){this.submitted=!0,this.appUtil.isValidObjectRequired(w.Z.REQUIRED.CUSTOMER,this.customer)?(console.log(this.customer),this.customer.id?this.customerService.updateCustomer(this.customer,this.customer.id).subscribe(t=>{console.log(t),this.messageService.add({severity:"success",summary:"Successful",detail:"Customer Updated",life:3e3}),this.hideDialog()}):(this.customer.id=0,this.customer.customerCode=T.Z.createId(6),this.customerService.createCustomer(this.customer).subscribe(t=>{this.messageService.add({severity:"success",summary:"Successful",detail:"Customer Created",life:3e3}),this.hideDialog()}))):this.messageService.add({severity:"info",summary:"Info",detail:"Ki\u1ec3m tra l\u1ea1i form",life:3e3})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(y.v),e.Y36(A.ez))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],features:[e._Bn([A.ez])],decls:28,vars:36,consts:[[3,"model"],["cm",""],[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","first","lazy","totalRecords","selection","contextMenu","contextMenuSelection","rowHover","firstChange","onLazyLoad","selectionChange","contextMenuSelectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"p-fluid",3,"visible","header","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","label","Delete","icon","pi pi-trash","class","p-button-danger",3,"hidden","click",4,"ngIf"],["pButton","","pRipple","","label","Delete","icon","pi pi-trash",1,"p-button-danger",3,"hidden","click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",1,"w-full","sm:w-auto",3,"ngModel","ngModelChange","change"],["pSortableColumn","customerCode",1,"w-2"],["field","customerCode"],["pSortableColumn","customerName",1,"w-2"],["field","customerName"],["pSortableColumn","phone",1,"w-2"],["field","phone"],["pSortableColumn","email",1,"w-2"],["field","email"],["pSortableColumn","address",1,"w-3"],["field","address"],[1,"cursor-pointer",3,"pContextMenuRow","click"],[1,"w-2"],[1,"p-column-title"],[1,"field","col-12","sm:col-4"],["for","customerName"],["type","text","pInputText","","id","customerName","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","phone"],["type","text","pInputText","","id","phone","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["for","email"],["type","text","pInputText","","id","email","autofocus","",3,"ngModel","ngModelChange"],[1,"field","col-12"],["for","address"],["id","address","pInputTextarea","","required","","rows","3","cols","20",3,"ngModel","ngModelChange"],[1,"ng-dirty","ng-invalid"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",3,"click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"]],template:function(t,n){if(1&t&&(e._UZ(0,"p-contextMenu",0,1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"p-toast"),e.TgZ(6,"p-toolbar",5),e.YNc(7,R,3,1,"ng-template",6),e.qZA(),e.TgZ(8,"p-table",7,8),e.NdJ("firstChange",function(a){return n.first=a})("onLazyLoad",function(a){return n.getCustomers(a)})("selectionChange",function(a){return n.selectedcustomers=a})("contextMenuSelectionChange",function(a){return n.selectedCustomer=a}),e.YNc(10,E,7,4,"ng-template",9),e.YNc(11,O,21,15,"ng-template",10),e.YNc(12,I,26,21,"ng-template",11),e.qZA()(),e.TgZ(13,"p-dialog",12),e.NdJ("visibleChange",function(a){return n.customerDialog=a}),e.ALo(14,"translate"),e.YNc(15,Q,24,25,"ng-template",13),e.YNc(16,H,2,0,"ng-template",14),e.qZA(),e.TgZ(17,"p-dialog",15),e.NdJ("visibleChange",function(a){return n.deleteCustomerDialog=a}),e.TgZ(18,"div",16),e._UZ(19,"i",17),e.YNc(20,B,5,1,"span",18),e.qZA(),e.YNc(21,$,2,0,"ng-template",14),e.qZA(),e.TgZ(22,"p-dialog",15),e.NdJ("visibleChange",function(a){return n.deleteCustomersDialog=a}),e.TgZ(23,"div",16),e._UZ(24,"i",17),e.TgZ(25,"span"),e._uU(26,"Are you sure you want to delete selected customers?"),e.qZA()(),e.YNc(27,z,2,0,"ng-template",14),e.qZA()()()),2&t){const s=e.MAs(1);e.Q6J("model",n.items),e.xp6(8),e.Q6J("value",n.lstCustomers)("columns",n.cols)("rows",10)("globalFilterFields",e.DdM(31,G))("paginator",!0)("rowsPerPageOptions",e.DdM(32,Y))("showCurrentPageReport",!0)("first",n.first)("lazy",!0)("totalRecords",n.totalRecords)("selection",n.selectedcustomers)("contextMenu",s)("contextMenuSelection",n.selectedCustomer)("rowHover",!0),e.xp6(5),e.Akn(e.DdM(33,k)),e.Q6J("visible",n.customerDialog)("header",e.lcZ(14,29,n.appUtil.isEmpty(n.customer)?"label.customer_add":"label.customer_edit"))("modal",!0),e.xp6(4),e.Akn(e.DdM(34,P)),e.Q6J("visible",n.deleteCustomerDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",n.customer),e.xp6(2),e.Akn(e.DdM(35,P)),e.Q6J("visible",n.deleteCustomersDialog)("modal",!0)}},dependencies:[S.xV,g.mk,g.O5,_.iA,A.jx,_.lQ,_.zi,_.fz,h.Hq,m.Fj,m.JJ,m.Q7,m.On,f.H,p.FN,Z.o,x.o,l.g,U.V,N.X$],encapsulation:2}),o})(),W=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[D.Bz.forChild([{path:"",component:V}]),D.Bz]}),o})(),X=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[y.v],imports:[S.vI,N.aw,g.ez,W,_.U$,v.O,m.u5,h.hJ,f.T,p.EV,Z.V,d.Xt,x.j,l.A,i.kW,c.cc,b.L$,U.S]}),o})()},1726:(L,C,r)=>{r.d(C,{v:()=>Z});var g=r(5861),m=r(4004),_=r(2340),v=r(1637),h=r(5e3),f=r(520);const p=`${v.Z.DEFAULT_URLS.API}/Customers`;let Z=(()=>{class d{constructor(l){this.http=l}getCustomersSmall(){var l=this;return(0,g.Z)(function*(){return yield l.http.get("assets/demo/data/customers-small.json").toPromise().then(i=>i.data).then(i=>i)})()}getCustomersMedium(){var l=this;return(0,g.Z)(function*(){return yield l.http.get("assets/demo/data/customers-medium.json").toPromise().then(i=>i.data).then(i=>i)})()}getCustomersLarge(){var l=this;return(0,g.Z)(function*(){return yield l.http.get("assets/demo/data/customers-large.json").toPromise().then(i=>i.data).then(i=>i)})()}getPagingCustomer(l){return this.http.get(`${p}`,{params:l}).pipe((0,m.U)(i=>i))}getAllCustomer(){return this.http.get(`${p}/list`,{}).pipe((0,m.U)(l=>l))}getCustomerDetail(l){return this.http.get(`${p}/${l}`,{}).pipe((0,m.U)(c=>c))}createCustomer(l){return this.http.post(`${p}`,l).pipe((0,m.U)(c=>c))}updateCustomer(l,i){return this.http.put(`${p}`,l).pipe((0,m.U)(b=>b))}deleteCustomer(l){return this.http.delete(`${p}/${l}`,{}).pipe((0,m.U)(c=>c))}deleteMultipleCustomer(l){return this.http.post(`${p}/multiple`,l).pipe()}getExcelReport(l){return this.http.get(`${p}/export-excel-customer`,{}).pipe((0,m.U)(c=>c))}getFolderPathDownload(l,i){return _.N.serverURL+`/ReportDownload/DownloadReportFromFile?filename=${l}&fileType=${i}`}}return d.\u0275fac=function(l){return new(l||d)(h.LFG(f.eN))},d.\u0275prov=h.Yz7({token:d,factory:d.\u0275fac}),d})()}}]);