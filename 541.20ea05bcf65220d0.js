"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[541],{68541:(X,u,n)=>{n.r(u),n.d(u,{AccessoryModule:()=>V});var d=n(69808),r=n(93075),a=n(98952),S=n(88205),h=n(40845),y=n(25787),A=n(17773),f=n(44534),P=n(98018),_=n(31424),Z=n(73407),D=n(14036),J=n(49603),x=n(7010),C=n(15315),T=n(51122),g=n(44930),w=n(94327),e=n(5e3),b=n(373),v=n(59783),M=n(27232);function q(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",17)(1,"button",18),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.openNew())}),e.qZA(),e.TgZ(2,"button",19),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.deleteSelectedAccessories())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("disabled",!t.selectedAccessories||!t.selectedAccessories.length)}}function U(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",20)(1,"h5",21),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",22),e._UZ(5,"i",23),e.TgZ(6,"input",24),e.NdJ("ngModelChange",function(s){e.CHM(t);const i=e.oxw();return e.KtG(i.getParams.searchText=s)})("change",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.getAccessories())}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"label.accessory_management")),e.xp6(4),e.Q6J("ngModel",t.getParams.searchText)}}function F(o,l){1&o&&(e.TgZ(0,"tr")(1,"th",25),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",26),e._uU(4),e.ALo(5,"translate"),e._UZ(6,"p-sortIcon",27),e.qZA(),e.TgZ(7,"th",28),e._uU(8),e.ALo(9,"translate"),e._UZ(10,"p-sortIcon",29),e.qZA(),e.TgZ(11,"th",30),e._uU(12),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"th",31),e.qZA()),2&o&&(e.xp6(4),e.Oqu(e.lcZ(5,3,"label.accessory_name")),e.xp6(4),e.Oqu(e.lcZ(9,5,"label.sale_price")),e.xp6(4),e.Oqu(e.lcZ(13,7,"label.description")))}function R(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",32),e.qZA(),e.TgZ(3,"td",33)(4,"span",34),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._uU(7),e.qZA(),e.TgZ(8,"td",35)(9,"span",34),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._uU(12),e.ALo(13,"number"),e.qZA(),e.TgZ(14,"td",35)(15,"span",34),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._uU(18),e.qZA(),e.TgZ(19,"td",31)(20,"div",36)(21,"button",37),e.NdJ("click",function(){const i=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.editAccessory(i))}),e.qZA(),e.TgZ(22,"button",38),e.NdJ("click",function(){const i=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.deleteAccessory(i))}),e.qZA()()()()}if(2&o){const t=l.$implicit;e.xp6(2),e.Q6J("value",t),e.xp6(3),e.Oqu(e.lcZ(6,7,"label.accessory_name")),e.xp6(2),e.hij(" ",t.accessoryName," "),e.xp6(3),e.Oqu(e.lcZ(11,9,"label.sale_price")),e.xp6(2),e.hij(" ",e.lcZ(13,11,t.salePrice)," "),e.xp6(4),e.Oqu(e.lcZ(17,13,"label.description")),e.xp6(2),e.hij(" ",t.description," ")}}function O(o,l){1&o&&(e.TgZ(0,"small",47),e._uU(1,"Accessory name is required."),e.qZA())}function E(o,l){1&o&&(e.TgZ(0,"small",47),e._uU(1,"Sale Price is required."),e.qZA())}function L(o,l){1&o&&(e.TgZ(0,"small",47),e._uU(1,"Address is required."),e.qZA())}const m=function(o){return{"ng-invalid ng-dirty":o}};function H(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",39)(1,"label",40),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",41),e.NdJ("ngModelChange",function(s){e.CHM(t);const i=e.oxw();return e.KtG(i.accessory.accessoryName=s)}),e.qZA(),e.YNc(5,O,2,0,"small",42),e.qZA(),e.TgZ(6,"div",39)(7,"label",43),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"p-inputNumber",44),e.NdJ("ngModelChange",function(s){e.CHM(t);const i=e.oxw();return e.KtG(i.accessory.salePrice=s)}),e.qZA(),e.YNc(11,E,2,0,"small",42),e.qZA(),e.TgZ(12,"div",39)(13,"label",45),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"textarea",46),e.NdJ("ngModelChange",function(s){e.CHM(t);const i=e.oxw();return e.KtG(i.accessory.description=s)}),e.qZA(),e.YNc(17,L,2,0,"small",42),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,12,"label.accessory_name")),e.xp6(2),e.Q6J("ngModel",t.accessory.accessoryName)("ngClass",e.VKq(18,m,t.submitted&&!t.accessory.accessoryName)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.accessory.accessoryName),e.xp6(3),e.Oqu(e.lcZ(9,14,"label.sale_price")),e.xp6(2),e.Q6J("ngModel",t.accessory.salePrice)("ngClass",e.VKq(20,m,t.submitted&&!t.accessory.salePrice)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.accessory.salePrice),e.xp6(3),e.Oqu(e.lcZ(15,16,"label.description")),e.xp6(2),e.Q6J("ngModel",t.accessory.description)("ngClass",e.VKq(22,m,t.submitted&&!t.accessory.description)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.accessory.description)}}function K(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.hideDialog())}),e.qZA(),e.TgZ(1,"button",49),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.saveAccessory())}),e.qZA()}}function I(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1,"Are you sure you want to delete "),e.TgZ(2,"b"),e._uU(3),e.qZA(),e._uU(4,"?"),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.accessory.accessoryName)}}function k(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.deleteAccessoryDialog=!1)}),e.qZA(),e.TgZ(1,"button",51),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.confirmDelete())}),e.qZA()}}function G(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.deleteAccessoriesDialog=!1)}),e.qZA(),e.TgZ(1,"button",51),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.confirmDeleteSelected())}),e.qZA()}}const Q=function(){return["accessoryName","salePrice","description"]},Y=function(){return[5,10,20]},B=function(){return{width:"50rem"}},N=function(){return{width:"450px"}};let j=(()=>{class o{constructor(t,c){this.accessoryService=t,this.messageService=c,this.appUtil=g.Z,this.accessoryDialog=!1,this.deleteAccessoryDialog=!1,this.deleteAccessoriesDialog=!1,this.accessories=[],this.accessory={},this.selectedAccessories=[],this.submitted=!1,this.cols=[],this.rowsPerPageOptions=[5,10,20],this.loading=!1,this.getParams={page:0,pageSize:5,sortField:"id",isSort:!0,searchText:""},this.lstAccessories=[],this.totalRecords=0,this.totalPages=0,this.first=0}ngOnInit(){this.cols=[{field:"accessoryName",header:"Accessory name"},{field:"salePrice",header:"Sale Price"},{field:"description",header:"Description"}]}getAccessories(t,c=!1){this.pendingRequest&&this.pendingRequest.unsubscribe(),this.loading=!0,t&&(console.log(t),this.getParams.page=t.first/t.rows,this.getParams.pageSize=t.rows+1,this.getParams.sortField=t.sortField,this.getParams.isSort=1===t.sortOrder),c&&this.accessoryService.getExcelReport(this.getParams).subscribe(s=>{g.Z.scrollToTop(),this.openDownloadFile(s.data,"excel")}),Object.keys(this.getParams).forEach(s=>null==this.getParams[s]&&delete this.getParams[s]),this.pendingRequest=this.accessoryService.getPagingAccessory(this.getParams).subscribe(s=>{g.Z.scrollToTop(),this.lstAccessories=s.data,this.totalRecords=s.totalItems||0,this.totalPages=s.totalItems/s.pageSize,console.log(this.lstAccessories),this.loading=!1})}openDownloadFile(t,c){try{var s=this.accessoryService.getFolderPathDownload(t,c);s&&window.open(s)}catch(i){this.messageService.add({severity:"error",summary:"Error Message",detail:"File invalid"})}}openNew(){this.accessory={},this.submitted=!1,this.accessoryDialog=!0}deleteSelectedAccessories(){this.deleteAccessoriesDialog=!0}editAccessory(t){this.accessory=Object.assign({},t),this.accessoryDialog=!0}deleteAccessory(t){this.deleteAccessoryDialog=!0,this.accessory=Object.assign({},t)}confirmDeleteSelected(){this.accessoryService.deleteMultipleAccessory(this.selectedAccessories.map(t=>t.id)).subscribe(()=>{this.deleteAccessoriesDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"accessories Deleted",life:3e3}),this.selectedAccessories=[],this.getAccessories()})}confirmDelete(){this.accessoryService.deleteAccessory(this.accessory.id).subscribe(t=>{this.deleteAccessoryDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"accessory Deleted",life:3e3}),this.accessory={},this.getAccessories()})}hideDialog(){this.accessoryDialog=!1,this.submitted=!1,this.accessory={},this.getAccessories()}saveAccessory(){this.submitted=!0,console.log(this.accessory),this.accessory.id?this.accessoryService.updateAccessory(this.accessory,this.accessory.id).subscribe(t=>{console.log(t),this.messageService.add({severity:"success",summary:"Successful",detail:"accessory Updated",life:3e3}),this.hideDialog()}):(this.accessory.id=0,this.accessoryService.createAccessory(this.accessory).subscribe(t=>{console.log(t),this.messageService.add({severity:"success",summary:"Successful",detail:"accessory Created",life:3e3}),this.hideDialog()}))}findIndexById(t){let c=-1;for(let s=0;s<this.accessories.length;s++)if(this.accessories[s].id===t){c=s;break}return c}createId(){let t="";const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let s=0;s<6;s++)t+=c.charAt(Math.floor(Math.random()*c.length));return t}onGlobalFilter(t,c){t.filterGlobal(c.target.value,"contains")}exportPdf(){n.e(583).then(n.bind(n,53583)).then(t=>{Promise.all([n.e(583),n.e(983)]).then(n.t.bind(n,12983,23)).then(c=>{const s=new t.default;s.autoTable(this.cols,this.accessories),s.save("accessory.pdf")})})}exportExcel(){n.e(574).then(n.bind(n,80574)).then(t=>{const s={Sheets:{data:t.utils.json_to_sheet(this.accessories)},SheetNames:["data"]},i=t.write(s,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(i,"accessories")})}saveAsExcelFile(t,c){const p=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});w.saveAs(p,c+"_export_"+(new Date).getTime()+".xlsx")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.r),e.Y36(v.ez))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-accessory"]],decls:26,vars:33,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","first","lazy","totalRecords","selection","rowHover","firstChange","onLazyLoad","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"p-fluid",3,"visible","header","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","label","Delete","icon","pi pi-trash",1,"p-button-danger",3,"disabled","click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",1,"w-full","sm:w-auto",3,"ngModel","ngModelChange","change"],[2,"width","3rem"],["pSortableColumn","accessoryName",1,"w-4"],["field","accessoryName"],["pSortableColumn","salePrice",1,"w-3"],["field","salePrice"],["pSortableColumn","description",1,"w-3"],[1,"w-2"],[3,"value"],[1,"w-4"],[1,"p-column-title"],[1,"w-3"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"click"],[1,"field"],["for","accessoryName"],["type","text","pInputText","","id","accessoryName","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","salePrice"],[3,"ngModel","ngClass","ngModelChange"],["for","description"],["id","capacity","pInputTextarea","","required","","rows","3","cols","20","autofocus","",3,"ngModel","ngClass","ngModelChange"],[1,"ng-dirty","ng-invalid"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",3,"click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"]],template:function(t,c){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"p-toast"),e.TgZ(4,"p-toolbar",3),e.YNc(5,q,3,1,"ng-template",4),e.qZA(),e.TgZ(6,"p-table",5,6),e.NdJ("firstChange",function(i){return c.first=i})("onLazyLoad",function(i){return c.getAccessories(i)})("selectionChange",function(i){return c.selectedAccessories=i}),e.YNc(8,U,7,4,"ng-template",7),e.YNc(9,F,15,9,"ng-template",8),e.YNc(10,R,23,15,"ng-template",9),e.qZA()(),e.TgZ(11,"p-dialog",10),e.NdJ("visibleChange",function(i){return c.accessoryDialog=i}),e.ALo(12,"translate"),e.YNc(13,H,18,24,"ng-template",11),e.YNc(14,K,2,0,"ng-template",12),e.qZA(),e.TgZ(15,"p-dialog",13),e.NdJ("visibleChange",function(i){return c.deleteAccessoryDialog=i}),e.TgZ(16,"div",14),e._UZ(17,"i",15),e.YNc(18,I,5,1,"span",16),e.qZA(),e.YNc(19,k,2,0,"ng-template",12),e.qZA(),e.TgZ(20,"p-dialog",13),e.NdJ("visibleChange",function(i){return c.deleteAccessoriesDialog=i}),e.TgZ(21,"div",14),e._UZ(22,"i",15),e.TgZ(23,"span"),e._uU(24,"Are you sure you want to delete selected accessory?"),e.qZA()(),e.YNc(25,G,2,0,"ng-template",12),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("value",c.lstAccessories)("columns",c.cols)("rows",10)("globalFilterFields",e.DdM(28,Q))("paginator",!0)("rowsPerPageOptions",e.DdM(29,Y))("showCurrentPageReport",!0)("first",c.first)("lazy",!0)("totalRecords",c.totalRecords)("selection",c.selectedAccessories)("rowHover",!0),e.xp6(5),e.Akn(e.DdM(30,B)),e.Q6J("visible",c.accessoryDialog)("header",e.lcZ(12,26,c.appUtil.isEmpty(c.accessory)?"label.accessory_add":"label.accessory_edit"))("modal",!0),e.xp6(4),e.Akn(e.DdM(31,N)),e.Q6J("visible",c.deleteAccessoryDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",c.accessory),e.xp6(2),e.Akn(e.DdM(32,N)),e.Q6J("visible",c.deleteAccessoriesDialog)("modal",!0))},dependencies:[d.mk,d.O5,a.iA,v.jx,a.lQ,a.fz,a.UA,a.Mo,h.Hq,r.Fj,r.JJ,r.Q7,r.On,y.H,A.FN,f.o,_.o,Z.g,x.Rn,C.V,M.X$,d.JJ],encapsulation:2}),o})(),z=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[T.Bz.forChild([{path:"",component:j}]),T.Bz]}),o})(),V=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[b.r],imports:[M.aw,d.ez,z,a.U$,S.O,r.u5,h.hJ,y.T,A.EV,f.V,P.Xt,_.j,Z.A,D.kW,J.cc,x.L$,C.S]}),o})()}}]);