"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[3362],{2982:(D,C,g)=>{g.d(C,{Tm:()=>u,i3:()=>r});var i=g(5678),o=g(6814);const n=["video"],p=["canvas"];function f(s,h){if(1&s){const e=i.EpF();i.TgZ(0,"div",6),i.NdJ("click",function(){i.CHM(e);const a=i.oxw();return i.KtG(a.rotateVideoInput(!0))}),i.qZA()}}class l{constructor(h,e,t){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=e,this._imageAsDataUrl=h,this._imageData=t}static getDataFromDataUrl(h,e){return h.replace(`data:${e};base64,`,"")}get imageAsBase64(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=l.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}get imageAsDataUrl(){return this._imageAsDataUrl}get imageData(){return this._imageData}}class _{static getAvailableVideoInputs(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((h,e)=>{navigator.mediaDevices.enumerateDevices().then(t=>{h(t.filter(a=>"videoinput"===a.kind))}).catch(t=>{e(t.message||t)})}):Promise.reject("enumerateDevices() not supported.")}}let r=(()=>{class s{constructor(){this.width=640,this.height=480,this.videoOptions=s.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=s.DEFAULT_IMAGE_TYPE,this.imageQuality=s.DEFAULT_IMAGE_QUALITY,this.imageCapture=new i.vpe,this.initError=new i.vpe,this.imageClick=new i.vpe,this.cameraSwitched=new i.vpe,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}set trigger(e){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=e.subscribe(()=>{this.takeSnapshot()})}set switchCamera(e){this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=e.subscribe(t=>{"string"==typeof t?this.switchToVideoInput(t):this.rotateVideoInput(!1!==t)})}static getMediaConstraintsForDevice(e,t){const a=t||this.DEFAULT_VIDEO_OPTIONS;return e&&(a.deviceId={exact:e}),a}static getDeviceIdFromMediaStreamTrack(e){if(e.getSettings&&e.getSettings()&&e.getSettings().deviceId)return e.getSettings().deviceId;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().deviceId){const t=e.getConstraints().deviceId;return s.getValueFromConstrainDOMString(t)}}static getFacingModeFromMediaStreamTrack(e){if(e){if(e.getSettings&&e.getSettings()&&e.getSettings().facingMode)return e.getSettings().facingMode;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().facingMode){const t=e.getConstraints().facingMode;return s.getValueFromConstrainDOMString(t)}}}static isUserFacing(e){const t=s.getFacingModeFromMediaStreamTrack(e);return!!t&&"user"===t.toLowerCase()}static getValueFromConstrainDOMString(e){if(e){if(e instanceof String)return String(e);if(Array.isArray(e)&&Array(e).length>0)return String(e[0]);if("object"==typeof e){if(e.exact)return String(e.exact);if(e.ideal)return String(e.ideal)}}return null}ngAfterViewInit(){this.detectAvailableDevices().then(()=>{this.switchToVideoInput(null)}).catch(e=>{this.initError.next({message:e}),this.switchToVideoInput(null)})}ngOnDestroy(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}takeSnapshot(){const e=this.nativeVideoElement,t={width:this.width,height:this.height};e.videoWidth&&(t.width=e.videoWidth,t.height=e.videoHeight);const a=this.canvas.nativeElement;a.width=t.width,a.height=t.height;const v=a.getContext("2d");v.drawImage(e,0,0);const d=this.imageType?this.imageType:s.DEFAULT_IMAGE_TYPE,b=a.toDataURL(d,this.imageQuality?this.imageQuality:s.DEFAULT_IMAGE_QUALITY);let I=null;this.captureImageData&&(I=v.getImageData(0,0,a.width,a.height)),this.imageCapture.next(new l(b,d,I))}rotateVideoInput(e){this.availableVideoInputs&&this.availableVideoInputs.length>1&&this.switchToVideoInput(this.availableVideoInputs[(this.activeVideoInputIndex+(e?1:this.availableVideoInputs.length-1))%this.availableVideoInputs.length].deviceId)}switchToVideoInput(e){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(e,this.videoOptions)}videoResize(){}get videoWidth(){const e=this.getVideoAspectRatio();return Math.min(this.width,this.height*e)}get videoHeight(){const e=this.getVideoAspectRatio();return Math.min(this.height,this.width/e)}get videoStyleClasses(){let e="";return this.isMirrorImage()&&(e+="mirrored "),e.trim()}get nativeVideoElement(){return this.video.nativeElement}getVideoAspectRatio(){const e=this.nativeVideoElement;return e.videoWidth&&e.videoWidth>0&&e.videoHeight&&e.videoHeight>0?e.videoWidth/e.videoHeight:this.width/this.height}initWebcam(e,t){const a=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const v=s.getMediaConstraintsForDevice(e,t);navigator.mediaDevices.getUserMedia({video:v}).then(d=>{this.mediaStream=d,a.srcObject=d,a.play(),this.activeVideoSettings=d.getVideoTracks()[0].getSettings();const m=s.getDeviceIdFromMediaStreamTrack(d.getVideoTracks()[0]);this.cameraSwitched.next(m),this.detectAvailableDevices().then(()=>{this.activeVideoInputIndex=m?this.availableVideoInputs.findIndex(b=>b.deviceId===m):-1,this.videoInitialized=!0}).catch(()=>{this.activeVideoInputIndex=-1,this.videoInitialized=!0})}).catch(d=>{this.initError.next({message:d.message,mediaStreamError:d})})}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}getActiveVideoTrack(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}isMirrorImage(){if(!this.getActiveVideoTrack())return!1;{let e="auto";switch(this.mirrorImage&&("string"==typeof this.mirrorImage?e=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(e=this.mirrorImage.x.toLowerCase())),e){case"always":return!0;case"never":return!1}}return s.isUserFacing(this.getActiveVideoTrack())}stopMediaTracks(){this.mediaStream&&this.mediaStream.getTracks&&(this.nativeVideoElement.pause(),this.mediaStream.getTracks().forEach(e=>e.stop()))}unsubscribeFromSubscriptions(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}detectAvailableDevices(){return new Promise((e,t)=>{_.getAvailableVideoInputs().then(a=>{this.availableVideoInputs=a,e(a)}).catch(a=>{this.availableVideoInputs=[],t(a)})})}}return s.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},s.DEFAULT_IMAGE_TYPE="image/jpeg",s.DEFAULT_IMAGE_QUALITY=.92,s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=i.Xpm({type:s,selectors:[["webcam"]],viewQuery:function(e,t){if(1&e&&(i.Gf(n,7),i.Gf(p,7)),2&e){let a;i.iGM(a=i.CRH())&&(t.video=a.first),i.iGM(a=i.CRH())&&(t.canvas=a.first)}},inputs:{width:"width",height:"height",videoOptions:"videoOptions",allowCameraSwitch:"allowCameraSwitch",mirrorImage:"mirrorImage",captureImageData:"captureImageData",imageType:"imageType",imageQuality:"imageQuality",trigger:"trigger",switchCamera:"switchCamera"},outputs:{imageCapture:"imageCapture",initError:"initError",imageClick:"imageClick",cameraSwitched:"cameraSwitched"},decls:6,vars:7,consts:[[1,"webcam-wrapper",3,"click"],["autoplay","","muted","","playsinline","",3,"width","height","resize"],["video",""],["class","camera-switch",3,"click",4,"ngIf"],[3,"width","height"],["canvas",""],[1,"camera-switch",3,"click"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.NdJ("click",function(){return t.imageClick.next()}),i.TgZ(1,"video",1,2),i.NdJ("resize",function(){return t.videoResize()}),i.qZA(),i.YNc(3,f,1,0,"div",3),i._UZ(4,"canvas",4,5),i.qZA()),2&e&&(i.xp6(1),i.Tol(t.videoStyleClasses),i.Q6J("width",t.videoWidth)("height",t.videoHeight),i.xp6(2),i.Q6J("ngIf",t.allowCameraSwitch&&t.availableVideoInputs.length>1&&t.videoInitialized),i.xp6(1),i.Q6J("width",t.width)("height",t.height))},dependencies:[o.O5],styles:[".webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;line-height:0}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scaleX(-1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:#0000001a;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s ease}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:#0000002e}"]}),s})(),u=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=i.oAB({type:s}),s.\u0275inj=i.cJS({imports:[[o.ez]]}),s})()},1913:(D,C,g)=>{g.d(C,{h:()=>p,l:()=>f});var i=g(6814),o=g(5678),n=g(2076);let p=(()=>{class l{el;renderer;zone;constructor(r,c,u){this.el=r,this.renderer=c,this.zone=u}selector;set enterClass(r){this._enterClass=r,console.warn("enterClass is deprecated, use enterFromClass instead")}get enterClass(){return this._enterClass}enterFromClass;enterActiveClass;enterToClass;set leaveClass(r){this._leaveClass=r,console.warn("leaveClass is deprecated, use leaveFromClass instead")}get leaveClass(){return this._leaveClass}leaveFromClass;leaveActiveClass;leaveToClass;hideOnOutsideClick;toggleClass;hideOnEscape;eventListener;documentClickListener;documentKeydownListener;target;enterListener;leaveListener;animating;_enterClass;_leaveClass;clickListener(){this.target=this.resolveTarget(),this.toggleClass?this.toggle():null===this.target.offsetParent?this.enter():this.leave()}toggle(){n.p.hasClass(this.target,this.toggleClass)?n.p.removeClass(this.target,this.toggleClass):n.p.addClass(this.target,this.toggleClass)}enter(){this.enterActiveClass?this.animating||(this.animating=!0,"slidedown"===this.enterActiveClass&&(this.target.style.height="0px",n.p.removeClass(this.target,"hidden"),this.target.style.maxHeight=this.target.scrollHeight+"px",n.p.addClass(this.target,"hidden"),this.target.style.height=""),n.p.addClass(this.target,this.enterActiveClass),(this.enterClass||this.enterFromClass)&&n.p.removeClass(this.target,this.enterClass||this.enterFromClass),this.enterListener=this.renderer.listen(this.target,"animationend",()=>{n.p.removeClass(this.target,this.enterActiveClass),this.enterToClass&&n.p.addClass(this.target,this.enterToClass),this.enterListener&&this.enterListener(),"slidedown"===this.enterActiveClass&&(this.target.style.maxHeight=""),this.animating=!1})):((this.enterClass||this.enterFromClass)&&n.p.removeClass(this.target,this.enterClass||this.enterFromClass),this.enterToClass&&n.p.addClass(this.target,this.enterToClass)),this.hideOnOutsideClick&&this.bindDocumentClickListener(),this.hideOnEscape&&this.bindDocumentKeydownListener()}leave(){this.leaveActiveClass?this.animating||(this.animating=!0,n.p.addClass(this.target,this.leaveActiveClass),(this.leaveClass||this.leaveFromClass)&&n.p.removeClass(this.target,this.leaveClass||this.leaveFromClass),this.leaveListener=this.renderer.listen(this.target,"animationend",()=>{n.p.removeClass(this.target,this.leaveActiveClass),this.leaveToClass&&n.p.addClass(this.target,this.leaveToClass),this.leaveListener&&this.leaveListener(),this.animating=!1})):((this.leaveClass||this.leaveFromClass)&&n.p.removeClass(this.target,this.leaveClass||this.leaveFromClass),this.leaveToClass&&n.p.addClass(this.target,this.leaveToClass)),this.hideOnOutsideClick&&this.unbindDocumentClickListener(),this.hideOnEscape&&this.unbindDocumentKeydownListener()}resolveTarget(){if(this.target)return this.target;switch(this.selector){case"@next":return this.el.nativeElement.nextElementSibling;case"@prev":return this.el.nativeElement.previousElementSibling;case"@parent":return this.el.nativeElement.parentElement;case"@grandparent":return this.el.nativeElement.parentElement.parentElement;default:return document.querySelector(this.selector)}}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"click",r=>{this.isVisible()&&"static"!==getComputedStyle(this.target).getPropertyValue("position")?this.isOutsideClick(r)&&this.leave():this.unbindDocumentClickListener()}))}bindDocumentKeydownListener(){this.documentKeydownListener||this.zone.runOutsideAngular(()=>{this.documentKeydownListener=this.renderer.listen(this.el.nativeElement.ownerDocument,"keydown",r=>{const{key:c,keyCode:u,which:A}=r;(!this.isVisible()||"static"===getComputedStyle(this.target).getPropertyValue("position"))&&this.unbindDocumentKeydownListener(),this.isVisible()&&"Escape"===c&&27===u&&27===A&&this.leave()})})}isVisible(){return null!==this.target.offsetParent}isOutsideClick(r){return!this.el.nativeElement.isSameNode(r.target)&&!this.el.nativeElement.contains(r.target)&&!this.target.contains(r.target)}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}unbindDocumentKeydownListener(){this.documentKeydownListener&&(this.documentKeydownListener(),this.documentKeydownListener=null)}ngOnDestroy(){this.target=null,this.eventListener&&this.eventListener(),this.unbindDocumentClickListener(),this.unbindDocumentKeydownListener()}static \u0275fac=function(c){return new(c||l)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(o.R0b))};static \u0275dir=o.lG2({type:l,selectors:[["","pStyleClass",""]],hostAttrs:[1,"p-element"],hostBindings:function(c,u){1&c&&o.NdJ("click",function(w){return u.clickListener(w)})},inputs:{selector:["pStyleClass","selector"],enterClass:"enterClass",enterFromClass:"enterFromClass",enterActiveClass:"enterActiveClass",enterToClass:"enterToClass",leaveClass:"leaveClass",leaveFromClass:"leaveFromClass",leaveActiveClass:"leaveActiveClass",leaveToClass:"leaveToClass",hideOnOutsideClick:"hideOnOutsideClick",toggleClass:"toggleClass",hideOnEscape:"hideOnEscape"}})}return l})(),f=(()=>{class l{static \u0275fac=function(c){return new(c||l)};static \u0275mod=o.oAB({type:l});static \u0275inj=o.cJS({imports:[i.ez]})}return l})()}}]);