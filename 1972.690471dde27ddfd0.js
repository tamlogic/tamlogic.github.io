"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[1972],{91972:(Ue,g,m)=>{m.r(g),m.d(g,{ImeiModule:()=>we});var r=m(69808),s=m(93075),c=m(98952),S=m(88205),h=m(40845),f=m(25787),b=m(17773),Z=m(44534),D=m(98018),x=m(31424),k=m(73407),C=m(14036),R=m(49603),I=m(7010),T=m(15315),A=m(2338),_=m(59783),d=m(44930),e=m(5e3),v=m(62162),N=m(84451),M=m(373),w=m(50330),q=m(70085),U=m(10930),y=m(74297),J=m(27232);function Y(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.deleteSelectedImeis())}),e.qZA()}}function E(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"button",20),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.openNew())}),e.qZA(),e.YNc(2,Y,1,0,"button",21),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.selectedImeis&&t.selectedImeis.length>0)}}function Q(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",23)(1,"h5",24),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",25),e._UZ(5,"i",26),e.TgZ(6,"input",27),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.getParams.searchText=n)})("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.getImeis())}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,"label.imei_management")," "),e.xp6(4),e.Q6J("ngModel",t.getParams.searchText)}}function j(i,o){1&i&&(e.TgZ(0,"tr")(1,"th",28)(2,"div",29),e._uU(3),e.ALo(4,"translate"),e._UZ(5,"p-sortIcon",30),e.qZA()(),e.TgZ(6,"th")(7,"div",31),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"th",32)(11,"div",33),e._uU(12),e.ALo(13,"translate"),e._UZ(14,"p-sortIcon",34),e.qZA()(),e.TgZ(15,"th",35)(16,"div",29),e._uU(17),e.ALo(18,"translate"),e._UZ(19,"p-sortIcon",36),e.qZA()(),e.TgZ(20,"th",37)(21,"div",29),e._uU(22),e.ALo(23,"translate"),e._UZ(24,"p-sortIcon",38),e.qZA()(),e.TgZ(25,"th",39)(26,"div",40),e._uU(27),e.ALo(28,"translate"),e._UZ(29,"p-sortIcon",41),e.qZA()(),e.TgZ(30,"th",42)(31,"div",33),e._uU(32),e.ALo(33,"translate"),e._UZ(34,"p-sortIcon",43),e.qZA()(),e.TgZ(35,"th",44)(36,"div",33),e._uU(37),e.ALo(38,"translate"),e._UZ(39,"p-sortIcon",45),e.qZA()()()),2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,8,"label.imei_name")," "),e.xp6(5),e.hij(" ",e.lcZ(9,10,"label.image")," "),e.xp6(4),e.hij(" ",e.lcZ(13,12,"label.model_name")," "),e.xp6(5),e.hij(" ",e.lcZ(18,14,"label.model_number")," "),e.xp6(5),e.hij(" ",e.lcZ(23,16,"label.serial_number")," "),e.xp6(5),e.hij(" ",e.lcZ(28,18,"label.color")," "),e.xp6(5),e.hij(" ",e.lcZ(33,20,"label.capacity")," "),e.xp6(5),e.hij(" ",e.lcZ(38,22,"label.carrier_lock")," "))}function O(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr",46),e.NdJ("click",function(){const a=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.editImei(a))}),e.TgZ(1,"td",47)(2,"span",48),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._uU(5),e.qZA(),e.TgZ(6,"td",49),e._UZ(7,"img",50),e.qZA(),e.TgZ(8,"td",47)(9,"span",48),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._uU(12),e.qZA(),e.TgZ(13,"td",47)(14,"span",48),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._uU(17),e.qZA(),e.TgZ(18,"td",47)(19,"span",48),e._uU(20),e.ALo(21,"translate"),e.qZA(),e._uU(22),e.qZA(),e.TgZ(23,"td",51)(24,"span",48),e._uU(25),e.ALo(26,"translate"),e.qZA(),e._UZ(27,"div",52),e.qZA(),e.TgZ(28,"td",51)(29,"span",48),e._uU(30),e.ALo(31,"translate"),e.qZA(),e._uU(32),e.qZA(),e.TgZ(33,"td",47)(34,"span",48),e._uU(35),e.ALo(36,"translate"),e.qZA(),e._UZ(37,"p-badge",53),e.qZA()()}if(2&i){const t=o.$implicit,l=e.oxw();e.Q6J("pContextMenuRow",t),e.xp6(3),e.Oqu(e.lcZ(4,18,"label.imei_name")),e.xp6(2),e.hij(" ",t.imeiName," "),e.xp6(2),e.Q6J("src",l.getModelNameImage(t.modelName),e.LSH),e.xp6(3),e.Oqu(e.lcZ(11,20,"label.model_name")),e.xp6(2),e.hij(" ",l.getModelName(t.modelName)," "),e.xp6(3),e.Oqu(e.lcZ(16,22,"label.model_number")),e.xp6(2),e.hij(" ",t.modelNumber," "),e.xp6(3),e.Oqu(e.lcZ(21,24,"label.serial_number")),e.xp6(2),e.hij(" ",t.serialNumber," "),e.xp6(3),e.Oqu(e.lcZ(26,26,"label.color")),e.xp6(2),e.Udp("background-color",l.getImeiColor(t.color)),e.xp6(3),e.Oqu(e.lcZ(31,28,"label.capacity")),e.xp6(2),e.hij(" ",l.getImeiCapacity(t.capacity)," "),e.xp6(3),e.Oqu(e.lcZ(36,30,"label.carrier_lock")),e.xp6(2),e.Q6J("value",t.carrierLock)("severity",t.carrierLock?"success":"info")}}function H(i,o){1&i&&(e.TgZ(0,"small",73),e._uU(1,"imei code is required."),e.qZA())}function F(i,o){if(1&i&&(e.TgZ(0,"div",75),e._UZ(1,"img",76),e.TgZ(2,"div"),e._uU(3),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.image,e.LSH),e.xp6(2),e.Oqu(t.label)}}function K(i,o){if(1&i&&e.YNc(0,F,4,2,"div",74),2&i){const t=e.oxw(2);e.Q6J("ngIf",t.imei.modelName)}}function P(i,o){if(1&i&&(e.TgZ(0,"div",75),e._UZ(1,"img",76),e.TgZ(2,"div"),e._uU(3),e.qZA()()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("src",t.image,e.LSH),e.xp6(2),e.Oqu(t.label)}}function $(i,o){1&i&&(e.TgZ(0,"small",73),e._uU(1,"Model name is required."),e.qZA())}function G(i,o){1&i&&(e.TgZ(0,"small",73),e._uU(1,"Model number is required."),e.qZA())}function B(i,o){1&i&&(e.TgZ(0,"small",73),e._uU(1,"Serial number is required."),e.qZA())}function z(i,o){if(1&i&&(e.TgZ(0,"div",75),e._UZ(1,"div",52),e.TgZ(2,"div"),e._uU(3),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Udp("background-color",t.color),e.xp6(2),e.Oqu(t.label)}}function V(i,o){if(1&i&&e.YNc(0,z,4,3,"div",74),2&i){const t=e.oxw(2);e.Q6J("ngIf",t.imei.color)}}function X(i,o){if(1&i&&(e.TgZ(0,"div",75),e._UZ(1,"div",52),e.TgZ(2,"div"),e._uU(3),e.qZA()()),2&i){const t=o.$implicit;e.xp6(1),e.Udp("background-color",t.color),e.xp6(2),e.Oqu(t.label)}}function W(i,o){1&i&&(e.TgZ(0,"small",73),e._uU(1,"Color is required."),e.qZA())}function ee(i,o){if(1&i&&(e.TgZ(0,"div",75)(1,"div"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.label)}}function te(i,o){if(1&i&&e.YNc(0,ee,3,1,"div",74),2&i){const t=e.oxw(2);e.Q6J("ngIf",t.imei.capacity)}}function ie(i,o){if(1&i&&(e.TgZ(0,"div",75)(1,"div"),e._uU(2),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.label)}}function ne(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",77)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div")(5,"button",78),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onAddInsurances())}),e.qZA()()()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,2,"label.insurance_management")," "),e.xp6(3),e.Q6J("label","Add"))}function le(i,o){1&i&&(e.TgZ(0,"tr")(1,"th",79),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"th",79),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th",80),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th",81),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"th",80),e.qZA()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,4,"label.insurance_code")," "),e.xp6(3),e.hij(" ",e.lcZ(6,6,"label.insurance_name")," "),e.xp6(3),e.hij(" ",e.lcZ(9,8,"label.month")," "),e.xp6(3),e.hij(" ",e.lcZ(12,10,"label.description")," "))}function oe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"input",90),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw().$implicit;return e.KtG(a.insuranceCode=n)}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("ngModel",t.insuranceCode)}}function ae(i,o){if(1&i&&e._uU(0),2&i){const t=e.oxw().$implicit;e.hij(" ",t.insuranceCode," ")}}function me(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"input",90),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw().$implicit;return e.KtG(a.insuranceName=n)}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("ngModel",t.insuranceName)}}function ce(i,o){if(1&i&&e._uU(0),2&i){const t=e.oxw().$implicit;e.hij(" ",t.insuranceName," ")}}function se(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"p-inputNumber",91),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw().$implicit;return e.KtG(a.month=n)}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("ngModel",t.month)}}function pe(i,o){if(1&i&&e._uU(0),2&i){const t=e.oxw().$implicit;e.hij(" ",t.month," ")}}function re(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"input",90),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw().$implicit;return e.KtG(a.description=n)}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("ngModel",t.description)}}function _e(i,o){if(1&i&&e._uU(0),2&i){const t=e.oxw().$implicit;e.hij(" ",t.description," ")}}function de(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",92),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.onRowEditInit(n))}),e.qZA()}}function ue(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",93),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.onRowEditSave(n))}),e.qZA()}}function ge(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",94),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),a=n.$implicit,p=n.rowIndex,qe=e.oxw(2);return e.KtG(qe.onRowEditCancel(a,p))}),e.qZA()}}function he(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr",82)(1,"td")(2,"p-cellEditor"),e.YNc(3,oe,1,1,"ng-template",83),e.YNc(4,ae,1,1,"ng-template",84),e.qZA()(),e.TgZ(5,"td")(6,"p-cellEditor"),e.YNc(7,me,1,1,"ng-template",83),e.YNc(8,ce,1,1,"ng-template",84),e.qZA()(),e.TgZ(9,"td")(10,"p-cellEditor"),e.YNc(11,se,1,1,"ng-template",83),e.YNc(12,pe,1,1,"ng-template",84),e.qZA()(),e.TgZ(13,"td")(14,"p-cellEditor"),e.YNc(15,re,1,1,"ng-template",83),e.YNc(16,_e,1,1,"ng-template",84),e.qZA()(),e.TgZ(17,"td")(18,"div",85),e.YNc(19,de,1,0,"button",86),e.YNc(20,ue,1,0,"button",87),e.YNc(21,ge,1,0,"button",88),e.TgZ(22,"button",89),e.NdJ("click",function(){const a=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.deleteBillDetail(a))}),e.qZA()()()()}if(2&i){const l=o.editing;e.Q6J("pEditableRow",o.$implicit),e.xp6(19),e.Q6J("ngIf",!l),e.xp6(1),e.Q6J("ngIf",l),e.xp6(1),e.Q6J("ngIf",l)}}const u=function(i){return{"ng-invalid ng-dirty":i}},fe=function(){return{"margin-bottom":"2em"}};function be(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",54)(2,"label",55),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",56),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.imei.imeiName=n)}),e.qZA(),e.YNc(6,H,2,0,"small",57),e.qZA(),e.TgZ(7,"div",54)(8,"label",58),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"p-dropdown",59),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.imei.modelName=n)}),e.YNc(12,K,1,1,"ng-template",60),e.YNc(13,P,4,2,"ng-template",61),e.qZA(),e.YNc(14,$,2,0,"small",57),e.qZA(),e.TgZ(15,"div",54)(16,"label",62),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"input",63),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.imei.modelNumber=n)}),e.qZA(),e.YNc(20,G,2,0,"small",57),e.qZA(),e.TgZ(21,"div",54)(22,"label",64),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"input",65),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.imei.serialNumber=n)}),e.qZA(),e.YNc(26,B,2,0,"small",57),e.qZA(),e.TgZ(27,"div",54)(28,"label",66),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"p-dropdown",59),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.imei.color=n)}),e.YNc(32,V,1,1,"ng-template",60),e.YNc(33,X,4,3,"ng-template",61),e.qZA(),e.YNc(34,W,2,0,"small",57),e.qZA(),e.TgZ(35,"div",67)(36,"label",68),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"p-inputSwitch",69),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.imei.carrierLock=n)}),e.qZA()(),e.TgZ(40,"div",70)(41,"label",71),e._uU(42),e.ALo(43,"translate"),e.qZA(),e.TgZ(44,"p-dropdown",59),e.NdJ("ngModelChange",function(n){e.CHM(t);const a=e.oxw();return e.KtG(a.imei.capacity=n)}),e.YNc(45,te,1,1,"ng-template",60),e.YNc(46,ie,3,1,"ng-template",61),e.qZA()(),e.TgZ(47,"p-card",3),e.YNc(48,ne,6,4,"ng-template",10),e.TgZ(49,"p-table",72),e.YNc(50,le,14,12,"ng-template",10),e.YNc(51,he,23,4,"ng-template",11),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,43,"label.imei_name")),e.xp6(2),e.Q6J("ngModel",t.imei.imeiName)("ngClass",e.VKq(57,u,t.submitted&&!t.imei.imeiName)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.imei.imeiName),e.xp6(3),e.Oqu(e.lcZ(10,45,"label.model_name")),e.xp6(2),e.Q6J("options",t.modelNames)("ngModel",t.imei.modelName)("optionLabel","label")("optionValue","code")("filter",!0)("showClear",!0)("appendTo","body"),e.xp6(3),e.Q6J("ngIf",t.submitted&&!t.imei.modelName),e.xp6(3),e.Oqu(e.lcZ(18,47,"label.model_number")),e.xp6(2),e.Q6J("ngModel",t.imei.modelNumber)("ngClass",e.VKq(59,u,t.submitted&&!t.imei.modelNumber)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.imei.modelNumber),e.xp6(3),e.Oqu(e.lcZ(24,49,"label.serial_number")),e.xp6(2),e.Q6J("ngModel",t.imei.serialNumber)("ngClass",e.VKq(61,u,t.submitted&&!t.imei.serialNumber)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.imei.serialNumber),e.xp6(3),e.Oqu(e.lcZ(30,51,"label.color")),e.xp6(2),e.Q6J("options",t.imeiColors)("ngModel",t.imei.color)("optionLabel","label")("optionValue","code")("filter",!0)("showClear",!0)("appendTo","body"),e.xp6(3),e.Q6J("ngIf",t.submitted&&!t.imei.color),e.xp6(3),e.Oqu(e.lcZ(38,53,"label.carrier_lock")),e.xp6(2),e.Q6J("ngModel",t.imei.carrierLock),e.xp6(3),e.Oqu(e.lcZ(43,55,"label.capacity")),e.xp6(2),e.Q6J("options",t.imeiCapacities)("ngModel",t.imei.capacity)("optionLabel","label")("optionValue","code")("filter",!0)("showClear",!0)("appendTo","body"),e.xp6(3),e.Akn(e.DdM(63,fe)),e.xp6(2),e.Q6J("value",t.insurances)}}function Ze(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",95),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.hideDialog())}),e.qZA(),e.TgZ(1,"button",96),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.saveImei())}),e.qZA()}}function xe(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1,"Are you sure you want to delete "),e.TgZ(2,"b"),e._uU(3),e.qZA(),e._uU(4,"?"),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(t.imei.imeiName)}}function Ce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",97),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteImeiDialog=!1)}),e.qZA(),e.TgZ(1,"button",98),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.confirmDelete())}),e.qZA()}}function Ie(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",97),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteImeisDialog=!1)}),e.qZA(),e.TgZ(1,"button",98),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.confirmDeleteSelected())}),e.qZA()}}const Te=function(){return["imeiName","imeiName","phone","email","address"]},Ae=function(){return[5,10,20]},ve=function(){return{width:"100rem"}},L=function(){return{width:"450px"}};let Ne=(()=>{class i{constructor(t,l,n,a){this.imeiService=t,this.billService=l,this.accessoryService=n,this.messageService=a,this.appUtil=d.Z,this.imeiDialog=!1,this.deleteImeiDialog=!1,this.deleteImeisDialog=!1,this.imeis=[],this.insurances=[],this.imei={},this.selectedImeis=[],this.selectedImei={},this.submitted=!1,this.cols=[],this.items=[],this.rowsPerPageOptions=[5,10,20],this.modelNames=this.appUtil.getModelNames(),this.imeiColors=this.appUtil.getImeiColor(),this.imeiCapacities=this.appUtil.getImeiCapacities(),this.loading=!1,this.getParams={page:0,pageSize:5,sortField:"id",isSort:!0,searchText:""},this.lstImeis=[],this.totalRecords=0,this.totalPages=0,this.first=0,this.bills=[],this.accessories=[],this.clonedProducts={}}ngOnInit(){this.getListBill(),this.getListAccessory(),this.cols=[{field:"imeiName",header:"Imei name"},{field:"modelName",header:"Model name"},{field:"modelNumber",header:"Model number"},{field:"serialNumber",header:"Serial number"},{field:"capacity",header:"Capacity"},{field:"carrierLock",header:"Carrier lock"}],this.items=[{label:"View",icon:"pi pi-fw pi-search",command:()=>{this.editImei(this.selectedImei)}},{label:"Delete",icon:"pi pi-fw pi-times",command:()=>{this.deleteImei(this.selectedImei)}}]}getImeis(t,l=!1){this.pendingRequest&&this.pendingRequest.unsubscribe(),this.loading=!0,t&&(console.log(t),this.getParams.page=t.first/t.rows,this.getParams.pageSize=t.rows+1,this.getParams.sortField=t.sortField,this.getParams.isSort=1===t.sortOrder),l&&this.imeiService.getExcelReport(this.getParams).subscribe(n=>{d.Z.scrollToTop(),this.openDownloadFile(n.data,"excel")}),Object.keys(this.getParams).forEach(n=>null==this.getParams[n]&&delete this.getParams[n]),this.pendingRequest=this.imeiService.getPagingImei(this.getParams).subscribe(n=>{d.Z.scrollToTop(),this.lstImeis=n.data,this.totalRecords=n.totalItems||0,this.totalPages=n.totalItems/n.pageSize,console.log(this.lstImeis),this.loading=!1})}getModelName(t){const l=this.modelNames.find(n=>n.code===t);return l?l.label:""}getModelNameImage(t){const l=this.modelNames.find(n=>n.code===t);return l?l.image:""}getImeiColor(t){const l=this.imeiColors.find(n=>n.code===t);return l?l.color:""}getImeiCapacity(t){const l=this.imeiCapacities.find(n=>n.code===t);return l?l.label:""}openDownloadFile(t,l){try{const n=this.imeiService.getFolderPathDownload(t,l);n&&window.open(n)}catch(n){this.messageService.add({severity:"error",summary:"Error Message",detail:"File invalid"})}}openNew(){this.imei={},this.insurances=[],this.submitted=!1,this.imeiDialog=!0}deleteSelectedImeis(){this.deleteImeisDialog=!0}editImei(t){this.imei=Object.assign({},t),this.insurances=this.imei.insurances||[],this.imeiDialog=!0}deleteImei(t){this.deleteImeiDialog=!0,this.imei=Object.assign({},t)}confirmDeleteSelected(){this.imeiService.deleteMultipleImei(this.selectedImeis.map(t=>t.id)).subscribe(()=>{this.deleteImeisDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Imei Deleted",life:3e3}),this.selectedImeis=[],this.getImeis()})}confirmDelete(){this.imeiService.deleteImei(this.imei.id).subscribe(t=>{this.deleteImeiDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Imei Deleted",life:3e3}),this.imei={},this.getImeis()})}hideDialog(){this.imeiDialog=!1,this.submitted=!1,this.imei={},this.getImeis()}saveImei(){this.submitted=!0,this.insurances.forEach(t=>{t.billId=t.bilL_ID||t.billId,t.imeiId=t.imeI_ID||t.imeiId,t.accessoryId=t.accessorY_ID||t.accessoryId}),this.imei.insurances=this.insurances,this.imei.id?this.imeiService.updateImei(this.cleanObject(this.imei),this.imei.id).subscribe(t=>{this.messageService.add({severity:"success",summary:"Successful",detail:"Imei Updated",life:3e3}),this.hideDialog()}):(this.imei.id=0,this.imeiService.createImei(this.cleanObject(this.imei)).subscribe(t=>{this.messageService.add({severity:"success",summary:"Successful",detail:"Imei Created",life:3e3}),this.hideDialog()}))}getListBill(){this.billService.getAllBills().subscribe(t=>{this.bills=t.data})}getListAccessory(){this.accessoryService.getAllAccessor().subscribe(t=>{this.accessories=t.data})}onAddInsurances(){var t;this.insurances.push({bilL_ID:0,billId:0,imeI_ID:(null===(t=this.imei)||void 0===t?void 0:t.id)||0,imeiId:0,accessorY_ID:0,accessoryId:0,insuranceCode:"BH-"+this.appUtil.createId(7),insuranceName:"",month:0,isGeneral:!1,description:""})}onRowEditInit(t){this.clonedProducts[t.id]=Object.assign({},t)}onRowEditSave(t){delete this.clonedProducts[t.id]}onRowEditCancel(t,l){this.accessories[l]=this.clonedProducts[t.id],delete this.clonedProducts[t.id]}deleteBillDetail(t){this.insurances=this.insurances.filter(l=>l!==t)}cleanObject(t){return Object.assign({},t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(v.s),e.Y36(N.C),e.Y36(M.r),e.Y36(_.ez))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e._Bn([_.ez])],decls:28,vars:36,consts:[[3,"model"],["cm",""],[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","first","lazy","totalRecords","selection","contextMenu","contextMenuSelection","rowHover","firstChange","onLazyLoad","selectionChange","contextMenuSelectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"p-fluid",3,"visible","header","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","label","Delete","icon","pi pi-trash","class","p-button-danger",3,"click",4,"ngIf"],["pButton","","pRipple","","label","Delete","icon","pi pi-trash",1,"p-button-danger",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",1,"w-full","sm:w-auto",3,"ngModel","ngModelChange","change"],["pSortableColumn","imeiName"],[1,"flex","align-items-center","w-9rem"],["field","imeiName"],[1,"text-center","w-9rem"],["pSortableColumn","modelName"],[1,"flex","align-items-center","w-8rem"],["field","modelName"],["pSortableColumn","modelNumber"],["field","modelNumber"],["pSortableColumn","serialNumber"],["field","serialNumber"],["pSortableColumn","color"],[1,"flex","align-items-center","w-6rem"],["field","color"],["pSortableColumn","capacity"],["field","capacity"],["pSortableColumn","carrierLock"],["field","carrierLock"],[1,"cursor-pointer",3,"pContextMenuRow","click"],[1,"w-2"],[1,"p-column-title"],[1,"w-2","text-center"],["width","60","height","60",3,"src"],[1,"w-1"],[1,"imei-color"],[3,"value","severity"],[1,"field","col-12","sm:col-6"],["for","imeiName"],["type","text","pInputText","","id","imeiName","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","modelName"],["filterBy","label",3,"options","ngModel","optionLabel","optionValue","filter","showClear","appendTo","ngModelChange"],["pTemplate","selectedItem"],["pTemplate","item"],["for","modelNumber"],["type","text","pInputText","","id","modelNumber","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["for","serialNumber"],["type","text","pInputText","","id","serialNumber","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["for","color"],[1,"field","col-12","sm:col-6","flex","flex-column"],["for","carrierLock"],[1,"pt-2",3,"ngModel","ngModelChange"],[1,"field","col-12"],["for","capacity"],["dataKey","id","editMode","row",3,"value"],[1,"ng-dirty","ng-invalid"],["class","flex align-items-center gap-2",4,"ngIf"],[1,"flex","align-items-center","gap-2"],["width","30","height","20",3,"src"],[1,"flex","justify-content-between","px-4","pt-4"],["pButton","","pRipple","","icon","pi pi-plus",3,"label","click"],[2,"width","20%"],[2,"width","15%"],[2,"width","30%"],[3,"pEditableRow"],["pTemplate","input"],["pTemplate","output"],[1,"flex","align-items-center","justify-content-center","gap-2"],["pButton","","pRipple","","icon","pi pi-pencil","class","p-button-rounded p-button-warning","pInitEditableRow","",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check","class","p-button-rounded p-button-text p-button-success mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times","class","p-button-rounded p-button-text p-button-danger",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"],["pInputText","","type","text","required","",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["pButton","","pRipple","","icon","pi pi-pencil","pInitEditableRow","",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check",1,"p-button-rounded","p-button-text","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times",1,"p-button-rounded","p-button-text","p-button-danger",3,"click"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",3,"click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",3,"click"]],template:function(t,l){if(1&t&&(e._UZ(0,"p-contextMenu",0,1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"p-toast"),e.TgZ(6,"p-toolbar",5),e.YNc(7,E,3,1,"ng-template",6),e.qZA(),e.TgZ(8,"p-table",7,8),e.NdJ("firstChange",function(a){return l.first=a})("onLazyLoad",function(a){return l.getImeis(a)})("selectionChange",function(a){return l.selectedImeis=a})("contextMenuSelectionChange",function(a){return l.selectedImei=a}),e.YNc(10,Q,7,4,"ng-template",9),e.YNc(11,j,40,24,"ng-template",10),e.YNc(12,O,38,32,"ng-template",11),e.qZA()(),e.TgZ(13,"p-dialog",12),e.NdJ("visibleChange",function(a){return l.imeiDialog=a}),e.ALo(14,"translate"),e.YNc(15,be,52,64,"ng-template",13),e.YNc(16,Ze,2,0,"ng-template",14),e.qZA(),e.TgZ(17,"p-dialog",15),e.NdJ("visibleChange",function(a){return l.deleteImeiDialog=a}),e.TgZ(18,"div",16),e._UZ(19,"i",17),e.YNc(20,xe,5,1,"span",18),e.qZA(),e.YNc(21,Ce,2,0,"ng-template",14),e.qZA(),e.TgZ(22,"p-dialog",15),e.NdJ("visibleChange",function(a){return l.deleteImeisDialog=a}),e.TgZ(23,"div",16),e._UZ(24,"i",17),e.TgZ(25,"span"),e._uU(26,"Are you sure you want to delete selected imeis?"),e.qZA()(),e.YNc(27,Ie,2,0,"ng-template",14),e.qZA()()()),2&t){const n=e.MAs(1);e.Q6J("model",l.items),e.xp6(8),e.Q6J("value",l.lstImeis)("columns",l.cols)("rows",10)("globalFilterFields",e.DdM(31,Te))("paginator",!0)("rowsPerPageOptions",e.DdM(32,Ae))("showCurrentPageReport",!0)("first",l.first)("lazy",!0)("totalRecords",l.totalRecords)("selection",l.selectedImeis)("contextMenu",n)("contextMenuSelection",l.selectedImei)("rowHover",!0),e.xp6(5),e.Akn(e.DdM(33,ve)),e.Q6J("visible",l.imeiDialog)("header",e.lcZ(14,29,l.appUtil.isEmpty(l.imei)?"label.imei_add":"label.imei_edit"))("modal",!0),e.xp6(4),e.Akn(e.DdM(34,L)),e.Q6J("visible",l.deleteImeiDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",l.imei),e.xp6(2),e.Akn(e.DdM(35,L)),e.Q6J("visible",l.deleteImeisDialog)("modal",!0)}},dependencies:[w.xV,r.mk,r.O5,c.iA,_.jx,c.lQ,c.zi,c.YL,c.fz,c.D$,c.Pv,c.U1,c.wT,h.Hq,s.Fj,s.JJ,s.Q7,s.On,f.H,b.FN,Z.o,x.o,C.Lt,I.Rn,T.V,q.Ct,U.Ql,y.Z,J.X$],encapsulation:2}),i})(),Me=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[A.Bz.forChild([{path:"",component:Ne}]),A.Bz]}),i})(),we=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[v.s,N.C,M.r],imports:[w.vI,J.aw,r.ez,Me,c.U$,S.O,s.u5,h.hJ,f.T,b.EV,Z.V,D.Xt,x.j,k.A,C.kW,R.cc,I.L$,T.S,q.TX,U.Iu,y.d]}),i})()}}]);