"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[2303],{2303:(L,Z,o)=>{o.r(Z),o.d(Z,{AccountModule:()=>$});var g=o(6814),e=o(6223),C=o(9241),A=o(5219),y=o(8645),T=o(9773),x=o(4716),b=o(5118),_=o(819),t=o(8109),v=o(3714),r=o(6218),p=o(707),s=o(4480),c=o(3965),u=o(5399),f=o(3999);function N(i,m){1&i&&(t.ynx(0),t.TgZ(1,"small",23),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"WARNING.PARENT_ACCOUNT_REQUIRED")))}function U(i,m){1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"WARNING.ACCOUNT_NUMBER_INVALID")," "))}function D(i,m){1&i&&(t._uU(0),t.ALo(1,"translate")),2&i&&t.hij(" ",t.lcZ(1,1,"WARNING.ACCOUNT_NUMBER_REQUIRED")," ")}function O(i,m){if(1&i&&(t.ynx(0),t.TgZ(1,"small",23),t.YNc(2,U,3,3,"ng-container",24)(3,D,2,3,"ng-template",null,25,t.W1O),t.qZA(),t.BQk()),2&i){const a=t.MAs(4),l=t.oxw();t.xp6(2),t.Q6J("ngIf",l.form.get("soHieu").hasError("pattern"))("ngIfElse",a)}}function R(i,m){1&i&&(t.ynx(0),t.TgZ(1,"small",23),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"WARNING.ACCOUNT_TYPE_REQUIRED")," "))}function B(i,m){1&i&&(t.ynx(0),t.TgZ(1,"small",23),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"WARNING.DISPLAY_ORDER_REQUIRED")," "))}function S(i,m){1&i&&(t.ynx(0),t.TgZ(1,"small",23),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"WARNING.ACCOUNT_NAME_REQUIRED")," "))}let k=(()=>{class i{constructor(a,l,n,d){this.fb=a,this.dialogRef=l,this.baseService$=n,this.translateService=d,this.config=(0,t.f3M)(b.S),this.submitted=!1,this.unsubscribe=new y.x,this.parentAccountOptions=[],this._baseData=this.config.data,this.form=this.fb.group({PARENT_ID:new e.NI(0,[e.kI.required]),soHieu:new e.NI("",[e.kI.required,e.kI.pattern(u.Z.PATTERNS.NO_SPACE_AND_UNICODE_UTF8)]),loai:new e.NI(void 0,[e.kI.required]),displayOrder:new e.NI(void 0,[e.kI.required]),tenTaiKhoan:new e.NI("",[e.kI.required])})}ngOnInit(){["edit","info"].includes(this._baseData.mode)&&this.form.patchValue({PARENT_ID:this._baseData.data.accountDetail.PARENT_ID,soHieu:this._baseData.data.accountDetail.soHieu,loai:this._baseData.data.accountDetail.loai,displayOrder:this._baseData.data.accountDetail.displayOrder,tenTaiKhoan:this._baseData.data.accountDetail.tenTaiKhoan}),this.parentAccountOptions=[{label:this.translateService.instant("LABEL.ORIGIN_ACCOUNT"),value:0}].concat(this._baseData.data.listAccount?.map(a=>({label:a.tenTaiKhoan,value:a.PARENT_ID})))}onClickSearchBtn(){}onSubmit(){this.submitted=!0,!this.form.invalid&&("add"===this._baseData.mode?this.baseService$.add(this.form.value):this.baseService$.edit(this.form.value,this._baseData.data.accountDetail.id)).pipe((0,T.R)(this.unsubscribe)).subscribe({next:a=>{a&&this.dialogRef.close({isSuccess:!0})}})}static#t=this.\u0275fac=function(l){return new(l||i)(t.Y36(e.qu),t.Y36(b.E7),t.Y36(_.B),t.Y36(f.sK))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-account-form"]],standalone:!0,features:[t.jDz],decls:40,vars:48,consts:[[3,"formGroup"],[1,"p-fluid","p-formgrid","grid","m-0"],[1,"p-float-label","field","col-10"],["id","drpAccountcha","formControlName","PARENT_ID","appendTo","body",3,"options"],["for","drpAccountcha",1,"require-label"],[4,"ngIf"],[1,"p-float-label","field","flex","justify-content-end","col-2"],["icon","pi pi-search",1,"pl-2",3,"onClick"],[1,"p-float-label","field","col-4","pr-1"],["pInputText","","id","soHieu","formControlName","soHieu","type","text"],["for","soHieu",1,"require-label"],[1,"p-float-label","field","col-4"],["pInputText","","id","loai","type","number","formControlName","loai"],["for","loai",1,"require-label"],[1,"p-float-label","field","col-4","pl-1"],["pInputText","","id","displayOrder","type","number","formControlName","displayOrder"],["for","displayOrder",1,"require-label"],[1,"p-float-label","field","col-12","pl-1"],["inputId","name","rows","3","cols","30","formControlName","tenTaiKhoan","pInputTextarea",""],["for","name"],[1,"flex","justify-content-end","gap-2"],["pButton","","pRipple","","type","button",1,"p-button-outlined",3,"label","click"],["pButton","","pRipple","","type","button",3,"label","click"],[1,"p-error"],[4,"ngIf","ngIfElse"],["empty",""]],template:function(l,n){1&l&&(t.TgZ(0,"form",0)(1,"div",1)(2,"span",2),t._UZ(3,"p-dropdown",3),t.TgZ(4,"label",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.YNc(7,N,4,3,"ng-container",5),t.qZA(),t.TgZ(8,"span",6)(9,"p-button",7),t.NdJ("onClick",function(){return n.onClickSearchBtn()}),t.qZA()(),t.TgZ(10,"div",8),t._UZ(11,"input",9),t.TgZ(12,"label",10),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.YNc(15,O,5,2,"ng-container",5),t.qZA(),t.TgZ(16,"div",11),t._UZ(17,"input",12),t.TgZ(18,"label",13),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.YNc(21,R,4,3,"ng-container",5),t.qZA(),t.TgZ(22,"div",14),t._UZ(23,"input",15),t.TgZ(24,"label",16),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.YNc(27,B,4,3,"ng-container",5),t.qZA(),t.TgZ(28,"div",17),t._UZ(29,"textarea",18),t.TgZ(30,"label",19),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.YNc(33,S,4,3,"ng-container",5),t.qZA()(),t._UZ(34,"hr"),t.TgZ(35,"div",20)(36,"button",21),t.NdJ("click",function(){return n.dialogRef.close()}),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"button",22),t.NdJ("click",function(){return n.onSubmit()}),t.ALo(39,"translate"),t.qZA()()()),2&l&&(t.Q6J("formGroup",n.form),t.xp6(3),t.ekj("ng-invalid",n.submitted&&n.form.get("PARENT_ID").invalid)("ng-dirty",n.submitted&&n.form.get("PARENT_ID").invalid),t.Q6J("options",n.parentAccountOptions),t.xp6(2),t.Oqu(t.lcZ(6,34,"LABEL.PARENT_ACCOUNT")),t.xp6(2),t.Q6J("ngIf",n.submitted&&n.form.get("PARENT_ID").invalid),t.xp6(4),t.ekj("ng-invalid",n.submitted&&n.form.get("soHieu").invalid)("ng-dirty",n.submitted&&n.form.get("soHieu").invalid),t.xp6(2),t.Oqu(t.lcZ(14,36,"LABEL.ACCOUNT_NUMBER")),t.xp6(2),t.Q6J("ngIf",n.submitted&&n.form.get("soHieu").invalid),t.xp6(2),t.ekj("ng-invalid",n.submitted&&n.form.get("loai").invalid)("ng-dirty",n.submitted&&n.form.get("loai").invalid),t.xp6(2),t.Oqu(t.lcZ(20,38,"LABEL.ACCOUNT_TYPE")),t.xp6(2),t.Q6J("ngIf",n.submitted&&n.form.get("loai").invalid),t.xp6(2),t.ekj("ng-invalid",n.submitted&&n.form.get("displayOrder").invalid)("ng-dirty",n.submitted&&n.form.get("displayOrder").invalid),t.xp6(2),t.Oqu(t.lcZ(26,40,"LABEL.DISPLAY_ORDER")),t.xp6(2),t.Q6J("ngIf",n.submitted&&n.form.get("displayOrder").invalid),t.xp6(2),t.ekj("ng-invalid",n.submitted&&n.form.get("tenTaiKhoan").invalid)("ng-dirty",n.submitted&&n.form.get("tenTaiKhoan").invalid),t.xp6(2),t.Oqu(t.lcZ(32,42,"LABEL.ACCOUNT_NAME")),t.xp6(2),t.Q6J("ngIf",n.submitted&&n.form.get("tenTaiKhoan").invalid),t.xp6(3),t.Q6J("label",t.lcZ(37,44,"BUTTON.CANCEL")),t.xp6(2),t.Q6J("label",t.lcZ(39,46,"BUTTON.SAVE")))},dependencies:[v.j,v.o,r.A,r.g,p.hJ,p.Hq,p.zx,e.u5,e._Y,e.Fj,e.wV,e.JJ,e.JL,e.UX,e.sg,e.u,s.T,s.H,g.O5,c.kW,c.Lt,f.aw,f.X$],encapsulation:2})}return i})();var P=o(3859),E=o(9552),I=o(3904);function M(i,m){if(1&i){const a=t.EpF();t.TgZ(0,"div",7)(1,"div",8)(2,"span",9),t._UZ(3,"i",10),t.TgZ(4,"input",11),t.NdJ("keyup.enter",function(){t.CHM(a);const n=t.oxw();return t.KtG(n.initData())}),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"h2",12),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"button",13),t.NdJ("click",function(){t.CHM(a);const n=t.oxw();return t.KtG(n.onManage("add","LABEL.ADD"))}),t.qZA()()}2&i&&(t.xp6(4),t.Q6J("placeholder",t.lcZ(5,2,"LABEL.SEARCH_TEXT")),t.xp6(3),t.Oqu(t.lcZ(8,4,"LABEL.ACCOUNT_LIST")))}function J(i,m){1&i&&(t.TgZ(0,"tr")(1,"th",14),t._uU(2,"ID"),t.qZA(),t.TgZ(3,"th",15),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",15),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",16),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th",17),t._uU(13),t.ALo(14,"translate"),t.qZA()()),2&i&&(t.xp6(4),t.hij(" ",t.lcZ(5,4,"LABEL.SIGNAL_NUMBER")," "),t.xp6(3),t.hij(" ",t.lcZ(8,6,"LABEL.TYPE")," "),t.xp6(3),t.hij(" ",t.lcZ(11,8,"LABEL.ACCOUNT_NAME")," "),t.xp6(3),t.hij(" ",t.lcZ(14,10,"LABEL.ACTION")," "))}function q(i,m){if(1&i){const a=t.EpF();t.TgZ(0,"tr")(1,"td",18),t._uU(2),t.qZA(),t.TgZ(3,"td",15),t._uU(4),t.qZA(),t.TgZ(5,"td",15),t._uU(6),t.qZA(),t.TgZ(7,"td",16),t._uU(8),t.qZA(),t.TgZ(9,"td",19)(10,"div",20)(11,"button",21),t.NdJ("click",function(){const d=t.CHM(a).$implicit,h=t.oxw();return t.KtG(h.onManage("edit","LABEL.EDIT",d))}),t.qZA(),t.TgZ(12,"button",22),t.NdJ("click",function(){const d=t.CHM(a).$implicit,h=t.oxw();return t.KtG(h.onDelete(d))}),t.qZA()()()()}if(2&i){const a=m.$implicit;t.xp6(2),t.hij(" ",a.id," "),t.xp6(2),t.hij(" ",null==a?null:a.soHieu," "),t.xp6(2),t.Oqu(null==a?null:a.loai),t.xp6(2),t.Oqu(null==a?null:a.tenTaiKhoan)}}let j=(()=>{class i{constructor(a,l,n,d,h){this.baseService$=a,this.confirmationService=l,this.translateService=n,this.dialogService=d,this.layoutService$=h,this.isMobile=!1,this.data=[],this.unsubscribe=new y.x}ngOnInit(){this.isMobile=this.layoutService$.isMobile(),this.initData()}initData(){this.layoutService$.globalLoading.next(!0),this.baseService$.list().pipe((0,T.R)(this.unsubscribe),(0,x.x)(()=>{this.layoutService$.globalLoading.next(!1)})).subscribe(a=>{this.data=a})}onManage(a,l,n){this.dialogService.open(k,{data:{mode:a,data:{listAccount:this.data,accountDetail:n}},header:this.translateService.instant(l),width:"50vw",maximizable:!0}).onClose.subscribe(h=>{h?.isSuccess&&this.initData()})}onDelete(a){this.confirmationService.confirm({message:this.translateService.instant("INFO.ARE_YOUR_SURE_DELETE_RECORD"),header:this.translateService.instant("LABEL.CONFIRM"),icon:"pi pi-exclamation-triangle",acceptLabel:this.translateService.instant("BUTTON.ACCEPT"),rejectLabel:this.translateService.instant("BUTTON.CANCEL"),accept:()=>this.doDelete(a)})}doDelete(a){this.baseService$.delete(a.id).pipe((0,T.R)(this.unsubscribe)).subscribe({next:l=>{l&&this.initData()}})}ngOnDestroy(){this.unsubscribe.next({}),this.unsubscribe.complete()}static#t=this.\u0275fac=function(l){return new(l||i)(t.Y36(_.B),t.Y36(A.YP),t.Y36(f.sK),t.Y36(b.xA),t.Y36(P.P))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],features:[t._Bn([A.ez,A.YP,_.B,b.xA])],decls:8,vars:3,consts:[[1,"grid"],[1,"col-12","p-0"],[1,"card"],[3,"value","scrollable","responsiveLayout"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","justify-content-between"],[1,"flex","align-items-center","gap-4"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text",1,"w-full",3,"placeholder","keyup.enter"],[1,"m-0"],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button-rounded","p-button-success",3,"click"],["pFrozenColumn","",2,"width","50px"],[2,"width","200px"],[2,"width","auto"],["pFrozenColumn","","alignFrozen","right",2,"width","100px"],["pFrozenColumn","",1,"font-bold",2,"width","50px"],["pFrozenColumn","","alignFrozen","right",1,"font-bold",2,"width","100px"],[1,"flex","gap-2"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"]],template:function(l,n){1&l&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-table",3),t.YNc(4,M,10,6,"ng-template",4)(5,J,15,12,"ng-template",5)(6,q,13,4,"ng-template",6),t.qZA()()()(),t._UZ(7,"p-confirmDialog")),2&l&&(t.xp6(3),t.Q6J("value",n.data)("scrollable",!0)("responsiveLayout",n.isMobile?"stack":"scroll"))},dependencies:[E.iA,A.jx,E.on,p.Hq,v.o,s.H,I.Q,f.X$],encapsulation:2})}return i})(),F=(()=>{class i{static#t=this.\u0275fac=function(l){return new(l||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[C.Bz.forChild([{path:"",component:j}]),C.Bz]})}return i})();var Q=o(6804),Y=o(4055),w=o(6651),H=o(4104),K=o(7902),z=o(6022);let $=(()=>{class i{static#t=this.\u0275fac=function(l){return new(l||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[g.ez,F,e.u5,E.U$,z.Xt,p.hJ,K.JH,v.j,Q.KZ,s.T,Y.q4,c.kW,w.q,H.EV,I.D,f.aw]})}return i})()},6651:(L,Z,o)=>{o.d(Z,{k:()=>t,q:()=>v});var g=o(6814),e=o(8109),C=o(5219);function A(r,p){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const s=e.oxw(2);e.Udp("display",null!=s.value&&0!==s.value?"flex":"none"),e.uIk("data-pc-section","label"),e.xp6(1),e.AsE("",s.value,"",s.unit,"")}}function y(r,p){1&r&&e.GkF(0)}const T=r=>({$implicit:r});function x(r,p){if(1&r&&(e.TgZ(0,"div",3)(1,"div",4),e.YNc(2,A,2,5,"div",5)(3,y,1,0,"ng-container",6),e.qZA()()),2&r){const s=e.oxw();e.Udp("width",s.value+"%")("background",s.color),e.uIk("data-pc-section","value"),e.xp6(2),e.Q6J("ngIf",s.showValue&&!s.contentTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",s.contentTemplate)("ngTemplateOutletContext",e.VKq(8,T,s.value))}}function b(r,p){if(1&r&&(e.TgZ(0,"div",7),e._UZ(1,"div",8),e.qZA()),2&r){const s=e.oxw();e.uIk("data-pc-section","container"),e.xp6(1),e.Udp("background",s.color),e.uIk("data-pc-section","value")}}const _=(r,p)=>({"p-progressbar p-component":!0,"p-progressbar-determinate":r,"p-progressbar-indeterminate":p});let t=(()=>{class r{value;showValue=!0;styleClass;style;unit="%";mode="determinate";color;templates;contentTemplate;ngAfterContentInit(){this.templates?.forEach(s=>{s.getType(),this.contentTemplate=s.template})}static \u0275fac=function(c){return new(c||r)};static \u0275cmp=e.Xpm({type:r,selectors:[["p-progressBar"]],contentQueries:function(c,u,f){if(1&c&&e.Suo(f,C.jx,4),2&c){let N;e.iGM(N=e.CRH())&&(u.templates=N)}},hostAttrs:[1,"p-element"],inputs:{value:"value",showValue:"showValue",styleClass:"styleClass",style:"style",unit:"unit",mode:"mode",color:"color"},decls:3,vars:14,consts:[["role","progressbar",3,"ngStyle","ngClass"],["class","p-progressbar-value p-progressbar-value-animate","style","display:flex",3,"width","background",4,"ngIf"],["class","p-progressbar-indeterminate-container",4,"ngIf"],[1,"p-progressbar-value","p-progressbar-value-animate",2,"display","flex"],[1,"p-progressbar-label"],[3,"display",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-progressbar-indeterminate-container"],[1,"p-progressbar-value","p-progressbar-value-animate"]],template:function(c,u){1&c&&(e.TgZ(0,"div",0),e.YNc(1,x,4,10,"div",1)(2,b,2,4,"div",2),e.qZA()),2&c&&(e.Tol(u.styleClass),e.Q6J("ngStyle",u.style)("ngClass",e.WLB(11,_,"determinate"===u.mode,"indeterminate"===u.mode)),e.uIk("aria-valuemin",0)("aria-valuenow",u.value)("aria-valuemax",100)("data-pc-name","progressbar")("data-pc-section","root"),e.xp6(1),e.Q6J("ngIf","determinate"===u.mode),e.xp6(1),e.Q6J("ngIf","indeterminate"===u.mode))},dependencies:[g.mk,g.O5,g.tP,g.PC],styles:['@layer primeng{.p-progressbar{position:relative;overflow:hidden}.p-progressbar-determinate .p-progressbar-value{height:100%;width:0%;position:absolute;display:none;border:0 none;display:flex;align-items:center;justify-content:center;overflow:hidden}.p-progressbar-determinate .p-progressbar-label{display:inline-flex}.p-progressbar-determinate .p-progressbar-value-animate{transition:width 1s ease-in-out}.p-progressbar-indeterminate .p-progressbar-value:before{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim 2.1s cubic-bezier(.65,.815,.735,.395) infinite}.p-progressbar-indeterminate .p-progressbar-value:after{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;animation-delay:1.15s}}@keyframes p-progressbar-indeterminate-anim{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@keyframes p-progressbar-indeterminate-anim-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}\n'],encapsulation:2,changeDetection:0})}return r})(),v=(()=>{class r{static \u0275fac=function(c){return new(c||r)};static \u0275mod=e.oAB({type:r});static \u0275inj=e.cJS({imports:[g.ez]})}return r})()}}]);