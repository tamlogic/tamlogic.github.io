"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[345],{98345:(P,x,i)=>{i.r(x),i.d(x,{AccessoryModule:()=>se});var a=i(69808),h=i(93075),u=i(98952),T=i(88205),C=i(40845),p=i(25787),y=i(17773),l=i(44534),d=i(98018),f=i(31424),g=i(73407),U=i(14036),w=i(49603),F=i(7010),v=i(15315),Z=i(51122),M=i(44930),R=i(94327),e=i(5e3),_=i(54004),E=i(92340),J=i(81637),I=i(40520);let m=`${J.Z.DEFAULT_URLS.API}/Accessories`,S=(()=>{class n{constructor(t){this.http=t}getPagingAccessory(t){return this.http.get(`${m}`,{params:t}).pipe((0,_.U)(o=>o))}getAllAccessor(){return this.http.get(`${m}/list`,{}).pipe((0,_.U)(t=>t))}getAccessoryDetail(t){return this.http.get(`${m}/${t}`,{}).pipe((0,_.U)(s=>s))}createAccessory(t){return this.http.post(`${m}`,t).pipe((0,_.U)(s=>s))}updateAccessory(t,o){return console.log(t),this.http.put(`${m}/${o}`,t).pipe((0,_.U)(c=>c))}deleteAccessory(t){return this.http.delete(`${m}/${t}`,{}).pipe((0,_.U)(s=>s))}deleteMultipleAccessory(t){return this.http.put(`${m}/multiple`,t).pipe()}getExcelReport(t){return this.http.get(`${m}/export-excel-customer`,{}).pipe((0,_.U)(s=>s))}getFolderPathDownload(t,o){return E.N.serverURL+`/ReportDownload/DownloadReportFromFile?filename=${t}&fileType=${o}`}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(I.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var D=i(59783);function z(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",18)(1,"button",19),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.openNew())}),e.qZA(),e.TgZ(2,"button",20),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.deleteSelectedAccessories())}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("disabled",!t.selectedAccessories||!t.selectedAccessories.length)}}function H(n,r){if(1&n){const t=e.EpF();e._UZ(0,"p-fileUpload",21),e.TgZ(1,"button",22),e.NdJ("click",function(){e.CHM(t),e.oxw();const s=e.MAs(8);return e.KtG(s.exportCSV())}),e.qZA(),e.TgZ(2,"button",23),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.exportExcel())}),e.qZA(),e.TgZ(3,"button",24),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.exportPdf())}),e.qZA(),e.TgZ(4,"button",25),e.NdJ("click",function(){e.CHM(t),e.oxw();const s=e.MAs(8);return e.KtG(s.exportCSV({selectionOnly:!0}))}),e.qZA()}2&n&&e.Q6J("maxFileSize",1e6)}function B(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",26)(1,"h5",27),e._uU(2,"Accessory management"),e.qZA(),e.TgZ(3,"span",28),e._UZ(4,"i",29),e.TgZ(5,"input",30),e.NdJ("ngModelChange",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.getParams.searchText=s)})("change",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.getAccessories())}),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.getParams.searchText)}}function k(n,r){1&n&&(e.TgZ(0,"tr")(1,"th",31),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",32),e._uU(4,"Accessory name"),e._UZ(5,"p-sortIcon",33),e.qZA(),e.TgZ(6,"th",34),e._uU(7,"Sale Price"),e._UZ(8,"p-sortIcon",35),e.qZA(),e.TgZ(9,"th",36),e._uU(10,"Description "),e.qZA(),e._UZ(11,"th",37),e.qZA())}function q(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",38),e.qZA(),e.TgZ(3,"td",39)(4,"span",40),e._uU(5,"Accessory name"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"td",41)(8,"span",40),e._uU(9,"Sale Price"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"td",41)(12,"span",40),e._uU(13,"Description"),e.qZA(),e._uU(14),e.qZA(),e.TgZ(15,"td",37)(16,"div",42)(17,"button",43),e.NdJ("click",function(){const c=e.CHM(t).$implicit,A=e.oxw();return e.KtG(A.editAccessory(c))}),e.qZA(),e.TgZ(18,"button",44),e.NdJ("click",function(){const c=e.CHM(t).$implicit,A=e.oxw();return e.KtG(A.deleteAccessory(c))}),e.qZA()()()()}if(2&n){const t=r.$implicit;e.xp6(2),e.Q6J("value",t),e.xp6(4),e.hij(" ",t.accessoryName," "),e.xp6(4),e.hij(" ",t.salePrice," "),e.xp6(4),e.hij(" ",t.description," ")}}function K(n,r){1&n&&(e.TgZ(0,"small",53),e._uU(1,"Accessory name is required."),e.qZA())}function O(n,r){1&n&&(e.TgZ(0,"small",53),e._uU(1,"Sale Price is required."),e.qZA())}function G(n,r){1&n&&(e.TgZ(0,"small",53),e._uU(1,"Address is required."),e.qZA())}const b=function(n){return{"ng-invalid ng-dirty":n}};function Y(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",45)(1,"label",46),e._uU(2,"Accessory name"),e.qZA(),e.TgZ(3,"input",47),e.NdJ("ngModelChange",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.accessory.accessoryName=s)}),e.qZA(),e.YNc(4,K,2,0,"small",48),e.qZA(),e.TgZ(5,"div",45)(6,"label",49),e._uU(7,"Sale Price"),e.qZA(),e.TgZ(8,"input",50),e.NdJ("ngModelChange",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.accessory.salePrice=s)}),e.qZA(),e.YNc(9,O,2,0,"small",48),e.qZA(),e.TgZ(10,"div",45)(11,"label",51),e._uU(12,"Description"),e.qZA(),e.TgZ(13,"input",52),e.NdJ("ngModelChange",function(s){e.CHM(t);const c=e.oxw();return e.KtG(c.accessory.description=s)}),e.qZA(),e.YNc(14,G,2,0,"small",48),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.accessory.accessoryName)("ngClass",e.VKq(9,b,t.submitted&&!t.accessory.accessoryName)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.accessory.accessoryName),e.xp6(4),e.Q6J("ngModel",t.accessory.salePrice)("ngClass",e.VKq(11,b,t.submitted&&!t.accessory.salePrice)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.accessory.salePrice),e.xp6(4),e.Q6J("ngModel",t.accessory.description)("ngClass",e.VKq(13,b,t.submitted&&!t.accessory.description)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.accessory.description)}}function L(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",54),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.hideDialog())}),e.qZA(),e.TgZ(1,"button",55),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.saveAccessory())}),e.qZA()}}function $(n,r){if(1&n&&(e.TgZ(0,"span"),e._uU(1,"Are you sure you want to delete "),e.TgZ(2,"b"),e._uU(3),e.qZA(),e._uU(4,"?"),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Oqu(t.accessory.accessoryName)}}function Q(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.deleteAccessoryDialog=!1)}),e.qZA(),e.TgZ(1,"button",57),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.confirmDelete())}),e.qZA()}}function j(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.deleteAccessoriesDialog=!1)}),e.qZA(),e.TgZ(1,"button",57),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.confirmDeleteSelected())}),e.qZA()}}const V=function(){return["accessoryName","salePrice","description"]},X=function(){return[5,10,20]},W=function(){return{width:"50rem"}},N=function(){return{width:"450px"}};let ee=(()=>{class n{constructor(t,o){this.accessoryService=t,this.messageService=o,this.accessoryDialog=!1,this.deleteAccessoryDialog=!1,this.deleteAccessoriesDialog=!1,this.accessories=[],this.accessory={},this.selectedAccessories=[],this.submitted=!1,this.cols=[],this.rowsPerPageOptions=[5,10,20],this.loading=!1,this.getParams={page:0,pageSize:5,sortField:"id",isSort:!0,searchText:""},this.lstAccessories=[],this.totalRecords=0,this.totalPages=0,this.first=0}ngOnInit(){this.cols=[{field:"accessoryName",header:"Accessory name"},{field:"salePrice",header:"Sale Price"},{field:"description",header:"Description"}]}getAccessories(t,o=!1){this.pendingRequest&&this.pendingRequest.unsubscribe(),this.loading=!0,t&&(console.log(t),this.getParams.page=t.first/t.rows,this.getParams.pageSize=t.rows+1,this.getParams.sortField=t.sortField,this.getParams.isSort=1===t.sortOrder),o&&this.accessoryService.getExcelReport(this.getParams).subscribe(s=>{M.Z.scrollToTop(),this.openDownloadFile(s.data,"excel")}),Object.keys(this.getParams).forEach(s=>null==this.getParams[s]&&delete this.getParams[s]),this.pendingRequest=this.accessoryService.getPagingAccessory(this.getParams).subscribe(s=>{M.Z.scrollToTop(),this.lstAccessories=s.data,this.totalRecords=s.totalItems||0,this.totalPages=s.totalItems/s.pageSize,console.log(this.lstAccessories),this.loading=!1})}openDownloadFile(t,o){try{var s=this.accessoryService.getFolderPathDownload(t,o);s&&window.open(s)}catch(c){this.messageService.add({severity:"error",summary:"Error Message",detail:"File invalid"})}}openNew(){this.accessory={},this.submitted=!1,this.accessoryDialog=!0}deleteSelectedAccessories(){this.deleteAccessoriesDialog=!0}editAccessory(t){this.accessory=Object.assign({},t),this.accessoryDialog=!0}deleteAccessory(t){this.deleteAccessoryDialog=!0,this.accessory=Object.assign({},t)}confirmDeleteSelected(){this.accessoryService.deleteMultipleAccessory(this.selectedAccessories.map(t=>t.id)).subscribe(()=>{this.deleteAccessoriesDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"accessories Deleted",life:3e3}),this.selectedAccessories=[],this.getAccessories()})}confirmDelete(){this.accessoryService.deleteAccessory(this.accessory.id).subscribe(t=>{this.deleteAccessoryDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"accessory Deleted",life:3e3}),this.accessory={},this.getAccessories()})}hideDialog(){this.accessoryDialog=!1,this.submitted=!1,this.accessory={},this.getAccessories()}saveAccessory(){this.submitted=!0,console.log(this.accessory),this.accessory.id?this.accessoryService.updateAccessory(this.accessory,this.accessory.id).subscribe(t=>{console.log(t),this.messageService.add({severity:"success",summary:"Successful",detail:"accessory Updated",life:3e3}),this.hideDialog()}):(this.accessory.id=0,this.accessoryService.createAccessory(this.accessory).subscribe(t=>{console.log(t),this.messageService.add({severity:"success",summary:"Successful",detail:"accessory Created",life:3e3}),this.hideDialog()}))}findIndexById(t){let o=-1;for(let s=0;s<this.accessories.length;s++)if(this.accessories[s].id===t){o=s;break}return o}createId(){let t="";const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let s=0;s<6;s++)t+=o.charAt(Math.floor(Math.random()*o.length));return t}onGlobalFilter(t,o){t.filterGlobal(o.target.value,"contains")}exportPdf(){i.e(583).then(i.bind(i,53583)).then(t=>{Promise.all([i.e(583),i.e(983)]).then(i.t.bind(i,12983,23)).then(o=>{const s=new t.default;s.autoTable(this.cols,this.accessories),s.save("accessory.pdf")})})}exportExcel(){i.e(574).then(i.bind(i,80574)).then(t=>{const s={Sheets:{data:t.utils.json_to_sheet(this.accessories)},SheetNames:["data"]},c=t.write(s,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(c,"accessories")})}saveAsExcelFile(t,o){const A=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});R.saveAs(A,o+"_export_"+(new Date).getTime()+".xlsx")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S),e.Y36(D.ez))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-accessory"]],decls:26,vars:30,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","first","lazy","totalRecords","selection","rowHover","firstChange","onLazyLoad","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Accessory Details",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","label","Delete","icon","pi pi-trash",1,"p-button-danger",3,"disabled","click"],["mode","basic","accept","image/*","label","Import","chooseLabel","Import",1,"mr-2","inline-block",3,"maxFileSize"],["pButton","","pRipple","","label","Export","icon","pi pi-upload",1,"p-button-help","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","XLS","tooltipPosition","bottom",1,"p-button-success","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-pdf","pTooltip","PDF","tooltipPosition","bottom",1,"p-button-warning","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-filter","pTooltip","Selection Only","tooltipPosition","bottom",1,"p-button-info","ml-auto",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",1,"w-full","sm:w-auto",3,"ngModel","ngModelChange","change"],[2,"width","3rem"],["pSortableColumn","accessoryName",1,"w-4"],["field","accessoryName"],["pSortableColumn","salePrice",1,"w-3"],["field","salePrice"],["pSortableColumn","description",1,"w-3"],[1,"w-2"],[3,"value"],[1,"w-4"],[1,"p-column-title"],[1,"w-3"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"click"],[1,"field"],["for","accessoryName"],["type","text","pInputText","","id","accessoryName","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","salePrice"],["type","text","pInputText","","id","salePrice","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["for","description"],["type","text","pInputText","","id","description","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],[1,"ng-dirty","ng-invalid"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",3,"click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"p-toast"),e.TgZ(4,"p-toolbar",3),e.YNc(5,z,3,1,"ng-template",4),e.YNc(6,H,5,1,"ng-template",5),e.qZA(),e.TgZ(7,"p-table",6,7),e.NdJ("firstChange",function(c){return o.first=c})("onLazyLoad",function(c){return o.getAccessories(c)})("selectionChange",function(c){return o.selectedAccessories=c}),e.YNc(9,B,6,1,"ng-template",8),e.YNc(10,k,12,0,"ng-template",9),e.YNc(11,q,19,4,"ng-template",10),e.qZA()(),e.TgZ(12,"p-dialog",11),e.NdJ("visibleChange",function(c){return o.accessoryDialog=c}),e.YNc(13,Y,15,15,"ng-template",12),e.YNc(14,L,2,0,"ng-template",13),e.qZA(),e.TgZ(15,"p-dialog",14),e.NdJ("visibleChange",function(c){return o.deleteAccessoryDialog=c}),e.TgZ(16,"div",15),e._UZ(17,"i",16),e.YNc(18,$,5,1,"span",17),e.qZA(),e.YNc(19,Q,2,0,"ng-template",13),e.qZA(),e.TgZ(20,"p-dialog",14),e.NdJ("visibleChange",function(c){return o.deleteAccessoriesDialog=c}),e.TgZ(21,"div",15),e._UZ(22,"i",16),e.TgZ(23,"span"),e._uU(24,"Are you sure you want to delete selected accessory?"),e.qZA()(),e.YNc(25,j,2,0,"ng-template",13),e.qZA()()()),2&t&&(e.xp6(7),e.Q6J("value",o.lstAccessories)("columns",o.cols)("rows",10)("globalFilterFields",e.DdM(25,V))("paginator",!0)("rowsPerPageOptions",e.DdM(26,X))("showCurrentPageReport",!0)("first",o.first)("lazy",!0)("totalRecords",o.totalRecords)("selection",o.selectedAccessories)("rowHover",!0),e.xp6(5),e.Akn(e.DdM(27,W)),e.Q6J("visible",o.accessoryDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(28,N)),e.Q6J("visible",o.deleteAccessoryDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",o.accessory),e.xp6(2),e.Akn(e.DdM(29,N)),e.Q6J("visible",o.deleteAccessoriesDialog)("modal",!0))},dependencies:[a.mk,a.O5,u.iA,D.jx,u.lQ,u.fz,u.UA,u.Mo,T.p,C.Hq,h.Fj,h.JJ,h.Q7,h.On,p.H,y.FN,l.o,f.o,v.V],encapsulation:2}),n})(),te=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[Z.Bz.forChild([{path:"",component:ee}]),Z.Bz]}),n})(),se=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[S],imports:[a.ez,te,u.U$,T.O,h.u5,C.hJ,p.T,y.EV,l.V,d.Xt,f.j,g.A,U.kW,w.cc,F.L$,v.S]}),n})()},73407:(P,x,i)=>{i.d(x,{A:()=>C,g:()=>T});var a=i(5e3),h=i(69808),u=i(93075);let T=(()=>{class p{constructor(l,d,f,g){this.el=l,this.ngModel=d,this.control=f,this.cd=g,this.onResize=new a.vpe}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(l){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(l){this.autoResize&&this.resize(l)}onBlur(l){this.autoResize&&this.resize(l)}resize(l){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(l||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return p.\u0275fac=function(l){return new(l||p)(a.Y36(a.SBq),a.Y36(u.On,8),a.Y36(u.a5,8),a.Y36(a.sBO))},p.\u0275dir=a.lG2({type:p,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(l,d){1&l&&a.NdJ("input",function(g){return d.onInput(g)})("focus",function(g){return d.onFocus(g)})("blur",function(g){return d.onBlur(g)}),2&l&&a.ekj("p-filled",d.filled)("p-inputtextarea-resizable",d.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),p})(),C=(()=>{class p{}return p.\u0275fac=function(l){return new(l||p)},p.\u0275mod=a.oAB({type:p}),p.\u0275inj=a.cJS({imports:[h.ez]}),p})()}}]);