"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[549],{513:(ie,h,l)=>{l.r(h),l.d(h,{BillModule:()=>oe});var m=l(69808),u=l(93075),p=l(98952),f=l(88205),_=l(40845),y=l(25787),x=l(17773),A=l(44534),S=l(98018),C=l(31424),N=l(73407),P=l(14036),D=l(49603),U=l(7010),T=l(15315),Z=l(51122),b=l(44930),J=l(94327),e=l(5e3),v=l(373),B=l(59783);function w(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"button",19),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.openNew())}),e.qZA(),e.TgZ(2,"button",20),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.deleteSelectedAccessories())}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("disabled",!t.selectedAccessories||!t.selectedAccessories.length)}}function F(i,c){if(1&i){const t=e.EpF();e._UZ(0,"p-fileUpload",21),e.TgZ(1,"button",22),e.NdJ("click",function(){e.CHM(t),e.oxw();const s=e.MAs(8);return e.KtG(s.exportCSV())}),e.qZA(),e.TgZ(2,"button",23),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.exportExcel())}),e.qZA(),e.TgZ(3,"button",24),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.exportPdf())}),e.qZA(),e.TgZ(4,"button",25),e.NdJ("click",function(){e.CHM(t),e.oxw();const s=e.MAs(8);return e.KtG(s.exportCSV({selectionOnly:!0}))}),e.qZA()}2&i&&e.Q6J("maxFileSize",1e6)}function R(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",26)(1,"h5",27),e._uU(2,"Bills management"),e.qZA(),e.TgZ(3,"span",28),e._UZ(4,"i",29),e.TgZ(5,"input",30),e.NdJ("ngModelChange",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.getParams.searchText=s)})("change",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.getAccessories())}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.getParams.searchText)}}function k(i,c){1&i&&(e.TgZ(0,"tr")(1,"th",31),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",32),e._uU(4,"Accessory name"),e._UZ(5,"p-sortIcon",33),e.qZA(),e.TgZ(6,"th",34),e._uU(7,"Sale Price"),e._UZ(8,"p-sortIcon",35),e.qZA(),e.TgZ(9,"th",36),e._uU(10,"Description "),e.qZA(),e._UZ(11,"th",37),e.qZA())}function q(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",38),e.qZA(),e.TgZ(3,"td",39)(4,"span",40),e._uU(5,"Accessory name"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"td",41)(8,"span",40),e._uU(9,"Sale Price"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"td",41)(12,"span",40),e._uU(13,"Description"),e.qZA(),e._uU(14),e.qZA(),e.TgZ(15,"td",37)(16,"div",42)(17,"button",43),e.NdJ("click",function(){const n=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.editAccessory(n))}),e.qZA(),e.TgZ(18,"button",44),e.NdJ("click",function(){const n=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.deleteAccessory(n))}),e.qZA()()()()}if(2&i){const t=c.$implicit;e.xp6(2),e.Q6J("value",t),e.xp6(4),e.hij(" ",t.accessoryName," "),e.xp6(4),e.hij(" ",t.salePrice," "),e.xp6(4),e.hij(" ",t.description," ")}}function E(i,c){1&i&&(e.TgZ(0,"small",53),e._uU(1,"Accessory name is required."),e.qZA())}function H(i,c){1&i&&(e.TgZ(0,"small",53),e._uU(1,"Sale Price is required."),e.qZA())}function I(i,c){1&i&&(e.TgZ(0,"small",53),e._uU(1,"Address is required."),e.qZA())}const g=function(i){return{"ng-invalid ng-dirty":i}};function K(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",45)(1,"label",46),e._uU(2,"Accessory name"),e.qZA(),e.TgZ(3,"input",47),e.NdJ("ngModelChange",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.accessory.accessoryName=s)}),e.qZA(),e.YNc(4,E,2,0,"small",48),e.qZA(),e.TgZ(5,"div",45)(6,"label",49),e._uU(7,"Sale Price"),e.qZA(),e.TgZ(8,"input",50),e.NdJ("ngModelChange",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.accessory.salePrice=s)}),e.qZA(),e.YNc(9,H,2,0,"small",48),e.qZA(),e.TgZ(10,"div",45)(11,"label",51),e._uU(12,"Description"),e.qZA(),e.TgZ(13,"input",52),e.NdJ("ngModelChange",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.accessory.description=s)}),e.qZA(),e.YNc(14,I,2,0,"small",48),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.accessory.accessoryName)("ngClass",e.VKq(9,g,t.submitted&&!t.accessory.accessoryName)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.accessory.accessoryName),e.xp6(4),e.Q6J("ngModel",t.accessory.salePrice)("ngClass",e.VKq(11,g,t.submitted&&!t.accessory.salePrice)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.accessory.salePrice),e.xp6(4),e.Q6J("ngModel",t.accessory.description)("ngClass",e.VKq(13,g,t.submitted&&!t.accessory.description)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.accessory.description)}}function G(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",54),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.hideDialog())}),e.qZA(),e.TgZ(1,"button",55),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.saveAccessory())}),e.qZA()}}function Y(i,c){if(1&i&&(e.TgZ(0,"span"),e._uU(1,"Are you sure you want to delete "),e.TgZ(2,"b"),e._uU(3),e.qZA(),e._uU(4,"?"),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(t.accessory.accessoryName)}}function $(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.deleteAccessoryDialog=!1)}),e.qZA(),e.TgZ(1,"button",57),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.confirmDelete())}),e.qZA()}}function z(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.deleteAccessoriesDialog=!1)}),e.qZA(),e.TgZ(1,"button",57),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.confirmDeleteSelected())}),e.qZA()}}const Q=function(){return["customeR_ID","billCode","totalAmount","deliveryStatus","billStatus","description"]},L=function(){return[5,10,20]},O=function(){return{width:"50rem"}},M=function(){return{width:"450px"}};let j=(()=>{class i{constructor(t,o){this.accessoryService=t,this.messageService=o,this.accessoryDialog=!1,this.deleteAccessoryDialog=!1,this.deleteAccessoriesDialog=!1,this.accessories=[],this.accessory={},this.selectedAccessories=[],this.submitted=!1,this.cols=[],this.rowsPerPageOptions=[5,10,20],this.loading=!1,this.getParams={page:0,pageSize:5,sortField:"id",isSort:!0,searchText:""},this.lstAccessories=[],this.totalRecords=0,this.totalPages=0,this.first=0}ngOnInit(){this.cols=[{field:"accessoryName",header:"Accessory name"},{field:"salePrice",header:"Sale Price"},{field:"description",header:"Description"}]}getAccessories(t,o=!1){this.pendingRequest&&this.pendingRequest.unsubscribe(),this.loading=!0,t&&(console.log(t),this.getParams.page=t.first/t.rows,this.getParams.pageSize=t.rows+1,this.getParams.sortField=t.sortField,this.getParams.isSort=1===t.sortOrder),o&&this.accessoryService.getExcelReport(this.getParams).subscribe(s=>{b.Z.scrollToTop(),this.openDownloadFile(s.data,"excel")}),Object.keys(this.getParams).forEach(s=>null==this.getParams[s]&&delete this.getParams[s]),this.pendingRequest=this.accessoryService.getPagingAccessory(this.getParams).subscribe(s=>{b.Z.scrollToTop(),this.lstAccessories=s.data,this.totalRecords=s.totalItems||0,this.totalPages=s.totalItems/s.pageSize,console.log(this.lstAccessories),this.loading=!1})}openDownloadFile(t,o){try{var s=this.accessoryService.getFolderPathDownload(t,o);s&&window.open(s)}catch(n){this.messageService.add({severity:"error",summary:"Error Message",detail:"File invalid"})}}openNew(){this.accessory={},this.submitted=!1,this.accessoryDialog=!0}deleteSelectedAccessories(){this.deleteAccessoriesDialog=!0}editAccessory(t){this.accessory=Object.assign({},t),this.accessoryDialog=!0}deleteAccessory(t){this.deleteAccessoryDialog=!0,this.accessory=Object.assign({},t)}confirmDeleteSelected(){this.accessoryService.deleteMultipleAccessory(this.selectedAccessories.map(t=>t.id)).subscribe(()=>{this.deleteAccessoriesDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"accessories Deleted",life:3e3}),this.selectedAccessories=[],this.getAccessories()})}confirmDelete(){this.accessoryService.deleteAccessory(this.accessory.id).subscribe(t=>{this.deleteAccessoryDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"accessory Deleted",life:3e3}),this.accessory={},this.getAccessories()})}hideDialog(){this.accessoryDialog=!1,this.submitted=!1,this.accessory={},this.getAccessories()}saveAccessory(){this.submitted=!0,console.log(this.accessory),this.accessory.id?this.accessoryService.updateAccessory(this.accessory,this.accessory.id).subscribe(t=>{console.log(t),this.messageService.add({severity:"success",summary:"Successful",detail:"accessory Updated",life:3e3}),this.hideDialog()}):(this.accessory.id=0,this.accessoryService.createAccessory(this.accessory).subscribe(t=>{console.log(t),this.messageService.add({severity:"success",summary:"Successful",detail:"accessory Created",life:3e3}),this.hideDialog()}))}findIndexById(t){let o=-1;for(let s=0;s<this.accessories.length;s++)if(this.accessories[s].id===t){o=s;break}return o}createId(){let t="";const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let s=0;s<6;s++)t+=o.charAt(Math.floor(Math.random()*o.length));return t}onGlobalFilter(t,o){t.filterGlobal(o.target.value,"contains")}exportPdf(){l.e(583).then(l.bind(l,53583)).then(t=>{Promise.all([l.e(583),l.e(983)]).then(l.t.bind(l,12983,23)).then(o=>{const s=new t.default;s.autoTable(this.cols,this.accessories),s.save("accessory.pdf")})})}exportExcel(){l.e(574).then(l.bind(l,80574)).then(t=>{const s={Sheets:{data:t.utils.json_to_sheet(this.accessories)},SheetNames:["data"]},n=t.write(s,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(n,"accessories")})}saveAsExcelFile(t,o){const d=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});J.saveAs(d,o+"_export_"+(new Date).getTime()+".xlsx")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(v.r),e.Y36(B.ez))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-bill"]],decls:26,vars:30,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","first","lazy","totalRecords","selection","rowHover","firstChange","onLazyLoad","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Accessory Details",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","label","Delete","icon","pi pi-trash",1,"p-button-danger",3,"disabled","click"],["mode","basic","accept","image/*","label","Import","chooseLabel","Import",1,"mr-2","inline-block",3,"maxFileSize"],["pButton","","pRipple","","label","Export","icon","pi pi-upload",1,"p-button-help","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","XLS","tooltipPosition","bottom",1,"p-button-success","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-pdf","pTooltip","PDF","tooltipPosition","bottom",1,"p-button-warning","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-filter","pTooltip","Selection Only","tooltipPosition","bottom",1,"p-button-info","ml-auto",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",1,"w-full","sm:w-auto",3,"ngModel","ngModelChange","change"],[2,"width","3rem"],["pSortableColumn","accessoryName",1,"w-4"],["field","accessoryName"],["pSortableColumn","salePrice",1,"w-3"],["field","salePrice"],["pSortableColumn","description",1,"w-3"],[1,"w-2"],[3,"value"],[1,"w-4"],[1,"p-column-title"],[1,"w-3"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"click"],[1,"field"],["for","accessoryName"],["type","text","pInputText","","id","accessoryName","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","salePrice"],["type","text","pInputText","","id","salePrice","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["for","description"],["type","text","pInputText","","id","description","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],[1,"ng-dirty","ng-invalid"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",3,"click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"p-toast"),e.TgZ(4,"p-toolbar",3),e.YNc(5,w,3,1,"ng-template",4),e.YNc(6,F,5,1,"ng-template",5),e.qZA(),e.TgZ(7,"p-table",6,7),e.NdJ("firstChange",function(n){return o.first=n})("onLazyLoad",function(n){return o.getAccessories(n)})("selectionChange",function(n){return o.selectedAccessories=n}),e.YNc(9,R,6,1,"ng-template",8),e.YNc(10,k,12,0,"ng-template",9),e.YNc(11,q,19,4,"ng-template",10),e.qZA()(),e.TgZ(12,"p-dialog",11),e.NdJ("visibleChange",function(n){return o.accessoryDialog=n}),e.YNc(13,K,15,15,"ng-template",12),e.YNc(14,G,2,0,"ng-template",13),e.qZA(),e.TgZ(15,"p-dialog",14),e.NdJ("visibleChange",function(n){return o.deleteAccessoryDialog=n}),e.TgZ(16,"div",15),e._UZ(17,"i",16),e.YNc(18,Y,5,1,"span",17),e.qZA(),e.YNc(19,$,2,0,"ng-template",13),e.qZA(),e.TgZ(20,"p-dialog",14),e.NdJ("visibleChange",function(n){return o.deleteAccessoriesDialog=n}),e.TgZ(21,"div",15),e._UZ(22,"i",16),e.TgZ(23,"span"),e._uU(24,"Are you sure you want to delete selected accessory?"),e.qZA()(),e.YNc(25,z,2,0,"ng-template",13),e.qZA()()()),2&t&&(e.xp6(7),e.Q6J("value",o.lstAccessories)("columns",o.cols)("rows",10)("globalFilterFields",e.DdM(25,Q))("paginator",!0)("rowsPerPageOptions",e.DdM(26,L))("showCurrentPageReport",!0)("first",o.first)("lazy",!0)("totalRecords",o.totalRecords)("selection",o.selectedAccessories)("rowHover",!0),e.xp6(5),e.Akn(e.DdM(27,O)),e.Q6J("visible",o.accessoryDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(28,M)),e.Q6J("visible",o.deleteAccessoryDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",o.accessory),e.xp6(2),e.Akn(e.DdM(29,M)),e.Q6J("visible",o.deleteAccessoriesDialog)("modal",!0))},dependencies:[m.mk,m.O5,p.iA,B.jx,p.lQ,p.fz,p.UA,p.Mo,f.p,_.Hq,u.Fj,u.JJ,u.Q7,u.On,y.H,x.FN,A.o,C.o,T.V],encapsulation:2}),i})(),V=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[Z.Bz.forChild([{path:"",component:j}]),Z.Bz]}),i})();var X=l(21726),a=l(54004),W=l(92340),ee=l(81637),te=l(40520);let r=`${ee.Z.DEFAULT_URLS.API}/Bills`,se=(()=>{class i{constructor(t){this.http=t}getPagingBills(t){return this.http.get(`${r}`,{params:t}).pipe((0,a.U)(o=>o))}getAllBills(){return this.http.get(`${r}/list`,{}).pipe((0,a.U)(t=>t))}getBillDetail(t){return this.http.get(`${r}/${t}`,{}).pipe((0,a.U)(s=>s))}createBill(t){return this.http.post(`${r}`,t).pipe((0,a.U)(s=>s))}updateBill(t,o){return this.http.put(`${r}/${o}`,t).pipe((0,a.U)(n=>n))}deleteBill(t){return this.http.delete(`${r}/${t}`,{}).pipe((0,a.U)(s=>s))}deleteMultipleBill(t){return this.http.put(`${r}/multiple`,t).pipe()}getExcelReport(t){return this.http.get(`${r}/export-excel-customer`,{}).pipe((0,a.U)(s=>s))}getFolderPathDownload(t,o){return W.N.serverURL+`/ReportDownload/DownloadReportFromFile?filename=${t}&fileType=${o}`}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(te.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),oe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[X.v,v.r,se],imports:[m.ez,V,p.U$,f.O,u.u5,_.hJ,y.T,x.EV,A.V,S.Xt,C.j,N.A,P.kW,D.cc,U.L$,T.S]}),i})()}}]);