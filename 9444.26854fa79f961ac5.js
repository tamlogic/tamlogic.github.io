"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[9444],{9444:(E,D,l)=>{l.r(D),l.d(D,{LocalUnitModule:()=>at});var g=l(6814),e=l(6223),v=l(9241),b=l(5219),C=l(8645),h=l(9773),I=l(4716),p=l(5118),m=l(84),t=l(8109),A=l(3714),s=l(6218),f=l(707),r=l(4480),u=l(3999),T=l(5399),U=l(3965),L=l(6760),N=l(8057),Z=l(9552),x=l(8998),y=l(4553);function B(i,_){1&i&&(t.TgZ(0,"tr")(1,"th",15),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th",16),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",17),t._uU(8),t.ALo(9,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,3,"LABEL.ID")," "),t.xp6(3),t.hij(" ",t.lcZ(6,5,"LABEL.LOCAL_UNIT_DETAIL_NAME")," "),t.xp6(3),t.hij(" ",t.lcZ(9,7,"LABEL.ACTION")," "))}function M(i,_){if(1&i){const a=t.EpF();t.TgZ(0,"tr")(1,"td",18),t._uU(2),t.qZA(),t.TgZ(3,"td",16),t._uU(4),t.qZA(),t.TgZ(5,"td",19)(6,"div",20)(7,"button",21),t.NdJ("click",function(){const c=t.CHM(a).$implicit,d=t.oxw();return t.KtG(d.onDelete(c.id))}),t.qZA()()()()}if(2&i){const a=_.$implicit;t.xp6(2),t.hij(" ",a.id," "),t.xp6(2),t.Oqu(a.tenChiTietCum)}}function S(i,_){1&i&&(t.TgZ(0,"tr")(1,"td",22),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"LABEL.DATA_NOT_FOUND")))}const R=()=>["maCum","tenCum"];let J=(()=>{class i{constructor(a,o,n,c,d){this.dialogRef=a,this.baseService$=o,this.translateService=n,this.confirmationService=c,this.localService=d,this.config=(0,t.f3M)(p.S),this.unsubscribe=new C.x,this.loading=[!1,!1,!1,!1],this.data=[],this._baseData=this.config.data}ngOnInit(){this.initData()}initData(){this.baseService$.localUnitDetailSearchText(this.searchText?.trim()||"",this._baseData.data.CUM_ID).pipe((0,h.R)(this.unsubscribe)).subscribe(a=>{this.data=a})}addNew(){this.baseService$.addLocalUnitDetail({CUM_ID:this._baseData.data.CUM_ID,tenChiTietCum:this.unitLocalDetailName}).pipe((0,h.R)(this.unsubscribe)).subscribe(o=>{this.initData(),this.unitLocalDetailName=""})}onClickSearchBtn(){this.initData()}onClickAddBtn(){this.addNew()}onDelete(a){this.confirmationService.confirm({message:this.translateService.instant("INFO.ARE_YOUR_SURE_DELETE_RECORD"),header:this.translateService.instant("LABEL.CONFIRM"),icon:"pi pi-exclamation-triangle",acceptLabel:this.translateService.instant("BUTTON.ACCEPT"),rejectLabel:this.translateService.instant("BUTTON.CANCEL"),accept:()=>this.doDelete(a)})}doDelete(a){this.baseService$.deleteLocalUnitDetail(a).pipe((0,h.R)(this.unsubscribe)).subscribe({next:o=>{o&&this.initData()}})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(p.E7),t.Y36(x.u),t.Y36(u.sK),t.Y36(b.YP),t.Y36(y.C))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-local-unit-detail"]],standalone:!0,features:[t.jDz],decls:23,vars:17,consts:[[1,"p-fluid","p-formgrid","grid","m-0"],[1,"p-float-label","field","flex","col-12"],["pInputText","","id","search","type","text",3,"ngModel","ngModelChange"],["for","name"],["icon","pi pi-search",1,"pl-2",3,"loading","onClick"],["pInputText","","id","name","type","text",3,"ngModel","ngModelChange"],["icon","pi pi-plus",1,"pl-2",3,"loading","onClick"],[1,"p-float-label","field","col-12"],[3,"value","scrollable","globalFilterFields"],["localUnitDetailTable",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"flex","justify-content-end","gap-2"],["pButton","","pRipple","","type","button",1,"p-button-outlined",3,"label","click"],["pFrozenColumn","",2,"width","50px"],[2,"width","auto"],["pFrozenColumn","","alignFrozen","right",2,"width","100px"],["pFrozenColumn","",1,"font-bold",2,"width","50px"],["pFrozenColumn","","alignFrozen","right",1,"font-bold",2,"width","100px"],[1,"flex","justify-content-center","gap-2"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"],["colspan","3"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"input",2),t.NdJ("ngModelChange",function(d){return n.searchText=d}),t.qZA(),t.TgZ(3,"label",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"p-button",4),t.NdJ("onClick",function(){return n.onClickSearchBtn()}),t.qZA()(),t.TgZ(7,"div",1)(8,"input",5),t.NdJ("ngModelChange",function(d){return n.unitLocalDetailName=d}),t.qZA(),t.TgZ(9,"label",3),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"p-button",6),t.NdJ("onClick",function(){return n.onClickAddBtn()}),t.qZA()(),t.TgZ(13,"div",7)(14,"p-table",8,9),t.YNc(16,B,10,9,"ng-template",10)(17,M,8,2,"ng-template",11)(18,S,4,3,"ng-template",12),t.qZA()()(),t._UZ(19,"hr"),t.TgZ(20,"div",13)(21,"button",14),t.NdJ("click",function(){return n.dialogRef.close()}),t.ALo(22,"translate"),t.qZA()()),2&o&&(t.xp6(2),t.Q6J("ngModel",n.searchText),t.xp6(2),t.Oqu(t.lcZ(5,10,"LABEL.TYPE_STRING")),t.xp6(2),t.Q6J("loading",n.loading[0]),t.xp6(2),t.Q6J("ngModel",n.unitLocalDetailName),t.xp6(2),t.Oqu(t.lcZ(11,12,"LABEL.UNIT_LOCAL_DETAIL_NAME")),t.xp6(2),t.Q6J("loading",n.loading[0]),t.xp6(2),t.Q6J("value",n.data)("scrollable",!0)("globalFilterFields",t.DdM(16,R)),t.xp6(7),t.Q6J("label",t.lcZ(22,14,"BUTTON.CANCEL")))},dependencies:[A.j,A.o,s.A,f.hJ,f.Hq,f.zx,b.jx,e.u5,e.Fj,e.JJ,e.On,e.UX,r.T,r.H,U.kW,L._8,N.nD,Z.U$,Z.iA,Z.on,u.aw,u.X$],styles:["[_nghost-%COMP%]     .p-datatable-scrollable>.p-datatable-wrapper{max-height:18rem!important}"]})}return i})();function P(i,_){1&i&&(t.ynx(0),t.TgZ(1,"small",31),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"WARNING.LOCAL_UNIT_CODE_REQUIRED")," "))}function q(i,_){1&i&&(t.ynx(0),t.TgZ(1,"small",31),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"WARNING.LOCAL_UNIT_NAME_REQUIRED")," "))}function F(i,_){1&i&&(t.ynx(0),t.TgZ(1,"small",31),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"WARNING.INGREDIENT_NAME_REQUIRED")))}function k(i,_){1&i&&(t.ynx(0),t.TgZ(1,"small",31),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"WARNING.LOCAL_NAME_REQUIRED")))}function G(i,_){1&i&&(t.ynx(0),t.TgZ(1,"small",31),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"WARNING.DATE_TL_REQUIRED")))}let w=(()=>{class i{constructor(a,o,n,c,d,it,ot){this.fb=a,this.dialogRef=o,this.baseService$=n,this.dialogService=c,this.translateService=d,this.ingredientService=it,this.localService=ot,this.config=(0,t.f3M)(p.S),this.submitted=!1,this.unsubscribe=new C.x,this.ingredients=[],this.locals=[],this._baseData=this.config.data,this.form=this.fb.group({maCum:new e.NI("",[e.kI.required,e.kI.pattern(T.Z.PATTERNS.NO_SPACE_AND_UNICODE_UTF8)]),tenCum:new e.NI("",[e.kI.required]),THANHPHAN_ID:new e.NI("",[e.kI.required]),DIAPHUONG_ID:new e.NI("",[e.kI.required]),nguoiDaiDien:new e.NI(""),dienThoai:new e.NI(""),diaChiCum:new e.NI(""),isGt:new e.NI(!0),ngayThanhLap:new e.NI(new Date,[e.kI.required]),ngayGiaiTan:new e.NI(new Date)})}ngOnInit(){this.getIngredientList(),this.getlocalList(),this.localService.list(),["edit","info"].includes(this._baseData.mode)&&this.form.patchValue({maCum:this._baseData.data.maCum,tenCum:this._baseData.data.tenCum,nguoiDaiDien:this._baseData.data.nguoiDaiDien,THANHPHAN_ID:this._baseData.data.THANHPHAN_ID,DIAPHUONG_ID:this._baseData.data.DIAPHUONG_ID,dienThoai:this._baseData.data.dienThoai,diaChiCum:this._baseData.data.diaChiCum,ngayThanhLap:new Date(this._baseData.data.ngayThanhLap),ngayGiaiTan:new Date(this._baseData.data.ngayGiaiTan),isGt:!!this._baseData.data.ngayGiaiTan})}getIngredientList(){this.ingredientService.list().pipe((0,h.R)(this.unsubscribe)).subscribe(a=>{this.ingredients=a.map(o=>({label:o.tenThanhPhan,value:o.id})),"add"===this._baseData.mode&&(console.log("add"),this.form.patchValue({THANHPHAN_ID:a[0].id}))})}getlocalList(){this.localService.list().pipe((0,h.R)(this.unsubscribe)).subscribe(a=>{this.locals=a.map(o=>({label:o.tenDiaPhuong,value:o.id})),console.log("thanhphan: ",this.locals),"add"===this._baseData.mode&&this.form.patchValue({DIAPHUONG_ID:a[0].id})})}onClickUnitDetail(){this.dialogService.open(J,{data:{data:{CUM_ID:this._baseData.data.id}},header:this.translateService.instant(`Chi ti\u1ebft \u0111\u01a1n v\u1ecb ${this._baseData.data.tenCum} (${this._baseData.data.maCum})`),width:"40vw",maximizable:!0})}onClickGT(a){this.form.patchValue({ngayGiaiTan:a?this.form.value.ngayGiaiTan?this.form.value.ngayGiaiTan:new Date:void 0})}onChangeDateGT(a){this.form.patchValue({isGt:!!a})}onSubmit(){this.submitted=!0,!this.form.invalid&&("add"===this._baseData.mode?this.baseService$.add(this.form.value):this.baseService$.edit(this.form.value,this._baseData.data.id)).pipe((0,h.R)(this.unsubscribe)).subscribe({next:a=>{a&&this.dialogRef.close({isSuccess:!0})}})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(e.qu),t.Y36(p.E7),t.Y36(x.u),t.Y36(p.xA),t.Y36(u.sK),t.Y36(m.r),t.Y36(y.C))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-local-unit-form"]],standalone:!0,features:[t.jDz],decls:62,vars:68,consts:[[3,"formGroup"],[1,"p-fluid","p-formgrid","grid","m-0"],[1,"p-float-label","field","col-12","pr-1"],["pInputText","","id","code","formControlName","maCum","type","text"],["for","code",1,"require-label"],[4,"ngIf"],[1,"p-float-label","field","col-12","pl-1"],["pInputText","","id","name","formControlName","tenCum","type","text"],["for","name",1,"require-label"],[1,"p-float-label","field","col-12"],["id","drpDoiTuong","formControlName","THANHPHAN_ID","appendTo","body",3,"options"],["for","drpDoiTuong",1,"require-label"],["id","drpDiaPhuong","formControlName","DIAPHUONG_ID","appendTo","body",3,"options"],["for","drpDiaPhuong",1,"require-label"],[1,"p-float-label","field","col-5"],["id","dateTl","formControlName","ngayThanhLap","appendTo","body",3,"showIcon"],["for","ngayThanhLap"],[1,"field","col-2","flex","justify-content-end","align-items-center"],["id","isGt","formControlName","isGt",1,"mr-2",3,"binary","ngModelChange"],["id","dateGt","formControlName","ngayGiaiTan","appendTo","body",3,"showIcon","ngModelChange"],["for","ngayGiaiTan"],[1,"p-float-label","field","col-12","md:col-6","pr-1"],["pInputText","","id","name","formControlName","nguoiDaiDien","type","text"],["for","name"],[1,"p-float-label","field","col-12","md:col-6","pl-1"],["pInputText","","id","name","formControlName","dienThoai","type","number"],["inputId","name","rows","3","cols","30","formControlName","diaChiCum","pInputTextarea",""],[1,"flex","justify-content-end","gap-2"],["pButton","","pRipple","","type","button",1,"p-button-outlined",3,"label","disabled","click"],["pButton","","pRipple","","type","button",1,"p-button-outlined",3,"label","click"],["pButton","","pRipple","","type","button",3,"label","click"],[1,"p-error"]],template:function(o,n){1&o&&(t.TgZ(0,"form",0)(1,"div",1)(2,"span",2),t._UZ(3,"input",3),t.TgZ(4,"label",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.YNc(7,P,4,3,"ng-container",5),t.qZA(),t.TgZ(8,"div",6),t._UZ(9,"input",7),t.TgZ(10,"label",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.YNc(13,q,4,3,"ng-container",5),t.qZA(),t.TgZ(14,"span",9),t._UZ(15,"p-dropdown",10),t.TgZ(16,"label",11),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.YNc(19,F,4,3,"ng-container",5),t.qZA(),t.TgZ(20,"span",9),t._UZ(21,"p-dropdown",12),t.TgZ(22,"label",13),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.YNc(25,k,4,3,"ng-container",5),t.qZA(),t.TgZ(26,"div",14),t._UZ(27,"p-calendar",15),t.TgZ(28,"label",16),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.YNc(31,G,4,3,"ng-container",5),t.qZA(),t.TgZ(32,"span",17)(33,"p-checkbox",18),t.NdJ("ngModelChange",function(d){return n.onClickGT(d)}),t.qZA()(),t.TgZ(34,"div",14)(35,"p-calendar",19),t.NdJ("ngModelChange",function(d){return n.onChangeDateGT(d)}),t.qZA(),t.TgZ(36,"label",20),t._uU(37),t.ALo(38,"translate"),t.qZA()(),t.TgZ(39,"div",21),t._UZ(40,"input",22),t.TgZ(41,"label",23),t._uU(42),t.ALo(43,"translate"),t.qZA()(),t.TgZ(44,"div",24),t._UZ(45,"input",25),t.TgZ(46,"label",23),t._uU(47),t.ALo(48,"translate"),t.qZA()(),t.TgZ(49,"div",6),t._UZ(50,"textarea",26),t.TgZ(51,"label",23),t._uU(52),t.ALo(53,"translate"),t.qZA()()(),t._UZ(54,"hr"),t.TgZ(55,"div",27)(56,"button",28),t.NdJ("click",function(){return n.onClickUnitDetail()}),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"button",29),t.NdJ("click",function(){return n.dialogRef.close()}),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"button",30),t.NdJ("click",function(){return n.onSubmit()}),t.ALo(61,"translate"),t.qZA()()()),2&o&&(t.Q6J("formGroup",n.form),t.xp6(3),t.ekj("ng-invalid",n.submitted&&n.form.get("maCum").invalid)("ng-dirty",n.submitted&&n.form.get("maCum").invalid),t.xp6(2),t.Oqu(t.lcZ(6,44,"LABEL.LOCAL_UNIT_CODE")),t.xp6(2),t.Q6J("ngIf",n.submitted&&n.form.get("maCum").invalid),t.xp6(2),t.ekj("ng-invalid",n.submitted&&n.form.get("tenCum").invalid)("ng-dirty",n.submitted&&n.form.get("tenCum").invalid),t.xp6(2),t.Oqu(t.lcZ(12,46,"LABEL.LOCAL_UNIT_NAME")),t.xp6(2),t.Q6J("ngIf",n.submitted&&n.form.get("tenCum").invalid),t.xp6(2),t.ekj("ng-invalid",n.submitted&&n.form.get("THANHPHAN_ID").invalid)("ng-dirty",n.submitted&&n.form.get("THANHPHAN_ID").invalid),t.Q6J("options",n.ingredients),t.xp6(2),t.Oqu(t.lcZ(18,48,"LABEL.INGREDIENT_NAME")),t.xp6(2),t.Q6J("ngIf",n.submitted&&n.form.get("THANHPHAN_ID").invalid),t.xp6(2),t.ekj("ng-invalid",n.submitted&&n.form.get("DIAPHUONG_ID").invalid)("ng-dirty",n.submitted&&n.form.get("DIAPHUONG_ID").invalid),t.Q6J("options",n.locals),t.xp6(2),t.Oqu(t.lcZ(24,50,"LABEL.LOCAL_NAME")),t.xp6(2),t.Q6J("ngIf",n.submitted&&n.form.get("DIAPHUONG_ID").invalid),t.xp6(2),t.ekj("ng-invalid",n.submitted&&n.form.get("ngayThanhLap").invalid)("ng-dirty",n.submitted&&n.form.get("ngayThanhLap").invalid),t.Q6J("showIcon",!0),t.xp6(2),t.Oqu(t.lcZ(30,52,"LABEL.DATE_TL")),t.xp6(2),t.Q6J("ngIf",n.submitted&&n.form.get("ngayThanhLap").invalid),t.xp6(2),t.Q6J("binary",!0),t.xp6(2),t.Q6J("showIcon",!0),t.xp6(2),t.Oqu(t.lcZ(38,54,"LABEL.DATE_GT")),t.xp6(5),t.Oqu(t.lcZ(43,56,"LABEL.REPRESENTATIVE")),t.xp6(5),t.Oqu(t.lcZ(48,58,"LABEL.PHONE_NUMBER")),t.xp6(5),t.Oqu(t.lcZ(53,60,"LABEL.UNIT_ADDRESS")),t.xp6(4),t.Q6J("label",t.lcZ(57,62,"BUTTON.UNIT_DETAIL"))("disabled","add"===n._baseData.mode),t.xp6(2),t.Q6J("label",t.lcZ(59,64,"BUTTON.CANCEL")),t.xp6(2),t.Q6J("label",t.lcZ(61,66,"BUTTON.SAVE")))},dependencies:[A.j,A.o,s.A,s.g,f.hJ,f.Hq,e.u5,e._Y,e.Fj,e.wV,e.JJ,e.JL,e.UX,e.sg,e.u,r.T,r.H,U.kW,U.Lt,L._8,L.f,N.nD,N.XZ,g.O5,u.aw,u.X$],encapsulation:2})}return i})();var H=l(3859),O=l(3904);function Q(i,_){if(1&i){const a=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"span",10),t._UZ(3,"i",11),t.TgZ(4,"input",12),t.NdJ("keyup.enter",function(){t.CHM(a);const n=t.oxw();return t.KtG(n.initData())}),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"h2",13),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"span",10),t._UZ(10,"i",11),t.TgZ(11,"input",14,15),t.NdJ("input",function(n){t.CHM(a);const c=t.oxw(),d=t.MAs(4);return t.KtG(c.onGlobalFilter(d,n))}),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"button",16),t.NdJ("click",function(){t.CHM(a);const n=t.oxw();return t.KtG(n.onManage("add","LABEL.ADD"))}),t.qZA()()}2&i&&(t.xp6(4),t.Q6J("placeholder",t.lcZ(5,3,"LABEL.SEARCH_TEXT")),t.xp6(3),t.Oqu(t.lcZ(8,5,"LABEL.LOCAL_UNIT_LIST")),t.xp6(4),t.Q6J("placeholder",t.lcZ(13,7,"LABEL.SEARCH_TEXT")))}function j(i,_){1&i&&(t.TgZ(0,"tr")(1,"th",17),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th",18),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",19),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th",20),t._uU(11),t.ALo(12,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,4,"LABEL.ID")," "),t.xp6(3),t.hij(" ",t.lcZ(6,6,"LABEL.LOCAL_UNIT_CODE")," "),t.xp6(3),t.hij(" ",t.lcZ(9,8,"LABEL.LOCAL_UNIT_NAME")," "),t.xp6(3),t.hij(" ",t.lcZ(12,10,"LABEL.ACTION")," "))}function $(i,_){if(1&i){const a=t.EpF();t.TgZ(0,"tr")(1,"td",21),t._uU(2),t.qZA(),t.TgZ(3,"td",18),t._uU(4),t.qZA(),t.TgZ(5,"td",19),t._uU(6),t.qZA(),t.TgZ(7,"td",22)(8,"div",23)(9,"button",24),t.NdJ("click",function(){const c=t.CHM(a).$implicit,d=t.oxw();return t.KtG(d.onManage("edit","LABEL.EDIT",c))}),t.qZA(),t.TgZ(10,"button",25),t.NdJ("click",function(){const c=t.CHM(a).$implicit,d=t.oxw();return t.KtG(d.onDelete(c))}),t.qZA()()()()}if(2&i){const a=_.$implicit;t.xp6(2),t.hij(" ",a.id," "),t.xp6(2),t.Oqu(a.maCum),t.xp6(2),t.Oqu(a.tenCum)}}const Y=()=>["maCum","tenCum"];let z=(()=>{class i{constructor(a,o,n,c,d){this.confirmationService=a,this.translateService=o,this.dialogService=n,this.baseService$=c,this.layoutService$=d,this.isMobile=!1,this.data=[],this.unsubscribe=new C.x}ngOnInit(){this.isMobile=this.layoutService$.isMobile(),this.initData()}initData(){this.layoutService$.globalLoading.next(!0),this.baseService$.list().pipe((0,h.R)(this.unsubscribe),(0,I.x)(()=>{this.layoutService$.globalLoading.next(!1)})).subscribe(a=>{this.data=a})}onManage(a,o,n){this.dialogService.open(w,{data:{mode:a,data:n},header:this.translateService.instant(o),width:"50vw",maximizable:!0}).onClose.subscribe(d=>{d?.isSuccess&&this.initData()})}onDelete(a){this.confirmationService.confirm({message:this.translateService.instant("INFO.ARE_YOUR_SURE_DELETE_RECORD"),header:this.translateService.instant("LABEL.CONFIRM"),icon:"pi pi-exclamation-triangle",acceptLabel:this.translateService.instant("BUTTON.ACCEPT"),rejectLabel:this.translateService.instant("BUTTON.CANCEL"),accept:()=>this.doDelete(a)})}doDelete(a){this.baseService$.delete(a.id).pipe((0,h.R)(this.unsubscribe)).subscribe({next:o=>{o&&this.initData()}})}ngOnDestroy(){this.unsubscribe.next({}),this.unsubscribe.complete()}onGlobalFilter(a,o){a.filterGlobal(o.target.value,"contains")}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(b.YP),t.Y36(u.sK),t.Y36(p.xA),t.Y36(x.u),t.Y36(H.P))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],features:[t._Bn([b.ez,b.YP,m.r,p.xA])],decls:9,vars:5,consts:[[1,"grid"],[1,"col-12","p-0"],[1,"card"],[3,"value","scrollable","responsiveLayout","globalFilterFields"],["localUnitTable",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","justify-content-between"],[1,"flex","align-items-center","gap-4"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text",1,"w-full",3,"placeholder","keyup.enter"],[1,"m-0"],["pInputText","","type","text",1,"w-full",3,"placeholder","input"],["filter",""],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button-rounded","p-button-success",3,"click"],["pFrozenColumn","",2,"width","50px"],[2,"width","200px"],[2,"width","auto"],["pFrozenColumn","","alignFrozen","right",2,"width","100px"],["pFrozenColumn","",1,"font-bold",2,"width","50px"],["pFrozenColumn","","alignFrozen","right",1,"font-bold",2,"width","100px"],[1,"flex","gap-2"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-table",3,4),t.YNc(5,Q,15,9,"ng-template",5)(6,j,13,12,"ng-template",6)(7,$,11,3,"ng-template",7),t.qZA()()()(),t._UZ(8,"p-confirmDialog")),2&o&&(t.xp6(3),t.Q6J("value",n.data)("scrollable",!0)("responsiveLayout",n.isMobile?"stack":"scroll")("globalFilterFields",t.DdM(4,Y)))},dependencies:[Z.iA,b.jx,Z.on,f.Hq,A.o,r.H,O.Q,u.X$],encapsulation:2})}return i})(),K=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[v.Bz.forChild([{path:"",component:z}]),v.Bz]})}return i})();var W=l(6804),V=l(4055),X=l(6651),tt=l(4104),et=l(7902),nt=l(6022);let at=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[g.ez,K,e.u5,Z.U$,nt.Xt,f.hJ,et.JH,A.j,W.KZ,r.T,V.q4,U.kW,X.q,tt.EV,O.D,u.aw,L._8,N.nD]})}return i})()},8998:(E,D,l)=>{l.d(D,{u:()=>C});var g=l(7398),e=l(8860),v=l(8109),b=l(9862);let C=(()=>{class h{constructor(p){this.http=p,this.baseUrl=e.N.serverURL+"cum",this.localUnitDetailUrl=e.N.serverURL+"chitietcum"}list(){return this.http.get(this.baseUrl).pipe((0,g.U)(p=>p?.data?.length?p?.data:[]))}add(p){return this.http.post(this.baseUrl,p).pipe((0,g.U)(m=>m))}edit(p,m){return this.http.put(`${this.baseUrl}/${m}`,p).pipe((0,g.U)(t=>t))}delete(p){return this.http.delete(`${this.baseUrl}/${p}`).pipe((0,g.U)(m=>m))}addLocalUnitDetail(p){return this.http.post(this.localUnitDetailUrl,p).pipe((0,g.U)(m=>m))}deleteLocalUnitDetail(p){return this.http.delete(`${this.localUnitDetailUrl}/${p}`).pipe((0,g.U)(m=>m))}localUnitDetailSearchText(p,m){return this.http.get(`${this.localUnitDetailUrl}/GetByCumSearchText?CUM_ID=${m}&searchText=${p}`).pipe((0,g.U)(t=>t?.data?.length?t?.data:[]))}static#t=this.\u0275fac=function(m){return new(m||h)(v.LFG(b.eN))};static#e=this.\u0275prov=v.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},6651:(E,D,l)=>{l.d(D,{k:()=>t,q:()=>A});var g=l(6814),e=l(8109),v=l(5219);function b(s,f){if(1&s&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&s){const r=e.oxw(2);e.Udp("display",null!=r.value&&0!==r.value?"flex":"none"),e.uIk("data-pc-section","label"),e.xp6(1),e.AsE("",r.value,"",r.unit,"")}}function C(s,f){1&s&&e.GkF(0)}const h=s=>({$implicit:s});function I(s,f){if(1&s&&(e.TgZ(0,"div",3)(1,"div",4),e.YNc(2,b,2,5,"div",5)(3,C,1,0,"ng-container",6),e.qZA()()),2&s){const r=e.oxw();e.Udp("width",r.value+"%")("background",r.color),e.uIk("data-pc-section","value"),e.xp6(2),e.Q6J("ngIf",r.showValue&&!r.contentTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",r.contentTemplate)("ngTemplateOutletContext",e.VKq(8,h,r.value))}}function p(s,f){if(1&s&&(e.TgZ(0,"div",7),e._UZ(1,"div",8),e.qZA()),2&s){const r=e.oxw();e.uIk("data-pc-section","container"),e.xp6(1),e.Udp("background",r.color),e.uIk("data-pc-section","value")}}const m=(s,f)=>({"p-progressbar p-component":!0,"p-progressbar-determinate":s,"p-progressbar-indeterminate":f});let t=(()=>{class s{value;showValue=!0;styleClass;style;unit="%";mode="determinate";color;templates;contentTemplate;ngAfterContentInit(){this.templates?.forEach(r=>{r.getType(),this.contentTemplate=r.template})}static \u0275fac=function(u){return new(u||s)};static \u0275cmp=e.Xpm({type:s,selectors:[["p-progressBar"]],contentQueries:function(u,T,U){if(1&u&&e.Suo(U,v.jx,4),2&u){let L;e.iGM(L=e.CRH())&&(T.templates=L)}},hostAttrs:[1,"p-element"],inputs:{value:"value",showValue:"showValue",styleClass:"styleClass",style:"style",unit:"unit",mode:"mode",color:"color"},decls:3,vars:14,consts:[["role","progressbar",3,"ngStyle","ngClass"],["class","p-progressbar-value p-progressbar-value-animate","style","display:flex",3,"width","background",4,"ngIf"],["class","p-progressbar-indeterminate-container",4,"ngIf"],[1,"p-progressbar-value","p-progressbar-value-animate",2,"display","flex"],[1,"p-progressbar-label"],[3,"display",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-progressbar-indeterminate-container"],[1,"p-progressbar-value","p-progressbar-value-animate"]],template:function(u,T){1&u&&(e.TgZ(0,"div",0),e.YNc(1,I,4,10,"div",1)(2,p,2,4,"div",2),e.qZA()),2&u&&(e.Tol(T.styleClass),e.Q6J("ngStyle",T.style)("ngClass",e.WLB(11,m,"determinate"===T.mode,"indeterminate"===T.mode)),e.uIk("aria-valuemin",0)("aria-valuenow",T.value)("aria-valuemax",100)("data-pc-name","progressbar")("data-pc-section","root"),e.xp6(1),e.Q6J("ngIf","determinate"===T.mode),e.xp6(1),e.Q6J("ngIf","indeterminate"===T.mode))},dependencies:[g.mk,g.O5,g.tP,g.PC],styles:['@layer primeng{.p-progressbar{position:relative;overflow:hidden}.p-progressbar-determinate .p-progressbar-value{height:100%;width:0%;position:absolute;display:none;border:0 none;display:flex;align-items:center;justify-content:center;overflow:hidden}.p-progressbar-determinate .p-progressbar-label{display:inline-flex}.p-progressbar-determinate .p-progressbar-value-animate{transition:width 1s ease-in-out}.p-progressbar-indeterminate .p-progressbar-value:before{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim 2.1s cubic-bezier(.65,.815,.735,.395) infinite}.p-progressbar-indeterminate .p-progressbar-value:after{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;animation-delay:1.15s}}@keyframes p-progressbar-indeterminate-anim{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@keyframes p-progressbar-indeterminate-anim-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}\n'],encapsulation:2,changeDetection:0})}return s})(),A=(()=>{class s{static \u0275fac=function(u){return new(u||s)};static \u0275mod=e.oAB({type:s});static \u0275inj=e.cJS({imports:[g.ez]})}return s})()}}]);