"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[549],{513:(St,g,c)=>{c.r(g),c.d(g,{BillModule:()=>Bt});var m=c(69808),_=c(93075),p=c(98952),h=c(88205),f=c(40845),b=c(25787),T=c(17773),Z=c(44534),D=c(98018),C=c(31424),R=c(73407),x=c(14036),A=c(49603),v=c(7010),B=c(15315),y=c(51122),S=c(44930),J=c(94327),r=c(41777),t=c(5e3),u=c(54004),E=c(92340),P=c(81637),k=c(40520);let a=`${P.Z.DEFAULT_URLS.API}/Bills`,M=(()=>{class l{constructor(e){this.http=e}getPagingBills(e){return this.http.get(`${a}`,{params:e}).pipe((0,u.U)(i=>i))}getAllBills(){return this.http.get(`${a}/list`,{}).pipe((0,u.U)(e=>e))}getBillDetail(e){return this.http.get(`${a}/${e}`,{}).pipe((0,u.U)(n=>n))}createBill(e){return this.http.post(`${a}`,e).pipe((0,u.U)(n=>n))}updateBill(e,i){return this.http.put(`${a}/${i}`,e).pipe((0,u.U)(o=>o))}deleteBill(e){return this.http.delete(`${a}/${e}`,{}).pipe((0,u.U)(n=>n))}deleteMultipleBill(e){return this.http.put(`${a}/multiple`,e).pipe()}getExcelReport(e){return this.http.get(`${a}/export-excel-customer`,{}).pipe((0,u.U)(n=>n))}getFolderPathDownload(e,i){return E.N.serverURL+`/ReportDownload/DownloadReportFromFile?filename=${e}&fileType=${i}`}}return l.\u0275fac=function(e){return new(e||l)(t.LFG(k.eN))},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac}),l})();var I=c(59783),w=c(74297);function F(l,s){if(1&l){const e=t.EpF();t.TgZ(0,"div",19)(1,"button",20),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openNew())}),t.qZA(),t.TgZ(2,"button",21),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.deleteSelectedAccessories())}),t.qZA()()}if(2&l){const e=t.oxw();t.xp6(2),t.Q6J("disabled",!e.selectedAccessories||!e.selectedAccessories.length)}}function Y(l,s){if(1&l){const e=t.EpF();t._UZ(0,"p-fileUpload",22),t.TgZ(1,"button",23),t.NdJ("click",function(){t.CHM(e),t.oxw();const n=t.MAs(8);return t.KtG(n.exportCSV())}),t.qZA(),t.TgZ(2,"button",24),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.exportExcel())}),t.qZA(),t.TgZ(3,"button",25),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.exportPdf())}),t.qZA(),t.TgZ(4,"button",26),t.NdJ("click",function(){t.CHM(e),t.oxw();const n=t.MAs(8);return t.KtG(n.exportCSV({selectionOnly:!0}))}),t.qZA()}2&l&&t.Q6J("maxFileSize",1e6)}function $(l,s){if(1&l){const e=t.EpF();t.TgZ(0,"div",27)(1,"h5",28),t._uU(2,"Bills management"),t.qZA(),t.TgZ(3,"span",29),t._UZ(4,"i",30),t.TgZ(5,"input",31),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.getParams.searchText=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.getAccessories())}),t.qZA()()()}if(2&l){const e=t.oxw();t.xp6(5),t.Q6J("ngModel",e.getParams.searchText)}}function K(l,s){1&l&&(t.TgZ(0,"tr"),t._UZ(1,"th",32),t.TgZ(2,"th",33),t._uU(3,"Customer ID"),t._UZ(4,"p-sortIcon",34),t.qZA(),t.TgZ(5,"th",35),t._uU(6,"Bill Code"),t._UZ(7,"p-sortIcon",36),t.qZA(),t.TgZ(8,"th",37),t._uU(9,"Total Amount"),t._UZ(10,"p-sortIcon",38),t.qZA(),t.TgZ(11,"th",39),t._uU(12,"Delivery Status"),t._UZ(13,"p-sortIcon",40),t.qZA(),t.TgZ(14,"th",41),t._uU(15,"Bill Status"),t._UZ(16,"p-sortIcon",42),t.qZA(),t.TgZ(17,"th",43),t._uU(18,"Description"),t._UZ(19,"p-sortIcon",44),t.qZA(),t._UZ(20,"th",45),t.qZA())}function O(l,s){if(1&l){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._UZ(2,"button",46),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td",45)(16,"div",47)(17,"button",48),t.NdJ("click",function(){const o=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.editAccessory(o))}),t.qZA(),t.TgZ(18,"button",49),t.NdJ("click",function(){const o=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.deleteAccessory(o))}),t.qZA()()()()}if(2&l){const e=s.$implicit,i=s.expanded,n=t.oxw();t.xp6(2),t.Q6J("pRowToggler",e)("icon",i?"pi pi-chevron-down":"pi pi-chevron-right"),t.xp6(2),t.Oqu(e.customeRId),t.xp6(2),t.Oqu(e.billCode),t.xp6(2),t.Oqu(e.totalAmount),t.xp6(2),t.Oqu(n.getDeliveryName(e.deliveryStatus)),t.xp6(2),t.Oqu(n.getStatusName(e.billStatus)),t.xp6(2),t.Oqu(e.description)}}function G(l,s){1&l&&(t.TgZ(0,"tr")(1,"th",54),t._uU(2,"Bill ID "),t._UZ(3,"p-sortIcon",55),t.qZA(),t.TgZ(4,"th",56),t._uU(5,"ImeI ID "),t._UZ(6,"p-sortIcon",57),t.qZA(),t.TgZ(7,"th",58),t._uU(8,"Accessory ID "),t._UZ(9,"p-sortIcon",59),t.qZA(),t.TgZ(10,"th",60),t._uU(11,"Price"),t._UZ(12,"p-sortIcon",61),t.qZA(),t.TgZ(13,"th",62),t._uU(14,"Quantity"),t._UZ(15,"p-sortIcon",63),t.qZA(),t.TgZ(16,"th",64),t._uU(17,"Battery Percent"),t._UZ(18,"p-sortIcon",65),t.qZA()())}function Q(l,s){if(1&l&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA()()),2&l){const e=s.$implicit;t.xp6(2),t.Oqu(e.bilLId),t.xp6(2),t.Oqu(e.imeIId),t.xp6(2),t.Oqu(e.accessorYId),t.xp6(2),t.Oqu(e.price),t.xp6(2),t.Oqu(e.quantity),t.xp6(2),t.Oqu(e.batteryPercent)}}function H(l,s){1&l&&(t.TgZ(0,"tr")(1,"td",66),t._uU(2,"There are no order for this bill detail yet."),t.qZA()())}function L(l,s){if(1&l&&(t.TgZ(0,"tr")(1,"td",50)(2,"div",51)(3,"p-table",52),t.YNc(4,G,19,0,"ng-template",9),t.YNc(5,Q,13,6,"ng-template",10),t.YNc(6,H,3,0,"ng-template",53),t.qZA()()()()),2&l){const e=s.$implicit;t.xp6(3),t.Q6J("value",e.billDetails)}}function j(l,s){1&l&&(t.TgZ(0,"small",84),t._uU(1,"Customer ID is required."),t.qZA())}function z(l,s){if(1&l){const e=t.EpF();t.TgZ(0,"div",85)(1,"p-radioButton",86),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw(2);return t.KtG(o.selectedBillStatus=n)}),t.qZA(),t.TgZ(2,"label",87),t._uU(3),t.qZA()()}if(2&l){const e=s.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("inputId",e.key)("value",e)("ngModel",i.selectedBillStatus),t.xp6(1),t.Q6J("for",e.key),t.xp6(1),t.Oqu(e.name)}}function V(l,s){1&l&&(t.TgZ(0,"small",84),t._uU(1,"Description is required."),t.qZA())}function X(l,s){1&l&&(t.TgZ(0,"tr")(1,"th",88),t._uU(2,"Imei Id"),t.qZA(),t.TgZ(3,"th",88),t._uU(4,"Accessory Id"),t.qZA(),t.TgZ(5,"th",89),t._uU(6,"Price"),t.qZA(),t.TgZ(7,"th",90),t._uU(8,"Quantity"),t.qZA(),t.TgZ(9,"th",90),t._uU(10,"Battery percent"),t.qZA(),t._UZ(11,"th",88),t.qZA())}function W(l,s){if(1&l){const e=t.EpF();t.TgZ(0,"input",98),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw().$implicit;return t.KtG(o.imeIId=n)}),t.qZA()}if(2&l){const e=t.oxw().$implicit;t.Q6J("ngModel",e.imeIId)}}function tt(l,s){if(1&l&&t._uU(0),2&l){const e=t.oxw().$implicit;t.hij(" ",e.imeIId," ")}}function et(l,s){if(1&l){const e=t.EpF();t.TgZ(0,"input",99),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw().$implicit;return t.KtG(o.accessorYId=n)}),t.qZA()}if(2&l){const e=t.oxw().$implicit;t.Q6J("ngModel",e.accessorYId)}}function lt(l,s){if(1&l&&t._uU(0),2&l){const e=t.oxw().$implicit;t.hij(" ",e.accessorYId," ")}}function nt(l,s){if(1&l){const e=t.EpF();t.TgZ(0,"input",99),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw().$implicit;return t.KtG(o.price=n)}),t.qZA()}if(2&l){const e=t.oxw().$implicit;t.Q6J("ngModel",e.price)}}function it(l,s){if(1&l&&t._uU(0),2&l){const e=t.oxw().$implicit;t.hij(" ",e.price," ")}}function ot(l,s){if(1&l){const e=t.EpF();t.TgZ(0,"input",99),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw().$implicit;return t.KtG(o.quantity=n)}),t.qZA()}if(2&l){const e=t.oxw().$implicit;t.Q6J("ngModel",e.quantity)}}function st(l,s){if(1&l&&t._uU(0),2&l){const e=t.oxw().$implicit;t.hij(" ",e.quantity," ")}}function ct(l,s){if(1&l){const e=t.EpF();t.TgZ(0,"input",99),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw().$implicit;return t.KtG(o.batteryPercent=n)}),t.qZA()}if(2&l){const e=t.oxw().$implicit;t.Q6J("ngModel",e.batteryPercent)}}function pt(l,s){if(1&l&&t._uU(0),2&l){const e=t.oxw().$implicit;t.hij(" ",e.batteryPercent," ")}}function at(l,s){if(1&l){const e=t.EpF();t.TgZ(0,"button",100),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.onRowEditInit(n))}),t.qZA()}}function rt(l,s){if(1&l){const e=t.EpF();t.TgZ(0,"button",101),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.onRowEditSave(n))}),t.qZA()}}function ut(l,s){if(1&l){const e=t.EpF();t.TgZ(0,"button",102),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(),o=n.$implicit,d=n.rowIndex,yt=t.oxw(2);return t.KtG(yt.onRowEditCancel(o,d))}),t.qZA()}}function dt(l,s){if(1&l&&(t.TgZ(0,"tr",91)(1,"td")(2,"p-cellEditor"),t.YNc(3,W,1,1,"ng-template",92),t.YNc(4,tt,1,1,"ng-template",93),t.qZA()(),t.TgZ(5,"td")(6,"p-cellEditor"),t.YNc(7,et,1,1,"ng-template",92),t.YNc(8,lt,1,1,"ng-template",93),t.qZA()(),t.TgZ(9,"td")(10,"p-cellEditor"),t.YNc(11,nt,1,1,"ng-template",92),t.YNc(12,it,1,1,"ng-template",93),t.qZA()(),t.TgZ(13,"td")(14,"p-cellEditor"),t.YNc(15,ot,1,1,"ng-template",92),t.YNc(16,st,1,1,"ng-template",93),t.qZA()(),t.TgZ(17,"td")(18,"p-cellEditor"),t.YNc(19,ct,1,1,"ng-template",92),t.YNc(20,pt,1,1,"ng-template",93),t.qZA()(),t.TgZ(21,"td")(22,"div",94),t.YNc(23,at,1,0,"button",95),t.YNc(24,rt,1,0,"button",96),t.YNc(25,ut,1,0,"button",97),t.qZA()()()),2&l){const i=s.editing;t.Q6J("pEditableRow",s.$implicit),t.xp6(23),t.Q6J("ngIf",!i),t.xp6(1),t.Q6J("ngIf",i),t.xp6(1),t.Q6J("ngIf",i)}}const U=function(){return{"margin-bottom":"2em"}},N=function(l){return{"ng-invalid ng-dirty":l}};function _t(l,s){if(1&l){const e=t.EpF();t.TgZ(0,"p-card",67)(1,"div",68)(2,"label",69),t._uU(3,"Customer ID"),t.qZA(),t.TgZ(4,"p-inputNumber",70),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.bill.customeRId=n)}),t.qZA(),t.YNc(5,j,2,0,"small",71),t.qZA(),t.TgZ(6,"div",68)(7,"label",72),t._uU(8,"Bill Code"),t.qZA(),t.TgZ(9,"input",73),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.bill.billCode=n)}),t.qZA()(),t.TgZ(10,"div",68)(11,"label",74),t._uU(12,"Total Amount"),t.qZA(),t.TgZ(13,"p-inputNumber",75),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.bill.totalAmount=n)}),t.qZA()(),t.TgZ(14,"div",68)(15,"label",76),t._uU(16,"Bill Status"),t.qZA(),t.YNc(17,z,4,5,"div",77),t.qZA(),t.TgZ(18,"div",68)(19,"label",78),t._uU(20,"Delivery Status"),t.qZA(),t.TgZ(21,"p-dropdown",79),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.selectedDeliveryStatus=n)}),t.qZA()(),t.TgZ(22,"div",68)(23,"label",80),t._uU(24,"Description"),t.qZA(),t.TgZ(25,"input",81),t.NdJ("ngModelChange",function(n){t.CHM(e);const o=t.oxw();return t.KtG(o.bill.description=n)}),t.qZA(),t.YNc(26,V,2,0,"small",71),t.qZA()(),t.TgZ(27,"p-card",82)(28,"p-table",83),t.YNc(29,X,12,0,"ng-template",9),t.YNc(30,dt,26,4,"ng-template",10),t.qZA()()}if(2&l){const e=t.oxw();t.Akn(t.DdM(17,U)),t.xp6(4),t.Q6J("ngModel",e.bill.customeRId)("ngClass",t.VKq(18,N,e.submitted&&!e.bill.customeRId)),t.xp6(1),t.Q6J("ngIf",e.submitted&&!e.bill.customeRId),t.xp6(4),t.Q6J("ngModel",e.bill.billCode),t.xp6(4),t.Q6J("ngModel",e.bill.totalAmount),t.xp6(4),t.Q6J("ngForOf",e.billStatus),t.xp6(4),t.Q6J("options",e.deliveryStatus)("ngModel",e.selectedDeliveryStatus)("showClear",!0),t.xp6(4),t.Q6J("ngModel",e.bill.description)("ngClass",t.VKq(20,N,e.submitted&&!e.bill.description)),t.xp6(1),t.Q6J("ngIf",e.submitted&&!e.bill.description),t.xp6(1),t.Akn(t.DdM(22,U)),t.xp6(1),t.Q6J("value",e.billDetails)}}function mt(l,s){if(1&l){const e=t.EpF();t.TgZ(0,"button",103),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.hideDialog())}),t.qZA(),t.TgZ(1,"button",104),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.saveAccessory())}),t.qZA()}}function gt(l,s){if(1&l&&(t.TgZ(0,"span"),t._uU(1,"Are you sure you want to delete "),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4,"?"),t.qZA()),2&l){const e=t.oxw();t.xp6(3),t.Oqu(e.bill.billCode)}}function ht(l,s){if(1&l){const e=t.EpF();t.TgZ(0,"button",105),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.deleteAccessoryDialog=!1)}),t.qZA(),t.TgZ(1,"button",106),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.confirmDelete())}),t.qZA()}}function ft(l,s){if(1&l){const e=t.EpF();t.TgZ(0,"button",105),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.deleteAccessoriesDialog=!1)}),t.qZA(),t.TgZ(1,"button",106),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.confirmDeleteSelected())}),t.qZA()}}const bt=function(){return["customeR_ID","billCode","totalAmount","deliveryStatus","billStatus","description"]},Tt=function(){return[5,10,20]},Zt=function(){return{width:"70%"}},q=function(){return{width:"450px"}};let Ct=(()=>{class l{constructor(e,i){this.billService=e,this.messageService=i,this.billDialog=!1,this.deleteAccessoryDialog=!1,this.deleteAccessoriesDialog=!1,this.accessories=[],this.bill={},this.selectedAccessories=[],this.submitted=!1,this.cols=[],this.rowsPerPageOptions=[5,10,20],this.selectedBillStatus=null,this.billStatus=[{name:"Ch\u01b0a Thanh To\xe1n",key:1},{name:"\u0110\xe3 Thanh To\xe1n",key:2}],this.selectedDeliveryStatus=null,this.deliveryStatus=[{name:"Ch\u01b0a giao h\xe0ng",code:1},{name:"\u0110ang giao h\xe0ng",code:2},{name:"Giao h\xe0ng th\xe0nh c\xf4ng",code:3},{name:"Giao h\xe0ng l\u1ed7i",code:4},{name:"\u0110\u01a1n h\xe0ng b\u1ecb h\u1ee7y",code:5}],this.billDetails=[],this.statuses=[],this.loading=!1,this.getParams={page:0,pageSize:5,sortField:"id",isSort:!0,searchText:""},this.lstBill=[],this.totalRecords=0,this.totalPages=0,this.first=0,this.clonedProducts={}}ngOnInit(){this.cols=[{field:"accessoryName",header:"Accessory name"},{field:"salePrice",header:"Sale Price"},{field:"description",header:"Description"}],this.statuses=[{label:"In Stock",value:"INSTOCK"},{label:"Low Stock",value:"LOWSTOCK"},{label:"Out of Stock",value:"OUTOFSTOCK"}]}getAccessories(e,i=!1){this.pendingRequest&&this.pendingRequest.unsubscribe(),this.loading=!0,e&&(console.log(e),this.getParams.page=e.first/e.rows,this.getParams.pageSize=e.rows+1,this.getParams.sortField=e.sortField,this.getParams.isSort=1===e.sortOrder),i&&this.billService.getExcelReport(this.getParams).subscribe(n=>{S.Z.scrollToTop(),this.openDownloadFile(n.data,"excel")}),Object.keys(this.getParams).forEach(n=>null==this.getParams[n]&&delete this.getParams[n]),this.pendingRequest=this.billService.getPagingBills(this.getParams).subscribe(n=>{S.Z.scrollToTop(),this.lstBill=n.data,this.totalRecords=n.totalItems||0,this.totalPages=n.totalItems/n.pageSize,console.log(this.lstBill),this.loading=!1})}openDownloadFile(e,i){try{var n=this.billService.getFolderPathDownload(e,i);n&&window.open(n)}catch(o){this.messageService.add({severity:"error",summary:"Error Message",detail:"File invalid"})}}openNew(){this.bill={},this.submitted=!1,this.billDialog=!0,this.resetValue()}deleteSelectedAccessories(){this.deleteAccessoriesDialog=!0}editAccessory(e){this.bill=Object.assign({},e),this.selectedBillStatus=this.billStatus.filter(i=>i.key===e.billStatus)[0],this.selectedDeliveryStatus=this.deliveryStatus.filter(i=>i.code===e.deliveryStatus)[0],this.billDetails=e.billDetails||[],this.billDialog=!0}resetValue(){this.selectedDeliveryStatus=null,this.selectedBillStatus=null}deleteAccessory(e){this.deleteAccessoryDialog=!0,this.bill=Object.assign({},e)}confirmDeleteSelected(){this.billService.deleteMultipleBill(this.selectedAccessories.map(e=>e.id)).subscribe(()=>{this.deleteAccessoriesDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"accessories Deleted",life:3e3}),this.selectedAccessories=[],this.getAccessories()})}confirmDelete(){this.billService.deleteBill(this.bill.id).subscribe(e=>{this.deleteAccessoryDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"accessory Deleted",life:3e3}),this.bill={},this.getAccessories()})}hideDialog(){this.billDialog=!1,this.submitted=!1,this.bill={},this.getAccessories()}saveAccessory(){this.submitted=!0,console.log(this.bill),this.bill.billStatus=this.selectedBillStatus.key,this.bill.deliveryStatus=this.selectedDeliveryStatus.code,this.bill.id?this.billService.updateBill(this.bill,this.bill.id).subscribe(e=>{console.log(e),this.messageService.add({severity:"success",summary:"Successful",detail:"accessory Updated",life:3e3}),this.hideDialog()}):(this.bill.id=0,this.billService.createBill(this.bill).subscribe(e=>{console.log(e),this.messageService.add({severity:"success",summary:"Successful",detail:"accessory Created",life:3e3}),this.hideDialog()}))}getDeliveryName(e){let i=this.deliveryStatus.find(n=>n.code===e);return i?i.name:""}getStatusName(e){let i=this.billStatus.find(n=>n.key===e);return i?i.name:""}findIndexById(e){let i=-1;for(let n=0;n<this.accessories.length;n++)if(this.accessories[n].id===e){i=n;break}return i}createId(){let e="";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<6;n++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}onGlobalFilter(e,i){e.filterGlobal(i.target.value,"contains")}exportPdf(){c.e(583).then(c.bind(c,53583)).then(e=>{Promise.all([c.e(583),c.e(983)]).then(c.t.bind(c,12983,23)).then(i=>{const n=new e.default;n.autoTable(this.cols,this.accessories),n.save("accessory.pdf")})})}exportExcel(){c.e(574).then(c.bind(c,80574)).then(e=>{const n={Sheets:{data:e.utils.json_to_sheet(this.accessories)},SheetNames:["data"]},o=e.write(n,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(o,"accessories")})}saveAsExcelFile(e,i){const d=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});J.saveAs(d,i+"_export_"+(new Date).getTime()+".xlsx")}onRowEditInit(e){this.clonedProducts[e.id]=Object.assign({},e)}onRowEditSave(e){e.price>0?(delete this.clonedProducts[e.id],this.messageService.add({severity:"success",summary:"Success",detail:"Product is updated"})):this.messageService.add({severity:"error",summary:"Error",detail:"Invalid Price"})}onRowEditCancel(e,i){this.billDetails[i]=this.clonedProducts[e.id],delete this.clonedProducts[e.id]}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(M),t.Y36(I.ez))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-bill"]],decls:27,vars:30,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["dataKey","name","responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","first","lazy","totalRecords","selection","firstChange","onLazyLoad","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["header","Bill Details",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","label","Delete","icon","pi pi-trash",1,"p-button-danger",3,"disabled","click"],["mode","basic","accept","image/*","label","Import","chooseLabel","Import",1,"mr-2","inline-block",3,"maxFileSize"],["pButton","","pRipple","","label","Export","icon","pi pi-upload",1,"p-button-help","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","XLS","tooltipPosition","bottom",1,"p-button-success","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-pdf","pTooltip","PDF","tooltipPosition","bottom",1,"p-button-warning","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-filter","pTooltip","Selection Only","tooltipPosition","bottom",1,"p-button-info","ml-auto",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",1,"w-full","sm:w-auto",3,"ngModel","ngModelChange","change"],[2,"width","3rem"],["pSortableColumn","customeRId"],["field","customeRId"],["pSortableColumn","billCode"],["field","billCode"],["pSortableColumn","totalAmount"],["field","totalAmount"],["pSortableColumn","deliveryStatus"],["field","deliveryStatus"],["pSortableColumn","billStatus"],["field","billStatus"],["pSortableColumn","description"],["field","description"],[1,"w-2"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","icon"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning",3,"click"],["colspan","12"],[1,"p-3"],["dataKey","id",3,"value"],["pTemplate","emptymessage"],["pSortableColumn","bilLId"],["field","bilLId"],["pSortableColumn","imeIId"],["field","imeIId"],["pSortableColumn","accessorYId"],["field","accessorYId"],["pSortableColumn","price"],["field","price"],["pSortableColumn","quantity"],["field","quantity"],["pSortableColumn","batteryPercent"],["field","batteryPercent"],["colspan","6"],["header","Bill Information"],[1,"field"],["for","customeRId"],["inputId","customeRId","autofocus","",3,"ngModel","ngClass","ngModelChange"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","billCode"],["type","text","pInputText","","id","billCode",3,"ngModel","ngModelChange"],["for","totalAmount"],["inputId","totalAmount",3,"ngModel","ngModelChange"],["for","billStatus"],["class","field-checkbox",4,"ngFor","ngForOf"],["for","deliveryStatus"],["placeholder","Select delivery status","optionLabel","name",3,"options","ngModel","showClear","ngModelChange"],["for","description"],["type","text","pInputText","","id","description","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["header","Bill Details"],["dataKey","id","editMode","row",3,"value"],[1,"ng-dirty","ng-invalid"],[1,"field-checkbox"],["name","category",3,"inputId","value","ngModel","ngModelChange"],[3,"for"],[2,"width","20%"],[2,"width","10%"],[2,"width","15%"],[3,"pEditableRow"],["pTemplate","input"],["pTemplate","output"],[1,"flex","align-items-center","justify-content-center","gap-2"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil","class","p-button-rounded p-button-text",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check","class","p-button-rounded p-button-text p-button-success mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times","class","p-button-rounded p-button-text p-button-danger",3,"click",4,"ngIf"],["pInputText","","type","text",3,"ngModel","ngModelChange"],["pInputText","","type","text","required","",3,"ngModel","ngModelChange"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil",1,"p-button-rounded","p-button-text",3,"click"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check",1,"p-button-rounded","p-button-text","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times",1,"p-button-rounded","p-button-text","p-button-danger",3,"click"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",3,"click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"p-toast"),t.TgZ(4,"p-toolbar",3),t.YNc(5,F,3,1,"ng-template",4),t.YNc(6,Y,5,1,"ng-template",5),t.qZA(),t.TgZ(7,"p-table",6,7),t.NdJ("firstChange",function(o){return i.first=o})("onLazyLoad",function(o){return i.getAccessories(o)})("selectionChange",function(o){return i.selectedAccessories=o}),t.YNc(9,$,6,1,"ng-template",8),t.YNc(10,K,21,0,"ng-template",9),t.YNc(11,O,19,8,"ng-template",10),t.YNc(12,L,7,1,"ng-template",11),t.qZA()()()(),t.TgZ(13,"p-dialog",12),t.NdJ("visibleChange",function(o){return i.billDialog=o}),t.YNc(14,_t,31,23,"ng-template",13),t.YNc(15,mt,2,0,"ng-template",14),t.qZA(),t.TgZ(16,"p-dialog",15),t.NdJ("visibleChange",function(o){return i.deleteAccessoryDialog=o}),t.TgZ(17,"div",16),t._UZ(18,"i",17),t.YNc(19,gt,5,1,"span",18),t.qZA(),t.YNc(20,ht,2,0,"ng-template",14),t.qZA(),t.TgZ(21,"p-dialog",15),t.NdJ("visibleChange",function(o){return i.deleteAccessoriesDialog=o}),t.TgZ(22,"div",16),t._UZ(23,"i",17),t.TgZ(24,"span"),t._uU(25,"Are you sure you want to delete selected accessory?"),t.qZA()(),t.YNc(26,ft,2,0,"ng-template",14),t.qZA()),2&e&&(t.xp6(7),t.Q6J("value",i.lstBill)("columns",i.cols)("rows",10)("globalFilterFields",t.DdM(25,bt))("paginator",!0)("rowsPerPageOptions",t.DdM(26,Tt))("showCurrentPageReport",!0)("first",i.first)("lazy",!0)("totalRecords",i.totalRecords)("selection",i.selectedAccessories)("totalRecords",i.totalRecords),t.xp6(6),t.Akn(t.DdM(27,Zt)),t.Q6J("visible",i.billDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(28,q)),t.Q6J("visible",i.deleteAccessoryDialog)("modal",!0),t.xp6(3),t.Q6J("ngIf",i.bill),t.xp6(2),t.Akn(t.DdM(29,q)),t.Q6J("visible",i.deleteAccessoriesDialog)("modal",!0))},dependencies:[m.mk,m.sg,m.O5,p.iA,I.jx,p.lQ,p.jB,p.YL,p.fz,p.D$,p.Pv,p.U1,p.wT,h.p,f.Hq,_.Fj,_.JJ,_.Q7,_.On,b.H,T.FN,Z.o,C.o,x.Lt,A.EU,v.Rn,B.V,w.Z],encapsulation:2,data:{animation:[(0,r.X$)("rowExpansionTrigger",[(0,r.SB)("void",(0,r.oB)({transform:"translateX(-10%)",opacity:0})),(0,r.SB)("active",(0,r.oB)({transform:"translateX(0)",opacity:1})),(0,r.eR)("* <=> *",(0,r.jt)("400ms cubic-bezier(0.86, 0, 0.07, 1)"))])]}}),l})(),xt=(()=>{class l{}return l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[y.Bz.forChild([{path:"",component:Ct}]),y.Bz]}),l})();var At=c(21726),vt=c(373);let Bt=(()=>{class l{}return l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({providers:[At.v,vt.r,M],imports:[m.ez,xt,p.U$,h.O,_.u5,f.hJ,b.T,T.EV,Z.V,D.Xt,C.j,R.A,x.kW,A.cc,v.L$,B.S,w.d]}),l})()}}]);