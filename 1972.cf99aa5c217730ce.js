"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[1972],{91972:(ye,g,m)=>{m.r(g),m.d(g,{ImeiModule:()=>we});var r=m(69808),c=m(93075),s=m(98952),L=m(88205),h=m(40845),f=m(25787),b=m(17773),x=m(44534),D=m(98018),Z=m(31424),E=m(73407),C=m(14036),R=m(49603),I=m(7010),T=m(15315),v=m(51122),_=m(59783),d=m(44930),Y=m(94327),e=m(5e3),A=m(62162),N=m(84451),M=m(373),w=m(50330),q=m(70085),y=m(10930),U=m(74297),J=m(27232);function O(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"button",20),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.openNew())}),e.qZA(),e.TgZ(2,"button",21),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteSelectedImeis())}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("disabled",!t.selectedImeis||!t.selectedImeis.length)}}function k(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",22)(1,"h5",23),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",24),e._UZ(5,"i",25),e.TgZ(6,"input",26),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.getParams.searchText=n)})("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.getImeis())}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"label.imei_management")),e.xp6(4),e.Q6J("ngModel",t.getParams.searchText)}}function Q(i,a){1&i&&(e.TgZ(0,"tr")(1,"th",27),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",28)(4,"div",29),e._uU(5),e.ALo(6,"translate"),e._UZ(7,"p-sortIcon",30),e.qZA()(),e.TgZ(8,"th",31)(9,"div",32),e._uU(10),e.ALo(11,"translate"),e._UZ(12,"p-sortIcon",33),e.qZA()(),e.TgZ(13,"th",34)(14,"div",29),e._uU(15),e.ALo(16,"translate"),e._UZ(17,"p-sortIcon",35),e.qZA()(),e.TgZ(18,"th",36)(19,"div",29),e._uU(20),e.ALo(21,"translate"),e._UZ(22,"p-sortIcon",37),e.qZA()(),e.TgZ(23,"th",38)(24,"div",39),e._uU(25),e.ALo(26,"translate"),e._UZ(27,"p-sortIcon",40),e.qZA()(),e.TgZ(28,"th",41)(29,"div",32),e._uU(30),e.ALo(31,"translate"),e._UZ(32,"p-sortIcon",42),e.qZA()(),e.TgZ(33,"th",43)(34,"div",32),e._uU(35),e.ALo(36,"translate"),e._UZ(37,"p-sortIcon",44),e.qZA()()()),2&i&&(e.xp6(5),e.hij(" ",e.lcZ(6,7,"label.imei_name")," "),e.xp6(5),e.hij(" ",e.lcZ(11,9,"label.model_name")," "),e.xp6(5),e.hij(" ",e.lcZ(16,11,"label.model_number")," "),e.xp6(5),e.hij(" ",e.lcZ(21,13,"label.serial_number")," "),e.xp6(5),e.hij(" ",e.lcZ(26,15,"label.color")," "),e.xp6(5),e.hij(" ",e.lcZ(31,17,"label.capacity")," "),e.xp6(5),e.hij(" ",e.lcZ(36,19,"label.carrier_lock")," "))}function F(i,a){if(1&i&&(e.TgZ(0,"tr",45)(1,"td"),e._UZ(2,"p-tableCheckbox",46),e.qZA(),e.TgZ(3,"td",47)(4,"span",48),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._uU(7),e.qZA(),e.TgZ(8,"td",47)(9,"span",48),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._uU(12),e.qZA(),e.TgZ(13,"td",47)(14,"span",48),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._uU(17),e.qZA(),e.TgZ(18,"td",47)(19,"span",48),e._uU(20),e.ALo(21,"translate"),e.qZA(),e._uU(22),e.qZA(),e.TgZ(23,"td",49)(24,"span",48),e._uU(25),e.ALo(26,"translate"),e.qZA(),e._UZ(27,"div",50),e.qZA(),e.TgZ(28,"td",49)(29,"span",48),e._uU(30),e.ALo(31,"translate"),e.qZA(),e._uU(32),e.qZA(),e.TgZ(33,"td",47)(34,"span",48),e._uU(35),e.ALo(36,"translate"),e.qZA(),e._UZ(37,"p-badge",51),e.qZA()()),2&i){const t=a.$implicit,l=e.oxw();e.Q6J("pContextMenuRow",t),e.xp6(2),e.Q6J("value",t),e.xp6(3),e.Oqu(e.lcZ(6,18,"label.imei_name")),e.xp6(2),e.hij(" ",t.imeiName," "),e.xp6(3),e.Oqu(e.lcZ(11,20,"label.model_name")),e.xp6(2),e.hij(" ",l.getModelName(t.modelName)," "),e.xp6(3),e.Oqu(e.lcZ(16,22,"label.model_number")),e.xp6(2),e.hij(" ",t.modelNumber," "),e.xp6(3),e.Oqu(e.lcZ(21,24,"label.serial_number")),e.xp6(2),e.hij(" ",t.serialNumber," "),e.xp6(3),e.Oqu(e.lcZ(26,26,"label.color")),e.xp6(2),e.Udp("background-color",l.getImeiColor(t.color)),e.xp6(3),e.Oqu(e.lcZ(31,28,"label.capacity")),e.xp6(2),e.hij(" ",l.getImeiCapacity(t.capacity)," "),e.xp6(3),e.Oqu(e.lcZ(36,30,"label.carrier_lock")),e.xp6(2),e.Q6J("value",t.carrierLock)("severity",t.carrierLock?"success":"info")}}function j(i,a){1&i&&(e.TgZ(0,"small",71),e._uU(1,"imei code is required."),e.qZA())}function P(i,a){if(1&i&&(e.TgZ(0,"div",73),e._UZ(1,"img",74),e.TgZ(2,"div"),e._uU(3),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Tol("flag flag-vn"),e.xp6(2),e.Oqu(t.label)}}function H(i,a){if(1&i&&e.YNc(0,P,4,3,"div",72),2&i){const t=e.oxw(2);e.Q6J("ngIf",t.imei.modelName)}}function K(i,a){if(1&i&&(e.TgZ(0,"div",73),e._UZ(1,"img",74),e.TgZ(2,"div"),e._uU(3),e.qZA()()),2&i){const t=a.$implicit;e.xp6(1),e.Tol("flag flag-vn"),e.xp6(2),e.Oqu(t.label)}}function B(i,a){1&i&&(e.TgZ(0,"small",71),e._uU(1,"Model name is required."),e.qZA())}function G(i,a){1&i&&(e.TgZ(0,"small",71),e._uU(1,"Model number is required."),e.qZA())}function $(i,a){1&i&&(e.TgZ(0,"small",71),e._uU(1,"Serial number is required."),e.qZA())}function z(i,a){if(1&i&&(e.TgZ(0,"div",73),e._UZ(1,"div",50),e.TgZ(2,"div"),e._uU(3),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Udp("background-color",t.color),e.xp6(2),e.Oqu(t.label)}}function V(i,a){if(1&i&&e.YNc(0,z,4,3,"div",72),2&i){const t=e.oxw(2);e.Q6J("ngIf",t.imei.color)}}function X(i,a){if(1&i&&(e.TgZ(0,"div",73),e._UZ(1,"div",50),e.TgZ(2,"div"),e._uU(3),e.qZA()()),2&i){const t=a.$implicit;e.xp6(1),e.Udp("background-color",t.color),e.xp6(2),e.Oqu(t.label)}}function W(i,a){1&i&&(e.TgZ(0,"small",71),e._uU(1,"Color is required."),e.qZA())}function ee(i,a){if(1&i&&(e.TgZ(0,"div",73)(1,"div"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.label)}}function te(i,a){if(1&i&&e.YNc(0,ee,3,1,"div",72),2&i){const t=e.oxw(2);e.Q6J("ngIf",t.imei.capacity)}}function ie(i,a){if(1&i&&(e.TgZ(0,"div",73)(1,"div"),e._uU(2),e.qZA()()),2&i){const t=a.$implicit;e.xp6(2),e.Oqu(t.label)}}function ne(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",75)(1,"h4"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div")(5,"button",76),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onAddInsurances())}),e.qZA()()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"label.insurance_management")),e.xp6(3),e.Q6J("label","Add"))}function le(i,a){1&i&&(e.TgZ(0,"tr")(1,"th",77),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"th",77),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th",78),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th",79),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"th",78),e.qZA()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,4,"label.insurance_code")),e.xp6(3),e.Oqu(e.lcZ(6,6,"label.insurance_name")),e.xp6(3),e.Oqu(e.lcZ(9,8,"label.month")),e.xp6(3),e.Oqu(e.lcZ(12,10,"label.description")))}function oe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"input",88),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw().$implicit;return e.KtG(o.insuranceCode=n)}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("ngModel",t.insuranceCode)}}function ae(i,a){if(1&i&&e._uU(0),2&i){const t=e.oxw().$implicit;e.hij(" ",t.insuranceCode," ")}}function me(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"input",88),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw().$implicit;return e.KtG(o.insuranceName=n)}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("ngModel",t.insuranceName)}}function se(i,a){if(1&i&&e._uU(0),2&i){const t=e.oxw().$implicit;e.hij(" ",t.insuranceName," ")}}function ce(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"p-inputNumber",89),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw().$implicit;return e.KtG(o.month=n)}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("ngModel",t.month)}}function pe(i,a){if(1&i&&e._uU(0),2&i){const t=e.oxw().$implicit;e.hij(" ",t.month," ")}}function re(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"input",88),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw().$implicit;return e.KtG(o.description=n)}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("ngModel",t.description)}}function _e(i,a){if(1&i&&e._uU(0),2&i){const t=e.oxw().$implicit;e.hij(" ",t.description," ")}}function de(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",90),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.onRowEditInit(n))}),e.qZA()}}function ue(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",91),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw(2);return e.KtG(o.onRowEditSave(n))}),e.qZA()}}function ge(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",92),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),o=n.$implicit,p=n.rowIndex,qe=e.oxw(2);return e.KtG(qe.onRowEditCancel(o,p))}),e.qZA()}}function he(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"tr",80)(1,"td")(2,"p-cellEditor"),e.YNc(3,oe,1,1,"ng-template",81),e.YNc(4,ae,1,1,"ng-template",82),e.qZA()(),e.TgZ(5,"td")(6,"p-cellEditor"),e.YNc(7,me,1,1,"ng-template",81),e.YNc(8,se,1,1,"ng-template",82),e.qZA()(),e.TgZ(9,"td")(10,"p-cellEditor"),e.YNc(11,ce,1,1,"ng-template",81),e.YNc(12,pe,1,1,"ng-template",82),e.qZA()(),e.TgZ(13,"td")(14,"p-cellEditor"),e.YNc(15,re,1,1,"ng-template",81),e.YNc(16,_e,1,1,"ng-template",82),e.qZA()(),e.TgZ(17,"td")(18,"div",83),e.YNc(19,de,1,0,"button",84),e.YNc(20,ue,1,0,"button",85),e.YNc(21,ge,1,0,"button",86),e.TgZ(22,"button",87),e.NdJ("click",function(){const o=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.deleteBillDetail(o))}),e.qZA()()()()}if(2&i){const l=a.editing;e.Q6J("pEditableRow",a.$implicit),e.xp6(19),e.Q6J("ngIf",!l),e.xp6(1),e.Q6J("ngIf",l),e.xp6(1),e.Q6J("ngIf",l)}}const u=function(i){return{"ng-invalid ng-dirty":i}},fe=function(){return{"margin-bottom":"2em"}};function be(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",52)(2,"label",53),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",54),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.imei.imeiName=n)}),e.qZA(),e.YNc(6,j,2,0,"small",55),e.qZA(),e.TgZ(7,"div",52)(8,"label",56),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"p-dropdown",57),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.imei.modelName=n)}),e.YNc(12,H,1,1,"ng-template",58),e.YNc(13,K,4,3,"ng-template",59),e.qZA(),e.YNc(14,B,2,0,"small",55),e.qZA(),e.TgZ(15,"div",52)(16,"label",60),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"input",61),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.imei.modelNumber=n)}),e.qZA(),e.YNc(20,G,2,0,"small",55),e.qZA(),e.TgZ(21,"div",52)(22,"label",62),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"input",63),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.imei.serialNumber=n)}),e.qZA(),e.YNc(26,$,2,0,"small",55),e.qZA(),e.TgZ(27,"div",52)(28,"label",64),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"p-dropdown",57),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.imei.color=n)}),e.YNc(32,V,1,1,"ng-template",58),e.YNc(33,X,4,3,"ng-template",59),e.qZA(),e.YNc(34,W,2,0,"small",55),e.qZA(),e.TgZ(35,"div",65)(36,"label",66),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"p-inputSwitch",67),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.imei.carrierLock=n)}),e.qZA()(),e.TgZ(40,"div",68)(41,"label",69),e._uU(42),e.ALo(43,"translate"),e.qZA(),e.TgZ(44,"p-dropdown",57),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.imei.capacity=n)}),e.YNc(45,te,1,1,"ng-template",58),e.YNc(46,ie,3,1,"ng-template",59),e.qZA()(),e.TgZ(47,"p-card",3),e.YNc(48,ne,6,4,"ng-template",10),e.TgZ(49,"p-table",70),e.YNc(50,le,14,12,"ng-template",10),e.YNc(51,he,23,4,"ng-template",11),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,43,"label.imei_name")),e.xp6(2),e.Q6J("ngModel",t.imei.imeiName)("ngClass",e.VKq(57,u,t.submitted&&!t.imei.imeiName)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.imei.imeiName),e.xp6(3),e.Oqu(e.lcZ(10,45,"label.model_name")),e.xp6(2),e.Q6J("options",t.modelNames)("ngModel",t.imei.modelName)("optionLabel","label")("optionValue","code")("filter",!0)("showClear",!0)("appendTo","body"),e.xp6(3),e.Q6J("ngIf",t.submitted&&!t.imei.modelName),e.xp6(3),e.Oqu(e.lcZ(18,47,"label.model_number")),e.xp6(2),e.Q6J("ngModel",t.imei.modelNumber)("ngClass",e.VKq(59,u,t.submitted&&!t.imei.modelNumber)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.imei.modelNumber),e.xp6(3),e.Oqu(e.lcZ(24,49,"label.serial_number")),e.xp6(2),e.Q6J("ngModel",t.imei.serialNumber)("ngClass",e.VKq(61,u,t.submitted&&!t.imei.serialNumber)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.imei.serialNumber),e.xp6(3),e.Oqu(e.lcZ(30,51,"label.color")),e.xp6(2),e.Q6J("options",t.imeiColors)("ngModel",t.imei.color)("optionLabel","label")("optionValue","code")("filter",!0)("showClear",!0)("appendTo","body"),e.xp6(3),e.Q6J("ngIf",t.submitted&&!t.imei.color),e.xp6(3),e.Oqu(e.lcZ(38,53,"label.carrier_lock")),e.xp6(2),e.Q6J("ngModel",t.imei.carrierLock),e.xp6(3),e.Oqu(e.lcZ(43,55,"label.capacity")),e.xp6(2),e.Q6J("options",t.imeiCapacities)("ngModel",t.imei.capacity)("optionLabel","label")("optionValue","code")("filter",!0)("showClear",!0)("appendTo","body"),e.xp6(3),e.Akn(e.DdM(63,fe)),e.xp6(2),e.Q6J("value",t.insurances)}}function xe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",93),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.hideDialog())}),e.qZA(),e.TgZ(1,"button",94),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.saveImei())}),e.qZA()}}function Ze(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1,"Are you sure you want to delete "),e.TgZ(2,"b"),e._uU(3),e.qZA(),e._uU(4,"?"),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(t.imei.imeiName)}}function Ce(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",95),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteImeiDialog=!1)}),e.qZA(),e.TgZ(1,"button",96),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.confirmDelete())}),e.qZA()}}function Ie(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",95),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteImeisDialog=!1)}),e.qZA(),e.TgZ(1,"button",96),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.confirmDeleteSelected())}),e.qZA()}}const Te=function(){return["imeiName","imeiName","phone","email","address"]},ve=function(){return[5,10,20]},Ae=function(){return{width:"100rem"}},S=function(){return{width:"450px"}};let Ne=(()=>{class i{constructor(t,l,n,o){this.imeiService=t,this.billService=l,this.accessoryService=n,this.messageService=o,this.appUtil=d.Z,this.imeiDialog=!1,this.deleteImeiDialog=!1,this.deleteImeisDialog=!1,this.imeis=[],this.insurances=[],this.imei={},this.selectedImeis=[],this.selectedImei={},this.submitted=!1,this.cols=[],this.items=[],this.rowsPerPageOptions=[5,10,20],this.modelNames=this.appUtil.getModelNames(),this.imeiColors=this.appUtil.getImeiColor(),this.imeiCapacities=this.appUtil.getImeiCapacities(),this.loading=!1,this.getParams={page:0,pageSize:5,sortField:"id",isSort:!0,searchText:""},this.lstImeis=[],this.totalRecords=0,this.totalPages=0,this.first=0,this.bills=[],this.accessories=[],this.clonedProducts={}}ngOnInit(){this.getListBill(),this.getListAccessory(),this.cols=[{field:"imeiName",header:"Imei name"},{field:"modelName",header:"Model name"},{field:"modelNumber",header:"Model number"},{field:"serialNumber",header:"Serial number"},{field:"capacity",header:"Capacity"},{field:"carrierLock",header:"Carrier lock"}],this.items=[{label:"View",icon:"pi pi-fw pi-search",command:()=>{this.editImei(this.selectedImei)}},{label:"Delete",icon:"pi pi-fw pi-times",command:()=>{this.deleteImei(this.selectedImei)}}]}getImeis(t,l=!1){this.pendingRequest&&this.pendingRequest.unsubscribe(),this.loading=!0,t&&(console.log(t),this.getParams.page=t.first/t.rows,this.getParams.pageSize=t.rows+1,this.getParams.sortField=t.sortField,this.getParams.isSort=1===t.sortOrder),l&&this.imeiService.getExcelReport(this.getParams).subscribe(n=>{d.Z.scrollToTop(),this.openDownloadFile(n.data,"excel")}),Object.keys(this.getParams).forEach(n=>null==this.getParams[n]&&delete this.getParams[n]),this.pendingRequest=this.imeiService.getPagingImei(this.getParams).subscribe(n=>{d.Z.scrollToTop(),this.lstImeis=n.data,this.totalRecords=n.totalItems||0,this.totalPages=n.totalItems/n.pageSize,console.log(this.lstImeis),this.loading=!1})}getModelName(t){let l=this.modelNames.find(n=>n.code===t);return l?l.label:""}getImeiColor(t){let l=this.imeiColors.find(n=>n.code===t);return l?l.color:""}getImeiCapacity(t){let l=this.imeiCapacities.find(n=>n.code===t);return l?l.label:""}openDownloadFile(t,l){try{var n=this.imeiService.getFolderPathDownload(t,l);n&&window.open(n)}catch(o){this.messageService.add({severity:"error",summary:"Error Message",detail:"File invalid"})}}openNew(){this.imei={},this.insurances=[],this.submitted=!1,this.imeiDialog=!0}deleteSelectedImeis(){this.deleteImeisDialog=!0}editImei(t){this.imei=Object.assign({},t),this.insurances=this.imei.insurances||[],this.imeiDialog=!0}deleteImei(t){this.deleteImeiDialog=!0,this.imei=Object.assign({},t)}confirmDeleteSelected(){this.imeiService.deleteMultipleImei(this.selectedImeis.map(t=>t.id)).subscribe(()=>{this.deleteImeisDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Imei Deleted",life:3e3}),this.selectedImeis=[],this.getImeis()})}confirmDelete(){this.imeiService.deleteImei(this.imei.id).subscribe(t=>{this.deleteImeiDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Imei Deleted",life:3e3}),this.imei={},this.getImeis()})}hideDialog(){this.imeiDialog=!1,this.submitted=!1,this.imei={},this.getImeis()}saveImei(){this.submitted=!0,this.insurances.forEach(t=>{t.billId=t.bilL_ID||t.billId,t.imeiId=t.imeI_ID||t.imeiId,t.accessoryId=t.accessorY_ID||t.accessoryId}),this.imei.insurances=this.insurances,this.imei.id?this.imeiService.updateImei(this.cleanObject(this.imei),this.imei.id).subscribe(t=>{this.messageService.add({severity:"success",summary:"Successful",detail:"Imei Updated",life:3e3}),this.hideDialog()}):(this.imei.id=0,this.imeiService.createImei(this.cleanObject(this.imei)).subscribe(t=>{this.messageService.add({severity:"success",summary:"Successful",detail:"Imei Created",life:3e3}),this.hideDialog()}))}getListBill(){this.billService.getAllBills().subscribe(t=>{this.bills=t.data})}getListAccessory(){this.accessoryService.getAllAccessor().subscribe(t=>{this.accessories=t.data})}getBillName(t){let l=this.bills.find(n=>n.id===t);return l?l.billCode:""}getAccessoryName(t){let l=this.accessories.find(n=>n.id===t);return l?l.accessoryName:""}onAddInsurances(){var t;this.insurances.push({bilL_ID:0,billId:0,imeI_ID:(null===(t=this.imei)||void 0===t?void 0:t.id)||0,imeiId:0,accessorY_ID:0,accessoryId:0,insuranceCode:"",insuranceName:"",month:0,isGeneral:!1,description:""})}onRowEditInit(t){this.clonedProducts[t.id]=Object.assign({},t)}onRowEditSave(t){delete this.clonedProducts[t.id]}onRowEditCancel(t,l){this.accessories[l]=this.clonedProducts[t.id],delete this.clonedProducts[t.id]}deleteBillDetail(t){console.log(t),this.insurances=this.insurances.filter(l=>l!==t)}cleanObject(t){return Object.assign({},t)}findIndexById(t){let l=-1;for(let n=0;n<this.imeis.length;n++)if(this.imeis[n].id===t){l=n;break}return l}onGlobalFilter(t,l){t.filterGlobal(l.target.value,"contains")}exportPdf(){m.e(3583).then(m.bind(m,53583)).then(t=>{Promise.all([m.e(3583),m.e(2983)]).then(m.t.bind(m,12983,23)).then(l=>{(new t.default).autoTable(this.cols,this.imeis)})})}exportExcel(){m.e(574).then(m.bind(m,80574)).then(t=>{const n={Sheets:{data:t.utils.json_to_sheet(this.imeis)},SheetNames:["data"]},o=t.write(n,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(o,"imeis")})}saveAsExcelFile(t,l){const p=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Y.saveAs(p,l+"_export_"+(new Date).getTime()+".xlsx")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(A.s),e.Y36(N.C),e.Y36(M.r),e.Y36(_.ez))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e._Bn([_.ez])],decls:28,vars:36,consts:[[3,"model"],["cm",""],[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","first","lazy","totalRecords","selection","contextMenu","contextMenuSelection","rowHover","firstChange","onLazyLoad","selectionChange","contextMenuSelectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"p-fluid",3,"visible","header","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","label","Delete","icon","pi pi-trash",1,"p-button-danger",3,"disabled","click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",1,"w-full","sm:w-auto",3,"ngModel","ngModelChange","change"],[2,"width","3rem"],["pSortableColumn","imeiName"],[1,"flex","align-items-center","w-9rem"],["field","imeiName"],["pSortableColumn","modelName"],[1,"flex","align-items-center","w-8rem"],["field","modelName"],["pSortableColumn","modelNumber"],["field","modelNumber"],["pSortableColumn","serialNumber"],["field","serialNumber"],["pSortableColumn","color"],[1,"flex","align-items-center","w-6rem"],["field","color"],["pSortableColumn","capacity"],["field","capacity"],["pSortableColumn","carrierLock"],["field","carrierLock"],[1,"cursor-pointer",3,"pContextMenuRow"],[3,"value"],[1,"w-2"],[1,"p-column-title"],[1,"w-1"],[1,"imei-color"],[3,"value","severity"],[1,"field","col-12","sm:col-6"],["for","imeiName"],["type","text","pInputText","","id","imeiName","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","modelName"],["filterBy","label",3,"options","ngModel","optionLabel","optionValue","filter","showClear","appendTo","ngModelChange"],["pTemplate","selectedItem"],["pTemplate","item"],["for","modelNumber"],["type","text","pInputText","","id","modelNumber","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["for","serialNumber"],["type","text","pInputText","","id","serialNumber","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["for","color"],[1,"field","col-12","sm:col-6","flex","flex-column"],["for","carrierLock"],[1,"pt-2",3,"ngModel","ngModelChange"],[1,"field","col-12"],["for","capacity"],["dataKey","id","editMode","row",3,"value"],[1,"ng-dirty","ng-invalid"],["class","flex align-items-center gap-2",4,"ngIf"],[1,"flex","align-items-center","gap-2"],["src","https://primefaces.org/cdn/primeng/images/demo/flag/flag_placeholder.png"],[1,"flex","justify-content-between","px-4","pt-4"],["pButton","","pRipple","","icon","pi pi-plus",3,"label","click"],[2,"width","20%"],[2,"width","15%"],[2,"width","30%"],[3,"pEditableRow"],["pTemplate","input"],["pTemplate","output"],[1,"flex","align-items-center","justify-content-center","gap-2"],["pButton","","pRipple","","icon","pi pi-pencil","class","p-button-rounded p-button-warning","pInitEditableRow","",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check","class","p-button-rounded p-button-text p-button-success mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times","class","p-button-rounded p-button-text p-button-danger",3,"click",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"],["pInputText","","type","text","required","",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["pButton","","pRipple","","icon","pi pi-pencil","pInitEditableRow","",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check",1,"p-button-rounded","p-button-text","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times",1,"p-button-rounded","p-button-text","p-button-danger",3,"click"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",3,"click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",3,"click"]],template:function(t,l){if(1&t&&(e._UZ(0,"p-contextMenu",0,1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"p-toast"),e.TgZ(6,"p-toolbar",5),e.YNc(7,O,3,1,"ng-template",6),e.qZA(),e.TgZ(8,"p-table",7,8),e.NdJ("firstChange",function(o){return l.first=o})("onLazyLoad",function(o){return l.getImeis(o)})("selectionChange",function(o){return l.selectedImeis=o})("contextMenuSelectionChange",function(o){return l.selectedImei=o}),e.YNc(10,k,7,4,"ng-template",9),e.YNc(11,Q,38,21,"ng-template",10),e.YNc(12,F,38,32,"ng-template",11),e.qZA()(),e.TgZ(13,"p-dialog",12),e.NdJ("visibleChange",function(o){return l.imeiDialog=o}),e.ALo(14,"translate"),e.YNc(15,be,52,64,"ng-template",13),e.YNc(16,xe,2,0,"ng-template",14),e.qZA(),e.TgZ(17,"p-dialog",15),e.NdJ("visibleChange",function(o){return l.deleteImeiDialog=o}),e.TgZ(18,"div",16),e._UZ(19,"i",17),e.YNc(20,Ze,5,1,"span",18),e.qZA(),e.YNc(21,Ce,2,0,"ng-template",14),e.qZA(),e.TgZ(22,"p-dialog",15),e.NdJ("visibleChange",function(o){return l.deleteImeisDialog=o}),e.TgZ(23,"div",16),e._UZ(24,"i",17),e.TgZ(25,"span"),e._uU(26,"Are you sure you want to delete selected imeis?"),e.qZA()(),e.YNc(27,Ie,2,0,"ng-template",14),e.qZA()()()),2&t){const n=e.MAs(1);e.Q6J("model",l.items),e.xp6(8),e.Q6J("value",l.lstImeis)("columns",l.cols)("rows",10)("globalFilterFields",e.DdM(31,Te))("paginator",!0)("rowsPerPageOptions",e.DdM(32,ve))("showCurrentPageReport",!0)("first",l.first)("lazy",!0)("totalRecords",l.totalRecords)("selection",l.selectedImeis)("contextMenu",n)("contextMenuSelection",l.selectedImei)("rowHover",!0),e.xp6(5),e.Akn(e.DdM(33,Ae)),e.Q6J("visible",l.imeiDialog)("header",e.lcZ(14,29,l.appUtil.isEmpty(l.imei)?"label.imei_add":"label.imei_edit"))("modal",!0),e.xp6(4),e.Akn(e.DdM(34,S)),e.Q6J("visible",l.deleteImeiDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",l.imei),e.xp6(2),e.Akn(e.DdM(35,S)),e.Q6J("visible",l.deleteImeisDialog)("modal",!0)}},dependencies:[w.xV,r.mk,r.O5,s.iA,_.jx,s.lQ,s.zi,s.YL,s.fz,s.UA,s.Mo,s.D$,s.Pv,s.U1,s.wT,h.Hq,c.Fj,c.JJ,c.Q7,c.On,f.H,b.FN,x.o,Z.o,C.Lt,I.Rn,T.V,q.Ct,y.Ql,U.Z,J.X$],encapsulation:2}),i})(),Me=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[v.Bz.forChild([{path:"",component:Ne}]),v.Bz]}),i})(),we=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[A.s,N.C,M.r],imports:[w.vI,J.aw,r.ez,Me,s.U$,L.O,c.u5,h.hJ,f.T,b.EV,x.V,D.Xt,Z.j,E.A,C.kW,R.cc,I.L$,T.S,q.TX,y.Iu,U.d]}),i})()}}]);