"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[5448],{5448:(D,x,a)=>{a.r(x),a.d(x,{AuthorityGroupModule:()=>z});var d=a(6814),e=a(6223),Z=a(9241),h=a(5219),C=a(8645),A=a(9773),E=a(4716),f=a(5118),v=a(7398),U=a(8860),t=a(8109),r=a(9862);let c=(()=>{class i{constructor(n){this.http=n,this.baseUrl=U.N.serverURL+"role"}list(){return this.http.get(this.baseUrl).pipe((0,v.U)(n=>n?.data?.length?n?.data:[]))}add(n){return this.http.post(this.baseUrl,n).pipe((0,v.U)(o=>o))}edit(n,o){return this.http.put(`${this.baseUrl}/${o}`,n).pipe((0,v.U)(l=>l))}delete(n){return this.http.delete(`${this.baseUrl}/${n}`).pipe((0,v.U)(o=>o))}static#t=this.\u0275fac=function(o){return new(o||i)(t.LFG(r.eN))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var s=a(3714),u=a(6218),p=a(707),b=a(4480),y=a(3965),T=a(3999);function _(i,L){1&i&&(t.ynx(0),t.TgZ(1,"small",9),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"WARNING.ROLE_NAME_REQUIRED")," "))}let G=(()=>{class i{constructor(n,o,l){this.fb=n,this.dialogRef=o,this.baseService$=l,this.config=(0,t.f3M)(f.S),this.submitted=!1,this.unsubscribe=new C.x,this.branches=[],this.form=this.fb.group({name:new e.NI("",[e.kI.required])}),this._baseData=this.config.data}ngOnInit(){["edit","info"].includes(this._baseData.mode)&&this.form.patchValue({name:this._baseData.data.name})}onSubmit(){this.submitted=!0,!this.form.invalid&&("add"===this._baseData.mode?this.baseService$.add(this.form.value):this.baseService$.edit(this.form.value,this._baseData.data.id)).pipe((0,A.R)(this.unsubscribe)).subscribe({next:n=>{n&&this.dialogRef.close({isSuccess:!0})}})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(e.qu),t.Y36(f.E7),t.Y36(c))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-authority-group-form"]],standalone:!0,features:[t.jDz],decls:14,vars:15,consts:[[3,"formGroup"],[1,"p-fluid","p-formgrid","grid","m-0"],[1,"p-float-label","field","col-12","md:col-6","pl-1"],["pInputText","","id","name","type","text","formControlName","name"],["for","name",1,"require-label"],[4,"ngIf"],[1,"flex","justify-content-end","gap-2"],["pButton","","pRipple","","type","button",1,"p-button-outlined",3,"label","click"],["pButton","","pRipple","","type","button",3,"label","click"],[1,"p-error"]],template:function(o,l){1&o&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2),t._UZ(3,"input",3),t.TgZ(4,"label",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.YNc(7,_,4,3,"ng-container",5),t.qZA()(),t._UZ(8,"hr"),t.TgZ(9,"div",6)(10,"button",7),t.NdJ("click",function(){return l.dialogRef.close()}),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"button",8),t.NdJ("click",function(){return l.onSubmit()}),t.ALo(13,"translate"),t.qZA()()()),2&o&&(t.Q6J("formGroup",l.form),t.xp6(3),t.ekj("ng-invalid",l.submitted&&l.form.get("name").invalid)("ng-dirty",l.submitted&&l.form.get("name").invalid),t.xp6(2),t.Oqu(t.lcZ(6,9,"LABEL.ROLE_NAME")),t.xp6(2),t.Q6J("ngIf",l.submitted&&l.form.get("name").invalid),t.xp6(3),t.Q6J("label",t.lcZ(11,11,"BUTTON.CANCEL")),t.xp6(2),t.Q6J("label",t.lcZ(13,13,"BUTTON.SAVE")))},dependencies:[s.j,s.o,u.A,p.hJ,p.Hq,e.u5,e._Y,e.Fj,e.JJ,e.JL,e.UX,e.sg,e.u,b.T,b.H,d.O5,y.kW,T.aw,T.X$],encapsulation:2})}return i})();var I=a(3859),B=a(9552),S=a(3904);function R(i,L){if(1&i){const n=t.EpF();t.TgZ(0,"div",7)(1,"div",8)(2,"span",9),t._UZ(3,"i",10),t.TgZ(4,"input",11),t.NdJ("keyup.enter",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.initData())}),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"h2",12),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"button",13),t.NdJ("click",function(){t.CHM(n);const l=t.oxw();return t.KtG(l.onManage("add","LABEL.ADD"))}),t.qZA()()}2&i&&(t.xp6(4),t.Q6J("placeholder",t.lcZ(5,2,"LABEL.SEARCH_TEXT")),t.xp6(3),t.Oqu(t.lcZ(8,4,"LABEL.RIGHTS_GROUP_LIST")))}function M(i,L){1&i&&(t.TgZ(0,"tr")(1,"th",14),t._uU(2,"ID"),t.qZA(),t.TgZ(3,"th",15),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",16),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",17),t._uU(10),t.ALo(11,"translate"),t.qZA()()),2&i&&(t.xp6(4),t.hij(" ",t.lcZ(5,3,"LABEL.RIGHTS_GROUP_NAME")," "),t.xp6(3),t.hij(" ",t.lcZ(8,5,"LABEL.LEVEL")," "),t.xp6(3),t.hij(" ",t.lcZ(11,7,"LABEL.ACTION")," "))}function O(i,L){if(1&i){const n=t.EpF();t.TgZ(0,"tr")(1,"td",18),t._uU(2),t.qZA(),t.TgZ(3,"td",15),t._uU(4),t.qZA(),t.TgZ(5,"td",16),t._uU(6),t.qZA(),t.TgZ(7,"td",19)(8,"div",20)(9,"button",21),t.NdJ("click",function(){const m=t.CHM(n).$implicit,g=t.oxw();return t.KtG(g.onManage("edit","LABEL.EDIT",m))}),t.qZA(),t.TgZ(10,"button",22),t.NdJ("click",function(){const m=t.CHM(n).$implicit,g=t.oxw();return t.KtG(g.onDelete(m))}),t.qZA()()()()}if(2&i){const n=L.$implicit;t.xp6(2),t.hij(" ",n.id," "),t.xp6(2),t.hij(" ",null==n?null:n.name," "),t.xp6(2),t.Oqu(null==n?null:n.roleLevel)}}let N=(()=>{class i{constructor(n,o,l,m,g){this.baseService$=n,this.confirmationService=o,this.translateService=l,this.dialogService=m,this.layoutService$=g,this.isMobile=!1,this.data=[],this.unsubscribe=new C.x}ngOnInit(){this.isMobile=this.layoutService$.isMobile(),this.initData()}initData(){this.layoutService$.globalLoading.next(!0),this.baseService$.list().pipe((0,A.R)(this.unsubscribe),(0,E.x)(()=>{this.layoutService$.globalLoading.next(!1)})).subscribe(n=>{this.data=n})}onManage(n,o,l){this.dialogService.open(G,{data:{mode:n,data:l},header:this.translateService.instant(o),width:"50vw",maximizable:!0}).onClose.subscribe(g=>{g?.isSuccess&&this.initData()})}onDelete(n){this.confirmationService.confirm({message:this.translateService.instant("INFO.ARE_YOUR_SURE_DELETE_RECORD"),header:this.translateService.instant("LABEL.CONFIRM"),icon:"pi pi-exclamation-triangle",acceptLabel:this.translateService.instant("BUTTON.ACCEPT"),rejectLabel:this.translateService.instant("BUTTON.CANCEL"),accept:()=>this.doDelete(n)})}doDelete(n){this.baseService$.delete(n.id).pipe((0,A.R)(this.unsubscribe)).subscribe({next:o=>{o&&this.initData()}})}ngOnDestroy(){this.unsubscribe.next({}),this.unsubscribe.complete()}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(c),t.Y36(h.YP),t.Y36(T.sK),t.Y36(f.xA),t.Y36(I.P))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],features:[t._Bn([h.ez,h.YP,c,f.xA])],decls:8,vars:3,consts:[[1,"grid"],[1,"col-12","p-0"],[1,"card"],[3,"value","scrollable","responsiveLayout"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","justify-content-between"],[1,"flex","align-items-center","gap-4"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text",1,"w-full",3,"placeholder","keyup.enter"],[1,"m-0"],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button-rounded","p-button-success",3,"click"],["pFrozenColumn","",2,"width","50px"],[2,"width","400px"],[2,"width","200px"],["pFrozenColumn","","alignFrozen","right",2,"width","100px"],["pFrozenColumn","",1,"font-bold",2,"width","50px"],["pFrozenColumn","","alignFrozen","right",1,"font-bold",2,"width","100px"],[1,"flex","gap-2"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"]],template:function(o,l){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-table",3),t.YNc(4,R,10,6,"ng-template",4)(5,M,12,9,"ng-template",5)(6,O,11,3,"ng-template",6),t.qZA()()()(),t._UZ(7,"p-confirmDialog")),2&o&&(t.xp6(3),t.Q6J("value",l.data)("scrollable",!0)("responsiveLayout",l.isMobile?"stack":"scroll"))},dependencies:[B.iA,h.jx,B.on,p.Hq,s.o,b.H,S.Q,T.X$],encapsulation:2})}return i})(),J=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[Z.Bz.forChild([{path:"",component:N}]),Z.Bz]})}return i})();var F=a(6804),P=a(4055),j=a(6651),$=a(4104),k=a(7902),w=a(6022);let z=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[d.ez,J,e.u5,B.U$,w.Xt,p.hJ,k.JH,s.j,F.KZ,b.T,P.q4,y.kW,j.q,$.EV,S.D,T.aw]})}return i})()},6651:(D,x,a)=>{a.d(x,{k:()=>U,q:()=>t});var d=a(6814),e=a(8109),Z=a(5219);function h(r,c){if(1&r&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&r){const s=e.oxw(2);e.Udp("display",null!=s.value&&0!==s.value?"flex":"none"),e.uIk("data-pc-section","label"),e.xp6(1),e.AsE("",s.value,"",s.unit,"")}}function C(r,c){1&r&&e.GkF(0)}const A=r=>({$implicit:r});function E(r,c){if(1&r&&(e.TgZ(0,"div",3)(1,"div",4),e.YNc(2,h,2,5,"div",5)(3,C,1,0,"ng-container",6),e.qZA()()),2&r){const s=e.oxw();e.Udp("width",s.value+"%")("background",s.color),e.uIk("data-pc-section","value"),e.xp6(2),e.Q6J("ngIf",s.showValue&&!s.contentTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",s.contentTemplate)("ngTemplateOutletContext",e.VKq(8,A,s.value))}}function f(r,c){if(1&r&&(e.TgZ(0,"div",7),e._UZ(1,"div",8),e.qZA()),2&r){const s=e.oxw();e.uIk("data-pc-section","container"),e.xp6(1),e.Udp("background",s.color),e.uIk("data-pc-section","value")}}const v=(r,c)=>({"p-progressbar p-component":!0,"p-progressbar-determinate":r,"p-progressbar-indeterminate":c});let U=(()=>{class r{value;showValue=!0;styleClass;style;unit="%";mode="determinate";color;templates;contentTemplate;ngAfterContentInit(){this.templates?.forEach(s=>{s.getType(),this.contentTemplate=s.template})}static \u0275fac=function(u){return new(u||r)};static \u0275cmp=e.Xpm({type:r,selectors:[["p-progressBar"]],contentQueries:function(u,p,b){if(1&u&&e.Suo(b,Z.jx,4),2&u){let y;e.iGM(y=e.CRH())&&(p.templates=y)}},hostAttrs:[1,"p-element"],inputs:{value:"value",showValue:"showValue",styleClass:"styleClass",style:"style",unit:"unit",mode:"mode",color:"color"},decls:3,vars:14,consts:[["role","progressbar",3,"ngStyle","ngClass"],["class","p-progressbar-value p-progressbar-value-animate","style","display:flex",3,"width","background",4,"ngIf"],["class","p-progressbar-indeterminate-container",4,"ngIf"],[1,"p-progressbar-value","p-progressbar-value-animate",2,"display","flex"],[1,"p-progressbar-label"],[3,"display",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-progressbar-indeterminate-container"],[1,"p-progressbar-value","p-progressbar-value-animate"]],template:function(u,p){1&u&&(e.TgZ(0,"div",0),e.YNc(1,E,4,10,"div",1)(2,f,2,4,"div",2),e.qZA()),2&u&&(e.Tol(p.styleClass),e.Q6J("ngStyle",p.style)("ngClass",e.WLB(11,v,"determinate"===p.mode,"indeterminate"===p.mode)),e.uIk("aria-valuemin",0)("aria-valuenow",p.value)("aria-valuemax",100)("data-pc-name","progressbar")("data-pc-section","root"),e.xp6(1),e.Q6J("ngIf","determinate"===p.mode),e.xp6(1),e.Q6J("ngIf","indeterminate"===p.mode))},dependencies:[d.mk,d.O5,d.tP,d.PC],styles:['@layer primeng{.p-progressbar{position:relative;overflow:hidden}.p-progressbar-determinate .p-progressbar-value{height:100%;width:0%;position:absolute;display:none;border:0 none;display:flex;align-items:center;justify-content:center;overflow:hidden}.p-progressbar-determinate .p-progressbar-label{display:inline-flex}.p-progressbar-determinate .p-progressbar-value-animate{transition:width 1s ease-in-out}.p-progressbar-indeterminate .p-progressbar-value:before{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim 2.1s cubic-bezier(.65,.815,.735,.395) infinite}.p-progressbar-indeterminate .p-progressbar-value:after{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;animation-delay:1.15s}}@keyframes p-progressbar-indeterminate-anim{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@keyframes p-progressbar-indeterminate-anim-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}\n'],encapsulation:2,changeDetection:0})}return r})(),t=(()=>{class r{static \u0275fac=function(u){return new(u||r)};static \u0275mod=e.oAB({type:r});static \u0275inj=e.cJS({imports:[d.ez]})}return r})()}}]);