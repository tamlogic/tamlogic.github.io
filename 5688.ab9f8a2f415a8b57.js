"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[5688],{5688:(U,Z,o)=>{o.r(Z),o.d(Z,{ManagerModule:()=>tt});var h=o(6814),e=o(6223),L=o(9241),v=o(5219),N=o(8645),f=o(9773),_=o(4716),A=o(5118),I=o(819),t=o(8109),T=o(3714),s=o(6218),c=o(707),l=o(4480),u=o(3965),p=o(3999),C=o(5399),b=o(7398),M=o(8860),R=o(9862);let y=(()=>{class a{constructor(n){this.http=n,this.baseUrl=M.N.serverURL+"nguoiquanly"}list(){return this.http.get(this.baseUrl).pipe((0,b.U)(n=>n?.data?.length?n?.data:[]))}add(n){return this.http.post(this.baseUrl,n).pipe((0,b.U)(r=>r))}edit(n,r){return this.http.put(`${this.baseUrl}/${r}`,n).pipe((0,b.U)(i=>i))}delete(n){return this.http.delete(`${this.baseUrl}/${n}`).pipe((0,b.U)(r=>r))}static#t=this.\u0275fac=function(r){return new(r||a)(t.LFG(R.eN))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var D=o(6203),S=o(6235);function B(a,m){1&a&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&a&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"WARNING.MANAGER_NUMBER_INVALID")," "))}function O(a,m){1&a&&(t._uU(0),t.ALo(1,"translate")),2&a&&t.hij(" ",t.lcZ(1,1,"WARNING.MANAGER_NUMBER_REQUIRED")," ")}function Q(a,m){if(1&a&&(t.ynx(0),t.TgZ(1,"small",22),t.YNc(2,B,3,3,"ng-container",23)(3,O,2,3,"ng-template",null,24,t.W1O),t.qZA(),t.BQk()),2&a){const n=t.MAs(4),r=t.oxw();t.xp6(2),t.Q6J("ngIf",r.form.get("maSoQl").hasError("pattern"))("ngIfElse",n)}}function F(a,m){1&a&&(t.ynx(0),t.TgZ(1,"small",22),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&a&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"WARNING.TYPE_RULE_REQUIRED")))}function H(a,m){1&a&&(t.ynx(0),t.TgZ(1,"small",22),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&a&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"WARNING.ACCOUNT_NAME_REQUIRED")))}function J(a,m){1&a&&(t.ynx(0),t.TgZ(1,"small",22),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&a&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"WARNING.FULLNAME_REQUIRED")))}let q=(()=>{class a{constructor(n,r,i,d,g){this.fb=n,this.dialogRef=r,this.baseService$=i,this.roleService=d,this.branchService$=g,this.config=(0,t.f3M)(A.S),this.submitted=!1,this.unsubscribe=new N.x,this.branches=[],this.roles=[],this._baseData=this.config.data,this.form=this.fb.group({CHINHANH_ID:new e.NI({value:void 0,disabled:!0},[e.kI.required]),ROL_ID:new e.NI({value:void 0,disabled:!0},[e.kI.required]),userName:new e.NI("",[e.kI.required]),password:new e.NI(""),nhapLaiMK:new e.NI(""),hoTen:new e.NI("",[e.kI.required]),maSoQl:new e.NI("",[e.kI.required,e.kI.pattern(C.Z.PATTERNS.NO_SPACE_AND_UNICODE_UTF8)])})}ngOnInit(){this.getListBranch(),this.getLisRole(),["edit","info"].includes(this._baseData.mode)&&this.form.patchValue({CHINHANH_ID:this._baseData.data.CHINHANH_ID,ROL_ID:this._baseData.data.ROL_ID,maSoQl:this._baseData.data.maSoQl,userName:this._baseData.data.userName,password:"",nhapLaiMK:"",hoTen:this._baseData.data.hoTen})}getListBranch(){this.branchService$.list().pipe((0,f.R)(this.unsubscribe)).subscribe(n=>{n?.length&&(this.branches=n,this.form.patchValue({CHINHANH_ID:this.branches[0].id}))})}getLisRole(){this.roleService.getRoles().pipe((0,f.R)(this.unsubscribe)).subscribe(n=>{n?.length&&(this.roles=n,this.form.patchValue({ROL_ID:this.roles[0].id}))})}onSubmit(){if(this.submitted=!0,this.form.invalid)return;const n={...this.form.value,CHINHANH_ID:this._baseData?.data?.CHINHANH_ID||this.branches[0].id,ROL_ID:this._baseData?.data?.ROL_ID||this.roles[0].id};delete n.nhapLaiMK,("add"===this._baseData.mode?this.baseService$.add(n):this.baseService$.edit(n,this._baseData.data.id)).pipe((0,f.R)(this.unsubscribe)).subscribe({next:r=>{r?.errorCode||this.dialogRef.close({isSuccess:!0})}})}static#t=this.\u0275fac=function(r){return new(r||a)(t.Y36(e.qu),t.Y36(A.E7),t.Y36(y),t.Y36(D.N),t.Y36(S.b))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-manager-form"]],standalone:!0,features:[t.jDz],decls:47,vars:50,consts:[[3,"formGroup"],[1,"p-fluid","p-formgrid","grid","m-0"],[1,"p-float-label","field","col-12"],["id","drpChiNhanh","optionLabel","tenChiNhanh","optionValue","id","formControlName","CHINHANH_ID","appendTo","body",3,"options"],["for","drpChiNhanh",1,"require-label"],[1,"p-float-label","field","col-12","pr-1"],["pInputText","","id","maSoQl","formControlName","maSoQl","type","text"],["for","maSoQl",1,"require-label"],[4,"ngIf"],["id","drpLoaiQuyen","optionLabel","name","optionValue","id","formControlName","ROL_ID","appendTo","body",3,"options"],["for","drpLoaiQuyen",1,"require-label"],["pInputText","","id","userName","formControlName","userName","type","text"],["for","userName",1,"require-label"],["pInputText","","id","password","formControlName","password","type","text"],["for","password"],["pInputText","","id","nhapLaiMK","formControlName","nhapLaiMK","type","text"],["for","nhapLaiMK"],["pInputText","","id","hoTen","formControlName","hoTen","type","text"],["for","hoTen",1,"require-label"],[1,"flex","justify-content-end","gap-2"],["pButton","","pRipple","","type","button",1,"p-button-outlined",3,"label","click"],["pButton","","pRipple","","type","button",3,"label","click"],[1,"p-error"],[4,"ngIf","ngIfElse"],["empty",""]],template:function(r,i){1&r&&(t.TgZ(0,"form",0)(1,"div",1)(2,"span",2),t._UZ(3,"p-dropdown",3),t.TgZ(4,"label",4),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"div",5),t._UZ(8,"input",6),t.TgZ(9,"label",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.YNc(12,Q,5,2,"ng-container",8),t.qZA(),t.TgZ(13,"span",2),t._UZ(14,"p-dropdown",9),t.TgZ(15,"label",10),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.YNc(18,F,4,3,"ng-container",8),t.qZA(),t.TgZ(19,"div",5),t._UZ(20,"input",11),t.TgZ(21,"label",12),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.YNc(24,H,4,3,"ng-container",8),t.qZA(),t.TgZ(25,"div",5),t._UZ(26,"input",13),t.TgZ(27,"label",14),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"div",5),t._UZ(31,"input",15),t.TgZ(32,"label",16),t._uU(33),t.ALo(34,"translate"),t.qZA()(),t.TgZ(35,"div",5),t._UZ(36,"input",17),t.TgZ(37,"label",18),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.YNc(40,J,4,3,"ng-container",8),t.qZA()(),t._UZ(41,"hr"),t.TgZ(42,"div",19)(43,"button",20),t.NdJ("click",function(){return i.dialogRef.close()}),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"button",21),t.NdJ("click",function(){return i.onSubmit()}),t.ALo(46,"translate"),t.qZA()()()),2&r&&(t.Q6J("formGroup",i.form),t.xp6(3),t.Q6J("options",i.branches),t.xp6(2),t.Oqu(t.lcZ(6,32,"LABEL.BRANCH_NAME")),t.xp6(3),t.ekj("ng-invalid",i.submitted&&i.form.get("maSoQl").invalid)("ng-dirty",i.submitted&&i.form.get("maSoQl").invalid),t.xp6(2),t.Oqu(t.lcZ(11,34,"LABEL.MANAGER_NUMBER")),t.xp6(2),t.Q6J("ngIf",i.submitted&&i.form.get("maSoQl").invalid),t.xp6(2),t.ekj("ng-invalid",i.submitted&&i.form.get("ROL_ID").invalid)("ng-dirty",i.submitted&&i.form.get("ROL_ID").invalid),t.Q6J("options",i.roles),t.xp6(2),t.Oqu(t.lcZ(17,36,"LABEL.TYPE_RULE")),t.xp6(2),t.Q6J("ngIf",i.submitted&&i.form.get("ROL_ID").invalid),t.xp6(2),t.ekj("ng-invalid",i.submitted&&i.form.get("userName").invalid)("ng-dirty",i.submitted&&i.form.get("userName").invalid),t.xp6(2),t.Oqu(t.lcZ(23,38,"LABEL.ACCOUNT_NAME")),t.xp6(2),t.Q6J("ngIf",i.submitted&&i.form.get("userName").invalid),t.xp6(4),t.Oqu(t.lcZ(29,40,"LABEL.PASSWORD")),t.xp6(5),t.hij("",t.lcZ(34,42,"LABEL.CONFIRM_PASSWORD")," "),t.xp6(3),t.ekj("ng-invalid",i.submitted&&i.form.get("hoTen").invalid)("ng-dirty",i.submitted&&i.form.get("hoTen").invalid),t.xp6(2),t.Oqu(t.lcZ(39,44,"LABEL.FULLNAME")),t.xp6(2),t.Q6J("ngIf",i.submitted&&i.form.get("hoTen").invalid),t.xp6(3),t.Q6J("label",t.lcZ(44,46,"BUTTON.CANCEL")),t.xp6(2),t.Q6J("label",t.lcZ(46,48,"BUTTON.SAVE")))},dependencies:[T.j,T.o,s.A,c.hJ,c.Hq,e.u5,e._Y,e.Fj,e.JJ,e.JL,e.UX,e.sg,e.u,l.T,l.H,h.O5,u.kW,u.Lt,p.aw,p.X$],encapsulation:2})}return a})();var w=o(3859),x=o(9552),E=o(3904);function j(a,m){if(1&a){const n=t.EpF();t.TgZ(0,"div",7)(1,"div",8)(2,"span",9),t._UZ(3,"i",10),t.TgZ(4,"input",11),t.NdJ("keyup.enter",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.initData())}),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"h2",12),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"button",13),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.onManage("add","LABEL.ADD"))}),t.qZA()()}2&a&&(t.xp6(4),t.Q6J("placeholder",t.lcZ(5,2,"LABEL.SEARCH_TEXT")),t.xp6(3),t.Oqu(t.lcZ(8,4,"LABEL.MANAGER_STAFF_LIST")))}function k(a,m){1&a&&(t.TgZ(0,"tr")(1,"th",14),t._uU(2,"ID"),t.qZA(),t.TgZ(3,"th",15),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",15),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",16),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th",17),t._uU(13),t.ALo(14,"translate"),t.qZA()()),2&a&&(t.xp6(4),t.hij(" ",t.lcZ(5,4,"LABEL.MANAGER_NUMBER")," "),t.xp6(3),t.hij(" ",t.lcZ(8,6,"LABEL.ACCOUNT_NAME")," "),t.xp6(3),t.hij(" ",t.lcZ(11,8,"LABEL.FULLNAME")," "),t.xp6(3),t.hij(" ",t.lcZ(14,10,"LABEL.ACTION")," "))}function P(a,m){if(1&a){const n=t.EpF();t.TgZ(0,"tr")(1,"td",18),t._uU(2),t.qZA(),t.TgZ(3,"td",15),t._uU(4),t.qZA(),t.TgZ(5,"td",15),t._uU(6),t.qZA(),t.TgZ(7,"td",16),t._uU(8),t.qZA(),t.TgZ(9,"td",19)(10,"div",20)(11,"button",21),t.NdJ("click",function(){const d=t.CHM(n).$implicit,g=t.oxw();return t.KtG(g.onManage("edit","LABEL.EDIT",d))}),t.qZA(),t.TgZ(12,"button",22),t.NdJ("click",function(){const d=t.CHM(n).$implicit,g=t.oxw();return t.KtG(g.onDelete(d))}),t.qZA()()()()}if(2&a){const n=m.$implicit;t.xp6(2),t.hij(" ",n.id," "),t.xp6(2),t.hij(" ",null==n?null:n.maSoQl," "),t.xp6(2),t.Oqu(null==n?null:n.userName),t.xp6(2),t.Oqu(null==n?null:n.hoTen)}}let Y=(()=>{class a{constructor(n,r,i,d,g){this.baseService$=n,this.confirmationService=r,this.translateService=i,this.dialogService=d,this.layoutService$=g,this.isMobile=!1,this.data=[],this.unsubscribe=new N.x}ngOnInit(){this.isMobile=this.layoutService$.isMobile(),this.initData()}initData(){this.layoutService$.globalLoading.next(!0),this.baseService$.list().pipe((0,f.R)(this.unsubscribe),(0,_.x)(()=>{this.layoutService$.globalLoading.next(!1)})).subscribe(n=>{this.data=n})}onManage(n,r,i){this.dialogService.open(q,{data:{mode:n,data:i},header:this.translateService.instant(r),width:"50vw",maximizable:!0}).onClose.subscribe(g=>{g?.isSuccess&&this.initData()})}onDelete(n){this.confirmationService.confirm({message:this.translateService.instant("INFO.ARE_YOUR_SURE_DELETE_RECORD"),header:this.translateService.instant("LABEL.CONFIRM"),icon:"pi pi-exclamation-triangle",acceptLabel:this.translateService.instant("BUTTON.ACCEPT"),rejectLabel:this.translateService.instant("BUTTON.CANCEL"),accept:()=>this.doDelete(n)})}doDelete(n){this.baseService$.delete(n.id).pipe((0,f.R)(this.unsubscribe)).subscribe({next:r=>{r&&this.initData()}})}ngOnDestroy(){this.unsubscribe.next({}),this.unsubscribe.complete()}static#t=this.\u0275fac=function(r){return new(r||a)(t.Y36(y),t.Y36(v.YP),t.Y36(p.sK),t.Y36(A.xA),t.Y36(w.P))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["ng-component"]],features:[t._Bn([v.ez,v.YP,I.B,A.xA])],decls:8,vars:3,consts:[[1,"grid"],[1,"col-12","p-0"],[1,"card"],[3,"value","scrollable","responsiveLayout"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","justify-content-between"],[1,"flex","align-items-center","gap-4"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text",1,"w-full",3,"placeholder","keyup.enter"],[1,"m-0"],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button-rounded","p-button-success",3,"click"],["pFrozenColumn","",2,"width","50px"],[2,"width","200px"],[2,"width","auto"],["pFrozenColumn","","alignFrozen","right",2,"width","100px"],["pFrozenColumn","",1,"font-bold",2,"width","50px"],["pFrozenColumn","","alignFrozen","right",1,"font-bold",2,"width","100px"],[1,"flex","gap-2"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"]],template:function(r,i){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-table",3),t.YNc(4,j,10,6,"ng-template",4)(5,k,15,12,"ng-template",5)(6,P,13,4,"ng-template",6),t.qZA()()()(),t._UZ(7,"p-confirmDialog")),2&r&&(t.xp6(3),t.Q6J("value",i.data)("scrollable",!0)("responsiveLayout",i.isMobile?"stack":"scroll"))},dependencies:[x.iA,v.jx,x.on,c.Hq,T.o,l.H,E.Q,p.X$],encapsulation:2})}return a})(),$=(()=>{class a{static#t=this.\u0275fac=function(r){return new(r||a)};static#e=this.\u0275mod=t.oAB({type:a});static#n=this.\u0275inj=t.cJS({imports:[L.Bz.forChild([{path:"",component:Y}]),L.Bz]})}return a})();var G=o(6804),z=o(4055),K=o(6651),W=o(4104),V=o(7902),X=o(6022);let tt=(()=>{class a{static#t=this.\u0275fac=function(r){return new(r||a)};static#e=this.\u0275mod=t.oAB({type:a});static#n=this.\u0275inj=t.cJS({imports:[h.ez,$,e.u5,x.U$,X.Xt,c.hJ,V.JH,T.j,G.KZ,l.T,z.q4,u.kW,K.q,W.EV,E.D,p.aw]})}return a})()},6651:(U,Z,o)=>{o.d(Z,{k:()=>t,q:()=>T});var h=o(6814),e=o(8109),L=o(5219);function v(s,c){if(1&s&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&s){const l=e.oxw(2);e.Udp("display",null!=l.value&&0!==l.value?"flex":"none"),e.uIk("data-pc-section","label"),e.xp6(1),e.AsE("",l.value,"",l.unit,"")}}function N(s,c){1&s&&e.GkF(0)}const f=s=>({$implicit:s});function _(s,c){if(1&s&&(e.TgZ(0,"div",3)(1,"div",4),e.YNc(2,v,2,5,"div",5)(3,N,1,0,"ng-container",6),e.qZA()()),2&s){const l=e.oxw();e.Udp("width",l.value+"%")("background",l.color),e.uIk("data-pc-section","value"),e.xp6(2),e.Q6J("ngIf",l.showValue&&!l.contentTemplate),e.xp6(1),e.Q6J("ngTemplateOutlet",l.contentTemplate)("ngTemplateOutletContext",e.VKq(8,f,l.value))}}function A(s,c){if(1&s&&(e.TgZ(0,"div",7),e._UZ(1,"div",8),e.qZA()),2&s){const l=e.oxw();e.uIk("data-pc-section","container"),e.xp6(1),e.Udp("background",l.color),e.uIk("data-pc-section","value")}}const I=(s,c)=>({"p-progressbar p-component":!0,"p-progressbar-determinate":s,"p-progressbar-indeterminate":c});let t=(()=>{class s{value;showValue=!0;styleClass;style;unit="%";mode="determinate";color;templates;contentTemplate;ngAfterContentInit(){this.templates?.forEach(l=>{l.getType(),this.contentTemplate=l.template})}static \u0275fac=function(u){return new(u||s)};static \u0275cmp=e.Xpm({type:s,selectors:[["p-progressBar"]],contentQueries:function(u,p,C){if(1&u&&e.Suo(C,L.jx,4),2&u){let b;e.iGM(b=e.CRH())&&(p.templates=b)}},hostAttrs:[1,"p-element"],inputs:{value:"value",showValue:"showValue",styleClass:"styleClass",style:"style",unit:"unit",mode:"mode",color:"color"},decls:3,vars:14,consts:[["role","progressbar",3,"ngStyle","ngClass"],["class","p-progressbar-value p-progressbar-value-animate","style","display:flex",3,"width","background",4,"ngIf"],["class","p-progressbar-indeterminate-container",4,"ngIf"],[1,"p-progressbar-value","p-progressbar-value-animate",2,"display","flex"],[1,"p-progressbar-label"],[3,"display",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-progressbar-indeterminate-container"],[1,"p-progressbar-value","p-progressbar-value-animate"]],template:function(u,p){1&u&&(e.TgZ(0,"div",0),e.YNc(1,_,4,10,"div",1)(2,A,2,4,"div",2),e.qZA()),2&u&&(e.Tol(p.styleClass),e.Q6J("ngStyle",p.style)("ngClass",e.WLB(11,I,"determinate"===p.mode,"indeterminate"===p.mode)),e.uIk("aria-valuemin",0)("aria-valuenow",p.value)("aria-valuemax",100)("data-pc-name","progressbar")("data-pc-section","root"),e.xp6(1),e.Q6J("ngIf","determinate"===p.mode),e.xp6(1),e.Q6J("ngIf","indeterminate"===p.mode))},dependencies:[h.mk,h.O5,h.tP,h.PC],styles:['@layer primeng{.p-progressbar{position:relative;overflow:hidden}.p-progressbar-determinate .p-progressbar-value{height:100%;width:0%;position:absolute;display:none;border:0 none;display:flex;align-items:center;justify-content:center;overflow:hidden}.p-progressbar-determinate .p-progressbar-label{display:inline-flex}.p-progressbar-determinate .p-progressbar-value-animate{transition:width 1s ease-in-out}.p-progressbar-indeterminate .p-progressbar-value:before{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim 2.1s cubic-bezier(.65,.815,.735,.395) infinite}.p-progressbar-indeterminate .p-progressbar-value:after{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;animation-delay:1.15s}}@keyframes p-progressbar-indeterminate-anim{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@keyframes p-progressbar-indeterminate-anim-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}\n'],encapsulation:2,changeDetection:0})}return s})(),T=(()=>{class s{static \u0275fac=function(u){return new(u||s)};static \u0275mod=e.oAB({type:s});static \u0275inj=e.cJS({imports:[h.ez]})}return s})()}}]);