"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[799],{4799:(G,A,a)=>{a.r(A),a.d(A,{DocumentSampleModule:()=>Q});var Z=a(6814),s=a(6223),S=a(1682),u=a(5219),L=a(8645),v=a(9773),D=a(4716),d=a(1356),h=a(7398),U=a(8860),t=a(6146),E=a(1474);let x=(()=>{class n{constructor(e){this.http=e,this.baseUrl=U.N.serverURL+"documentsample"}list(){return this.http.get(this.baseUrl).pipe((0,h.U)(e=>e?.data?.length?e?.data:[]))}download(e){return this.http.get(`${this.baseUrl}/get-file/${e}`,{responseType:"blob"})}downloadFile(e){this.download(e.id).subscribe({next:i=>{if(i){const o=window.URL.createObjectURL(i),l=document.createElement("a");l.href=o,l.download=e.fileName,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(o)}}})}add(e){return this.http.post(this.baseUrl,e).pipe((0,h.U)(i=>i))}edit(e,i){return this.http.put(`${this.baseUrl}/${i}`,e).pipe((0,h.U)(o=>o))}delete(e){return this.http.delete(`${this.baseUrl}/${e}`).pipe((0,h.U)(i=>i))}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(E.eN))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var f=a(3714),C=a(6218),g=a(707),b=a(4480),p=a(3911);function y(n,c){1&n&&(t.ynx(0),t.TgZ(1,"small",19),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"WARNING.DOCUMENT_NAME_REQUIRED")," "))}function _(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"span",20),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.baseService$.downloadFile(o._baseData.data))}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.form.value.fileName)}}function F(n,c){if(1&n&&(t.TgZ(0,"span",21),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(null==e.file?null:e.file.name)}}let B=(()=>{class n{constructor(e,i,o){this.fb=e,this.dialogRef=i,this.baseService$=o,this.config=(0,t.f3M)(d.S),this.submitted=!1,this.unsubscribe=new L.x,this._baseData=this.config.data,this.form=this.fb.group({documentName:new s.NI("",[s.kI.required]),fileName:new s.NI(""),note:new s.NI("")})}ngOnInit(){["edit","info"].includes(this._baseData.mode)&&this.form.patchValue({documentName:this._baseData.data.documentName,fileName:this._baseData.data.fileName,note:this._baseData.data.note})}selectFile(e){this.file=e?.length?e[0]:void 0}onSubmit(){if(this.submitted=!0,this.form.invalid)return;let e=new FormData;this.file&&e.append("file",this.file),e.append("documentName",this.form.value.documentName),e.append("note",this.form.value.note),("add"===this._baseData.mode?this.baseService$.add(e):this.baseService$.edit(e,this._baseData.data.id)).pipe((0,v.R)(this.unsubscribe)).subscribe({next:i=>{i?.errorCode||this.dialogRef.close({isSuccess:!0})}})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(s.qu),t.Y36(d.E7),t.Y36(x))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-document-sample-form"]],standalone:!0,features:[t.jDz],decls:30,vars:27,consts:[[3,"formGroup"],[1,"p-fluid","p-formgrid","grid","m-0"],[1,"p-float-label","field","col-12"],["pInputText","","id","documentName","formControlName","documentName","type","text"],["for","documentName",1,"require-label"],[4,"ngIf"],[1,"d-flex","flex-column","col-12","p-0","mb-3"],["for","note",1,"mt-0"],[1,"mt-2","flex","gap-2","align-items-end"],["pButton","","pRipple","",1,"p-button-success","w-12rem",3,"label","click"],["class","cursor-pointer text-primary underline",3,"click",4,"ngIf"],["class","text-primary",4,"ngIf"],["type","file",1,"hidden",3,"multiple","change"],["fileInput",""],["pInputTextarea","","id","note","rows","4","formControlName","note"],["for","note"],[1,"flex","justify-content-end","gap-2"],["pButton","","pRipple","","type","button",1,"p-button-outlined",3,"label","click"],["pButton","","pRipple","","type","button",3,"label","click"],[1,"p-error"],[1,"cursor-pointer","text-primary","underline",3,"click"],[1,"text-primary"]],template:function(i,o){if(1&i){const l=t.EpF();t.TgZ(0,"form",0)(1,"div",1)(2,"span",2),t._UZ(3,"input",3),t.TgZ(4,"label",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.YNc(7,y,4,3,"ng-container",5),t.qZA(),t.TgZ(8,"div",6)(9,"label",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",8)(13,"button",9),t.NdJ("click",function(){t.CHM(l);const m=t.MAs(18);return m.click(),t.KtG(m.value="")}),t.ALo(14,"translate"),t.qZA(),t.YNc(15,_,2,1,"span",10)(16,F,2,1,"span",11),t.qZA(),t.TgZ(17,"input",12,13),t.NdJ("change",function(m){return o.selectFile(null==m.target?null:m.target.files)}),t.qZA()(),t.TgZ(19,"div",2),t._UZ(20,"textarea",14),t.TgZ(21,"label",15),t._uU(22),t.ALo(23,"translate"),t.qZA()()(),t._UZ(24,"hr"),t.TgZ(25,"div",16)(26,"button",17),t.NdJ("click",function(){return o.dialogRef.close()}),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"button",18),t.NdJ("click",function(){return o.onSubmit()}),t.ALo(29,"translate"),t.qZA()()()}2&i&&(t.Q6J("formGroup",o.form),t.xp6(3),t.ekj("ng-invalid",o.submitted&&o.form.get("documentName").invalid)("ng-dirty",o.submitted&&o.form.get("documentName").invalid),t.xp6(2),t.Oqu(t.lcZ(6,15,"LABEL.DOCUMENT_NAME")),t.xp6(2),t.Q6J("ngIf",o.submitted&&o.form.get("documentName").invalid),t.xp6(3),t.Oqu(t.lcZ(11,17,"LABEL.FILE")),t.xp6(3),t.Q6J("label",t.lcZ(14,19,"BUTTON.UPLOAD")),t.xp6(2),t.Q6J("ngIf",!(null!=o.file&&o.file.name)),t.xp6(1),t.Q6J("ngIf",null==o.file?null:o.file.name),t.xp6(1),t.Q6J("multiple",!1),t.xp6(5),t.Oqu(t.lcZ(23,21,"LABEL.NOTE")),t.xp6(4),t.Q6J("label",t.lcZ(27,23,"BUTTON.CANCEL")),t.xp6(2),t.Q6J("label",t.lcZ(29,25,"BUTTON.SAVE")))},dependencies:[f.j,f.o,C.A,C.g,g.hJ,g.Hq,s.u5,s._Y,s.Fj,s.JJ,s.JL,s.UX,s.sg,s.u,b.T,b.H,Z.O5,p.aw,p.X$],encapsulation:2})}return n})();var O=a(3859),T=a(6916),N=a(3904);function J(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",7)(1,"div",8)(2,"span",9),t._UZ(3,"i",10),t.TgZ(4,"input",11),t.NdJ("keyup.enter",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.initData())}),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"h2",12),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"button",13),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onManage("add","LABEL.ADD"))}),t.qZA()()}2&n&&(t.xp6(4),t.Q6J("placeholder",t.lcZ(5,2,"LABEL.SEARCH_TEXT")),t.xp6(3),t.hij(" ",t.lcZ(8,4,"LABEL.DOCUMENT_SAMPLE_LIST")," "))}function M(n,c){1&n&&(t.TgZ(0,"tr")(1,"th",14),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th",15),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",15),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th",16),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",17),t._uU(14),t.ALo(15,"translate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,5,"LABEL.ID")," "),t.xp6(3),t.hij(" ",t.lcZ(6,7,"LABEL.DOCUMENT_NAME")," "),t.xp6(3),t.hij(" ",t.lcZ(9,9,"LABEL.FILE")," "),t.xp6(3),t.hij(" ",t.lcZ(12,11,"LABEL.NOTE")," "),t.xp6(3),t.hij(" ",t.lcZ(15,13,"LABEL.ACTION")," "))}function R(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",18),t._uU(2),t.qZA(),t.TgZ(3,"td",15),t._uU(4),t.qZA(),t.TgZ(5,"td",15)(6,"span",19),t.NdJ("click",function(){const l=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.baseService$.downloadFile(l))}),t._uU(7),t.qZA()(),t.TgZ(8,"td",16),t._uU(9),t.qZA(),t.TgZ(10,"td",20)(11,"div",21)(12,"button",22),t.NdJ("click",function(){const l=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onManage("edit","LABEL.EDIT",l))}),t.qZA(),t.TgZ(13,"button",23),t.NdJ("click",function(){const l=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.onDelete(l))}),t.qZA()()()()}if(2&n){const e=c.$implicit;t.xp6(2),t.hij(" ",e.id," "),t.xp6(2),t.hij(" ",null==e?null:e.documentName," "),t.xp6(3),t.Oqu(null==e?null:e.fileName),t.xp6(2),t.Oqu(null==e?null:e.note)}}let I=(()=>{class n{constructor(e,i,o,l,r){this.baseService$=e,this.confirmationService=i,this.translateService=o,this.dialogService=l,this.layoutService$=r,this.isMobile=!1,this.data=[],this.unsubscribe=new L.x}ngOnInit(){this.isMobile=this.layoutService$.isMobile(),this.initData()}initData(){this.layoutService$.globalLoading.next(!0),this.baseService$.list().pipe((0,v.R)(this.unsubscribe),(0,D.x)(()=>{this.layoutService$.globalLoading.next(!1)})).subscribe(e=>{this.data=e})}onManage(e,i,o){this.dialogService.open(B,{data:{mode:e,data:o},header:this.translateService.instant(i),width:"50vw",maximizable:!0}).onClose.subscribe(r=>{r?.isSuccess&&this.initData()})}onDelete(e){this.confirmationService.confirm({message:this.translateService.instant("INFO.ARE_YOUR_SURE_DELETE_RECORD"),header:this.translateService.instant("LABEL.CONFIRM"),icon:"pi pi-exclamation-triangle",acceptLabel:this.translateService.instant("BUTTON.ACCEPT"),rejectLabel:this.translateService.instant("BUTTON.CANCEL"),accept:()=>this.doDelete(e)})}doDelete(e){this.baseService$.delete(e.id).pipe((0,v.R)(this.unsubscribe)).subscribe({next:i=>{i&&this.initData()}})}ngOnDestroy(){this.unsubscribe.next({}),this.unsubscribe.complete()}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(x),t.Y36(u.YP),t.Y36(p.sK),t.Y36(d.xA),t.Y36(O.P))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],features:[t._Bn([u.ez,u.YP,x,d.xA])],decls:8,vars:3,consts:[[1,"grid"],[1,"col-12","p-0"],[1,"card"],[3,"value","scrollable","responsiveLayout"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","justify-content-between"],[1,"flex","align-items-center","gap-4"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text",1,"w-full",3,"placeholder","keyup.enter"],[1,"m-0"],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button-rounded","p-button-success",3,"click"],["pFrozenColumn","",2,"width","50px"],[2,"width","200px"],[2,"width","auto"],["pFrozenColumn","","alignFrozen","right",2,"width","120px"],["pFrozenColumn","",1,"font-bold",2,"width","50px"],[1,"cursor-pointer","text-primary","underline",3,"click"],["pFrozenColumn","","alignFrozen","right",1,"font-bold",2,"width","120px"],[1,"flex","gap-2"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-table",3),t.YNc(4,J,10,6,"ng-template",4)(5,M,16,15,"ng-template",5)(6,R,14,4,"ng-template",6),t.qZA()()()(),t._UZ(7,"p-confirmDialog")),2&i&&(t.xp6(3),t.Q6J("value",o.data)("scrollable",!0)("responsiveLayout",o.isMobile?"stack":"scroll"))},dependencies:[T.iA,u.jx,T.on,g.Hq,f.o,b.H,N.Q,p.X$],encapsulation:2})}return n})(),$=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[S.Bz.forChild([{path:"",component:I}]),S.Bz]})}return n})();var j=a(6804),w=a(4055),k=a(2160),Y=a(6651),z=a(9378),q=a(7902),H=a(6022);let Q=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[Z.ez,$,s.u5,T.U$,H.Xt,g.hJ,q.JH,f.j,j.KZ,b.T,w.q4,k.kW,Y.q,z.EV,N.D,p.aw]})}return n})()}}]);