"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[5065],{5065:(X,E,a)=>{a.r(E),a.d(E,{ProjectModule:()=>K});var Z=a(6814),r=a(6223),D=a(9241),c=a(5219),N=a(8645),p=a(9773),m=a(5118),d=a(7398),U=a(8860),t=a(8109),x=a(9862);let f=(()=>{class e{constructor(n){this.http=n,this.baseUrl=U.N.serverURL+"duan"}list(){return this.http.get(this.baseUrl).pipe((0,d.U)(n=>n?.data?.length?n?.data:[]))}add(n){return this.http.post(this.baseUrl,n).pipe((0,d.U)(o=>o))}edit(n,o){return this.http.put(`${this.baseUrl}/${o}`,n).pipe((0,d.U)(i=>i))}delete(n){return this.http.delete(`${this.baseUrl}/${n}`).pipe((0,d.U)(o=>o))}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(x.eN))};static#n=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var b=a(3714),I=a(6218),h=a(707),g=a(4480),A=a(3965),j=a(5399),v=a(3999),F=a(6235);function H(e,l){1&e&&(t.ynx(0),t.TgZ(1,"small",15),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"WARNING.TEN_CHI_NHANH_TRONG")))}function y(e,l){1&e&&(t.ynx(0),t._uU(1," M\xe3 d\u1ef1 \xe1n kh\xf4ng h\u1ee3p l\u1ec7"),t._UZ(2,"br"),t._uU(3,"(Kh\xf4ng ch\u1ee9a kho\u1ea3ng tr\u1ed1ng v\xe0 d\u1ea5u c\xe2u) "),t.BQk())}function L(e,l){1&e&&t._uU(0," M\xe3 d\u1ef1 \xe1n \u0111ang tr\u1ed1ng ")}function S(e,l){if(1&e&&(t.ynx(0),t.TgZ(1,"small",15),t.YNc(2,y,4,0,"ng-container",16)(3,L,1,0,"ng-template",null,17,t.W1O),t.qZA(),t.BQk()),2&e){const n=t.MAs(4),o=t.oxw();t.xp6(2),t.Q6J("ngIf",o.form.get("maDuAn").hasError("pattern"))("ngIfElse",n)}}function B(e,l){1&e&&(t.ynx(0),t.TgZ(1,"small",15),t._uU(2," T\xean d\u1ef1 \xe1n \u0111ang tr\u1ed1ng "),t.qZA(),t.BQk())}let P=(()=>{class e{constructor(n,o,i,s){this.fb=n,this.dialogRef=o,this.baseService$=i,this.branchService$=s,this.config=(0,t.f3M)(m.S),this.submitted=!1,this.unsubscribe=new N.x,this.branches=[],this._baseData=this.config.data,this.form=this.fb.group({CHINHANH_ID:new r.NI("",[r.kI.required]),maDuAn:new r.NI("",[r.kI.required,r.kI.pattern(j.Z.PATTERNS.NO_SPACE_AND_UNICODE_UTF8)]),tenDuAn:new r.NI("",[r.kI.required])})}ngOnInit(){this.getListBranch(),["edit","info"].includes(this._baseData.mode)&&this.form.patchValue({CHINHANH_ID:this._baseData.data.chinhanH_ID,maDuAn:this._baseData.data.maDuAn,tenDuAn:this._baseData.data.tenDuAn})}getListBranch(){this.branchService$.list().pipe((0,p.R)(this.unsubscribe)).subscribe(n=>{this.branches=n})}onSubmit(){this.submitted=!0,!this.form.invalid&&("add"===this._baseData.mode?this.baseService$.add(this.form.value):this.baseService$.edit(this.form.value,this._baseData.data.id)).pipe((0,p.R)(this.unsubscribe)).subscribe({next:n=>{n&&this.dialogRef.close({isSuccess:!0})}})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(r.qu),t.Y36(m.E7),t.Y36(f),t.Y36(F.b))};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-project-form"]],standalone:!0,features:[t.jDz],decls:26,vars:32,consts:[[3,"formGroup"],[1,"p-fluid","p-formgrid","grid","m-0"],[1,"p-float-label","field","col-12"],["id","drpChiNhanh","optionLabel","tenChiNhanh","optionValue","id","formControlName","CHINHANH_ID","appendTo","body",3,"options"],["for","drpChiNhanh",1,"require-label"],[4,"ngIf"],[1,"p-float-label","field","col-12","md:col-6","pr-1"],["pInputText","","id","maDuAn","formControlName","maDuAn","type","text"],["for","maDuAn",1,"require-label"],[1,"p-float-label","field","col-12","md:col-6","pl-1"],["pInputText","","id","tenDuAn","type","text","formControlName","tenDuAn"],["for","tenDuAn",1,"require-label"],[1,"flex","justify-content-end","gap-2"],["pButton","","pRipple","","type","button",1,"p-button-outlined",3,"label","click"],["pButton","","pRipple","","type","button",3,"label","click"],[1,"p-error"],[4,"ngIf","ngIfElse"],["maDuAnEmpty",""]],template:function(o,i){1&o&&(t.TgZ(0,"form",0)(1,"div",1)(2,"span",2),t._UZ(3,"p-dropdown",3),t.TgZ(4,"label",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.YNc(7,H,4,3,"ng-container",5),t.qZA(),t.TgZ(8,"div",6),t._UZ(9,"input",7),t.TgZ(10,"label",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.YNc(13,S,5,2,"ng-container",5),t.qZA(),t.TgZ(14,"div",9),t._UZ(15,"input",10),t.TgZ(16,"label",11),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.YNc(19,B,3,0,"ng-container",5),t.qZA()(),t._UZ(20,"hr"),t.TgZ(21,"div",12)(22,"button",13),t.NdJ("click",function(){return i.dialogRef.close()}),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"button",14),t.NdJ("click",function(){return i.onSubmit()}),t.ALo(25,"translate"),t.qZA()()()),2&o&&(t.Q6J("formGroup",i.form),t.xp6(3),t.ekj("ng-invalid",i.submitted&&i.form.get("CHINHANH_ID").invalid)("ng-dirty",i.submitted&&i.form.get("CHINHANH_ID").invalid),t.Q6J("options",i.branches),t.xp6(2),t.Oqu(t.lcZ(6,22,"LABEL.TEN_CHI_NHANH")),t.xp6(2),t.Q6J("ngIf",i.submitted&&i.form.get("CHINHANH_ID").invalid),t.xp6(2),t.ekj("ng-invalid",i.submitted&&i.form.get("maDuAn").invalid)("ng-dirty",i.submitted&&i.form.get("maDuAn").invalid),t.xp6(2),t.Oqu(t.lcZ(12,24,"LABEL.MA_DU_AN")),t.xp6(2),t.Q6J("ngIf",i.submitted&&i.form.get("maDuAn").invalid),t.xp6(2),t.ekj("ng-invalid",i.submitted&&i.form.get("tenDuAn").invalid)("ng-dirty",i.submitted&&i.form.get("tenDuAn").invalid),t.xp6(2),t.Oqu(t.lcZ(18,26,"LABEL.TEN_DU_AN")),t.xp6(2),t.Q6J("ngIf",i.submitted&&i.form.get("tenDuAn").invalid),t.xp6(3),t.Q6J("label",t.lcZ(23,28,"BUTTON.CANCEL")),t.xp6(2),t.Q6J("label",t.lcZ(25,30,"BUTTON.SAVE")))},dependencies:[b.j,b.o,I.A,h.hJ,h.Hq,r.u5,r._Y,r.Fj,r.JJ,r.JL,r.UX,r.sg,r.u,g.T,g.H,Z.O5,A.kW,A.Lt,v.aw,v.X$],encapsulation:2})}return e})();var _=a(3859),T=a(9552),C=a(3904);function R(e,l){if(1&e){const n=t.EpF();t.TgZ(0,"div",7)(1,"h2"),t._uU(2,"Danh s\xe1ch d\u1ef1 \xe1n"),t.qZA(),t.TgZ(3,"button",8),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.onManage("add","LABEL.ADD"))}),t.qZA()()}}function J(e,l){1&e&&(t.TgZ(0,"tr")(1,"th",9),t._uU(2,"ID"),t.qZA(),t.TgZ(3,"th",10),t._uU(4,"T\xean chi nh\xe1nh"),t.qZA(),t.TgZ(5,"th",10),t._uU(6,"M\xe3 d\u1ef1 \xe1n"),t.qZA(),t.TgZ(7,"th",11),t._uU(8,"T\xean d\u1ef1 \xe1n"),t.qZA(),t.TgZ(9,"th",12),t._uU(10," H\xe0nh \u0111\u1ed9ng "),t.qZA()())}function O(e,l){if(1&e){const n=t.EpF();t.TgZ(0,"tr")(1,"td",13),t._uU(2),t.qZA(),t.TgZ(3,"td",10),t._uU(4),t.qZA(),t.TgZ(5,"td",10),t._uU(6),t.qZA(),t.TgZ(7,"td",11),t._uU(8),t.qZA(),t.TgZ(9,"td",14)(10,"div",15)(11,"button",16),t.NdJ("click",function(){const s=t.CHM(n).$implicit,u=t.oxw();return t.KtG(u.onManage("edit","LABEL.EDIT",s))}),t.qZA(),t.TgZ(12,"button",17),t.NdJ("click",function(){const s=t.CHM(n).$implicit,u=t.oxw();return t.KtG(u.onDelete(s))}),t.qZA()()()()}if(2&e){const n=l.$implicit;t.xp6(2),t.hij(" ",n.id," "),t.xp6(2),t.hij(" ",null==n||null==n.chiNhanh?null:n.chiNhanh.tenChiNhanh," "),t.xp6(2),t.Oqu(null==n?null:n.maDuAn),t.xp6(2),t.Oqu(null==n?null:n.tenDuAn)}}let M=(()=>{class e{constructor(n,o,i,s,u){this.baseService$=n,this.confirmationService=o,this.translateService=i,this.dialogService=s,this.layoutService$=u,this.isMobile=!1,this.data=[],this.unsubscribe=new N.x}ngOnInit(){this.isMobile=this.layoutService$.isMobile(),this.initData()}initData(){this.baseService$.list().pipe((0,p.R)(this.unsubscribe)).subscribe(n=>{this.data=n})}onManage(n,o,i){this.dialogService.open(P,{data:{mode:n,data:i},header:this.translateService.instant(o),width:"50vw",maximizable:!0}).onClose.subscribe(u=>{u?.isSuccess&&this.initData()})}onDelete(n){this.confirmationService.confirm({message:this.translateService.instant("INFO.ARE_YOUR_SURE_DELETE_RECORD"),header:this.translateService.instant("LABEL.CONFIRM"),icon:"pi pi-exclamation-triangle",acceptLabel:this.translateService.instant("BUTTON.ACCEPT"),rejectLabel:this.translateService.instant("BUTTON.CANCEL"),accept:()=>this.doDelete(n)})}doDelete(n){this.baseService$.delete(n.id).pipe((0,p.R)(this.unsubscribe)).subscribe({next:o=>{o&&this.initData()}})}ngOnDestroy(){this.unsubscribe.next({}),this.unsubscribe.complete()}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(f),t.Y36(c.YP),t.Y36(v.sK),t.Y36(m.xA),t.Y36(_.P))};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],features:[t._Bn([c.ez,c.YP,f,m.xA])],decls:8,vars:3,consts:[[1,"grid"],[1,"col-12"],[1,"card"],["scrollHeight","400px","styleClass","mt-3 sidebar-custom",3,"value","scrollable","responsiveLayout"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","justify-content-between"],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button-rounded","p-button-success",3,"click"],["pFrozenColumn","",2,"width","50px"],[2,"width","200px"],[2,"width","auto"],["pFrozenColumn","","alignFrozen","right",2,"width","100px"],["pFrozenColumn","",1,"font-bold",2,"width","50px"],["pFrozenColumn","","alignFrozen","right",1,"font-bold",2,"width","100px"],[1,"flex","gap-2"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-table",3),t.YNc(4,R,4,0,"ng-template",4)(5,J,11,0,"ng-template",5)(6,O,13,4,"ng-template",6),t.qZA()()()(),t._UZ(7,"p-confirmDialog")),2&o&&(t.xp6(3),t.Q6J("value",i.data)("scrollable",!0)("responsiveLayout",i.isMobile?"stack":"scroll"))},dependencies:[T.iA,c.jx,T.on,h.Hq,g.H,C.Q],encapsulation:2})}return e})(),Y=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#n=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[D.Bz.forChild([{path:"",component:M}]),D.Bz]})}return e})();var $=a(6804),Q=a(4055),q=a(6651),z=a(4104),k=a(7902),G=a(6022);let K=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#n=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[Z.ez,Y,r.u5,T.U$,G.Xt,h.hJ,k.JH,b.j,$.KZ,g.T,Q.q4,A.kW,q.q,z.EV,C.D]})}return e})()}}]);