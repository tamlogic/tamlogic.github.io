"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[841],{819:(Z,f,i)=>{i.d(f,{B:()=>A});var u=i(7398),s=i(8860),g=i(6146),h=i(1474);let A=(()=>{class p{constructor(o){this.http=o,this.baseUrl=s.N.serverURL+"taikhoan"}list(){return this.http.get(this.baseUrl).pipe((0,u.U)(o=>o?.data?.length?o?.data:[]))}paging(o){return this.http.post(this.baseUrl+"/paging",o).pipe((0,u.U)(l=>l))}add(o){return this.http.post(this.baseUrl,o).pipe((0,u.U)(l=>l))}edit(o,l){return this.http.put(`${this.baseUrl}/${l}`,o).pipe((0,u.U)(t=>t))}delete(o){return this.http.delete(`${this.baseUrl}/${o}`).pipe((0,u.U)(l=>l))}static#t=this.\u0275fac=function(l){return new(l||p)(g.LFG(h.eN))};static#e=this.\u0275prov=g.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},6841:(Z,f,i)=>{i.r(f),i.d(f,{ManagerModule:()=>V});var u=i(6814),s=i(6223),g=i(1682),h=i(5219),A=i(8645),p=i(9773),I=i(4716),o=i(1356),l=i(819),t=i(6146),N=i(3714),R=i(6218),_=i(707),b=i(4480),C=i(2160),v=i(3911),x=i(5399),U=i(1423),M=i(3935),D=i(1586);function S(n,c){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"WARNING.MANAGER_NUMBER_INVALID")," "))}function O(n,c){1&n&&(t._uU(0),t.ALo(1,"translate")),2&n&&t.hij(" ",t.lcZ(1,1,"WARNING.MANAGER_NUMBER_REQUIRED")," ")}function B(n,c){if(1&n&&(t.ynx(0),t.TgZ(1,"small",19),t.YNc(2,S,3,3,"ng-container",20)(3,O,2,3,"ng-template",null,21,t.W1O),t.qZA(),t.BQk()),2&n){const a=t.MAs(4),r=t.oxw();t.xp6(2),t.Q6J("ngIf",r.form.get("maSoQl").hasError("pattern"))("ngIfElse",a)}}function y(n,c){1&n&&(t.ynx(0),t.TgZ(1,"small",19),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"WARNING.ACCOUNT_NAME_REQUIRED")))}function P(n,c){1&n&&(t.ynx(0),t.TgZ(1,"small",19),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"WARNING.FULL_NAME_REQUIRED")))}function F(n,c){1&n&&(t.ynx(0),t.TgZ(1,"small",19),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"WARNING.NEW_PASSWORD_NOT_MATCH")))}function Q(n,c){1&n&&(t.ynx(0),t.TgZ(1,"small",19),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"WARNING.CONFIRM_PASSWORD_NOT_MATCH")))}let H=(()=>{class n{constructor(a,r,e,m){this.fb=a,this.dialogRef=r,this.baseService$=e,this.branchService$=m,this.config=(0,t.f3M)(o.S),this.submitted=!1,this.unsubscribe=new A.x,this.branches=[],this._baseData=this.config.data,this.form=this.fb.group({CHINHANH_ID:new s.NI({value:void 0,disabled:!0},[s.kI.required]),userName:new s.NI("",[s.kI.required]),password:new s.NI(""),confirmPassword:new s.NI(""),fullName:new s.NI("",[s.kI.required]),maSoQl:new s.NI("",[s.kI.required,s.kI.pattern(x.Z.PATTERNS.NO_SPACE_AND_UNICODE_UTF8)])})}ngOnInit(){this.getListBranch(),["edit","info"].includes(this._baseData.mode)&&this.form.patchValue({CHINHANH_ID:this._baseData.data.CHINHANH_ID,maSoQl:this._baseData.data.maSoQl,userName:this._baseData.data.userName,fullName:this._baseData.data.hoTen})}getListBranch(){this.branchService$.list().pipe((0,p.R)(this.unsubscribe)).subscribe(a=>{a?.length&&(this.branches=a,this.form.patchValue({CHINHANH_ID:this.branches[0].id}))})}onSubmit(){if(this.submitted=!0,this.form.invalid||this.invalidConfirm())return;const a={...this.form.value,CHINHANH_ID:this._baseData?.data?.CHINHANH_ID||this.branches[0].id,hoTen:this.form.value.fullName};delete a.confirmPassword,delete a.fullName,("add"===this._baseData.mode?this.baseService$.add(a):this.baseService$.edit(a,this._baseData.data.id)).pipe((0,p.R)(this.unsubscribe)).subscribe({next:r=>{r?.errorCode||this.dialogRef.close({isSuccess:!0})}})}invalidConfirm(){return(this.form.value.password||this.form.value.confirmPassword)&&this.form.value.password!==this.form.value.confirmPassword}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(s.qu),t.Y36(o.E7),t.Y36(M.b),t.Y36(D.b))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-manager-form"]],standalone:!0,features:[t.jDz],decls:43,vars:53,consts:[[3,"formGroup"],[1,"p-fluid","p-formgrid","grid","m-0"],[1,"p-float-label","field","col-12"],["id","drpChiNhanh","optionLabel","tenChiNhanh","optionValue","id","formControlName","CHINHANH_ID","appendTo","body",3,"options"],["for","drpChiNhanh",1,"require-label"],["pInputText","","id","maSoQl","formControlName","maSoQl","type","text"],["for","maSoQl",1,"require-label"],[4,"ngIf"],["pInputText","","id","userName","formControlName","userName","type","text"],["for","userName",1,"require-label"],["pInputText","","id","fullName","formControlName","fullName","type","text"],["for","fullName",1,"require-label"],["id","password","formControlName","password","type","password",3,"toggleMask"],["for","password"],["id","confirmPassword","formControlName","confirmPassword","type","password",3,"toggleMask"],["for","confirmPassword"],[1,"flex","justify-content-end","gap-2"],["pButton","","pRipple","","type","button",1,"p-button-outlined",3,"label","click"],["pButton","","pRipple","","type","button",3,"label","click"],[1,"p-error"],[4,"ngIf","ngIfElse"],["empty",""]],template:function(r,e){1&r&&(t.TgZ(0,"form",0)(1,"div",1)(2,"span",2),t._UZ(3,"p-dropdown",3),t.TgZ(4,"label",4),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"div",2),t._UZ(8,"input",5),t.TgZ(9,"label",6),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.YNc(12,B,5,2,"ng-container",7),t.qZA(),t.TgZ(13,"div",2),t._UZ(14,"input",8),t.TgZ(15,"label",9),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.YNc(18,y,4,3,"ng-container",7),t.qZA(),t.TgZ(19,"div",2),t._UZ(20,"input",10),t.TgZ(21,"label",11),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.YNc(24,P,4,3,"ng-container",7),t.qZA(),t.TgZ(25,"div",2),t._UZ(26,"p-password",12),t.TgZ(27,"label",13),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.YNc(30,F,4,3,"ng-container",7),t.qZA(),t.TgZ(31,"div",2),t._UZ(32,"p-password",14),t.TgZ(33,"label",15),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.YNc(36,Q,4,3,"ng-container",7),t.qZA()(),t._UZ(37,"hr"),t.TgZ(38,"div",16)(39,"button",17),t.NdJ("click",function(){return e.dialogRef.close()}),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"button",18),t.NdJ("click",function(){return e.onSubmit()}),t.ALo(42,"translate"),t.qZA()()()),2&r&&(t.Q6J("formGroup",e.form),t.xp6(3),t.Q6J("options",e.branches),t.xp6(2),t.Oqu(t.lcZ(6,37,"LABEL.BRANCH_NAME")),t.xp6(3),t.ekj("ng-invalid",e.submitted&&e.form.get("maSoQl").invalid)("ng-dirty",e.submitted&&e.form.get("maSoQl").invalid),t.xp6(2),t.Oqu(t.lcZ(11,39,"LABEL.MANAGER_NUMBER")),t.xp6(2),t.Q6J("ngIf",e.submitted&&e.form.get("maSoQl").invalid),t.xp6(2),t.ekj("ng-invalid",e.submitted&&e.form.get("userName").invalid)("ng-dirty",e.submitted&&e.form.get("userName").invalid),t.xp6(2),t.Oqu(t.lcZ(17,41,"LABEL.ACCOUNT_NAME")),t.xp6(2),t.Q6J("ngIf",e.submitted&&e.form.get("userName").invalid),t.xp6(2),t.ekj("ng-invalid",e.submitted&&e.form.get("fullName").invalid)("ng-dirty",e.submitted&&e.form.get("fullName").invalid),t.xp6(2),t.Oqu(t.lcZ(23,43,"LABEL.FULL_NAME")),t.xp6(2),t.Q6J("ngIf",e.submitted&&e.form.get("fullName").invalid),t.xp6(2),t.ekj("ng-invalid",e.submitted&&e.invalidConfirm())("ng-dirty",e.submitted&&e.invalidConfirm()),t.Q6J("toggleMask",!0),t.xp6(2),t.Oqu(t.lcZ(29,45,"LABEL.PASSWORD")),t.xp6(2),t.Q6J("ngIf",e.submitted&&e.invalidConfirm()),t.xp6(2),t.ekj("ng-invalid",e.submitted&&e.invalidConfirm())("ng-dirty",e.submitted&&e.invalidConfirm()),t.Q6J("toggleMask",!0),t.xp6(2),t.hij("",t.lcZ(35,47,"LABEL.CONFIRM_PASSWORD")," "),t.xp6(2),t.Q6J("ngIf",e.submitted&&e.invalidConfirm()),t.xp6(3),t.Q6J("label",t.lcZ(40,49,"BUTTON.CANCEL")),t.xp6(2),t.Q6J("label",t.lcZ(42,51,"BUTTON.SAVE")))},dependencies:[N.j,N.o,R.A,_.hJ,_.Hq,s.u5,s._Y,s.Fj,s.JJ,s.JL,s.UX,s.sg,s.u,b.T,b.H,u.O5,C.kW,C.Lt,v.aw,v.X$,U.gz,U.ro],encapsulation:2})}return n})();var w=i(3859),T=i(6916),L=i(1712),E=i(3904);function J(n,c){if(1&n){const a=t.EpF();t.TgZ(0,"div",9)(1,"div",10)(2,"span",11),t._UZ(3,"i",12),t.TgZ(4,"input",13),t.NdJ("keyup.enter",function(){t.CHM(a);const e=t.oxw();return t.KtG(e.initData())})("ngModelChange",function(e){t.CHM(a);const m=t.oxw();return t.KtG(m.requestParams.search=e)}),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"h2",14),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"button",15),t.NdJ("click",function(){t.CHM(a);const e=t.oxw();return t.KtG(e.onManage("add","LABEL.ADD"))}),t.qZA()()}if(2&n){const a=t.oxw();t.xp6(4),t.Q6J("ngModel",a.requestParams.search)("placeholder",t.lcZ(5,3,"LABEL.SEARCH_TEXT")),t.xp6(3),t.hij(" ",t.lcZ(8,5,"LABEL.MANAGER_STAFF_LIST")," ")}}function j(n,c){1&n&&(t.TgZ(0,"tr")(1,"th",16),t._uU(2,"ID"),t.qZA(),t.TgZ(3,"th",17),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",17),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",18),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th",19),t._uU(13),t.ALo(14,"translate"),t.qZA()()),2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,4,"LABEL.MANAGER_NUMBER")," "),t.xp6(3),t.hij(" ",t.lcZ(8,6,"LABEL.ACCOUNT_NAME")," "),t.xp6(3),t.hij(" ",t.lcZ(11,8,"LABEL.FULL_NAME")," "),t.xp6(3),t.hij(" ",t.lcZ(14,10,"LABEL.ACTION")," "))}function $(n,c){if(1&n){const a=t.EpF();t.TgZ(0,"tr")(1,"td",20),t._uU(2),t.qZA(),t.TgZ(3,"td",17),t._uU(4),t.qZA(),t.TgZ(5,"td",17),t._uU(6),t.qZA(),t.TgZ(7,"td",18),t._uU(8),t.qZA(),t.TgZ(9,"td",21)(10,"div",22)(11,"button",23),t.NdJ("click",function(){const m=t.CHM(a).$implicit,d=t.oxw();return t.KtG(d.onManage("edit","LABEL.EDIT",m))}),t.qZA(),t.TgZ(12,"button",24),t.NdJ("click",function(){const m=t.CHM(a).$implicit,d=t.oxw();return t.KtG(d.onDelete(m))}),t.qZA()()()()}if(2&n){const a=c.$implicit;t.xp6(2),t.hij(" ",a.id," "),t.xp6(2),t.hij(" ",null==a?null:a.maSoQl," "),t.xp6(2),t.Oqu(null==a?null:a.userName),t.xp6(2),t.Oqu(null==a?null:a.hoTen)}}let q=(()=>{class n{constructor(a,r,e,m,d){this.baseService$=a,this.confirmationService=r,this.translateService=e,this.dialogService=m,this.layoutService$=d,this.isMobile=!1,this.data=[],this.unsubscribe=new A.x,this.first=0,this.rows=10,this.requestParams={search:"",pageSize:10,page:0,sorting:[{fieldName:"UserName",direction:"ASC"}]},this.totalRecords=0}ngOnInit(){this.isMobile=this.layoutService$.isMobile(),this.initData()}initData(){this.layoutService$.globalLoading.next(!0),this.baseService$.paging(this.requestParams).pipe((0,p.R)(this.unsubscribe),(0,I.x)(()=>{this.layoutService$.globalLoading.next(!1)})).subscribe(a=>{a?(this.data=a.data,this.totalRecords=a?.pagingInfo?.totalRecords):this.data=[]})}onPageChange(a){this.first=a.first,this.rows=a.rows,this.requestParams.page=this.first/this.rows,this.initData()}onManage(a,r,e){this.dialogService.open(H,{data:{mode:a,data:e},header:this.translateService.instant(r),width:"50vw",maximizable:!0}).onClose.subscribe(d=>{d?.isSuccess&&this.initData()})}onDelete(a){this.confirmationService.confirm({message:this.translateService.instant("INFO.ARE_YOUR_SURE_DELETE_RECORD"),header:this.translateService.instant("LABEL.CONFIRM"),icon:"pi pi-exclamation-triangle",acceptLabel:this.translateService.instant("BUTTON.ACCEPT"),rejectLabel:this.translateService.instant("BUTTON.CANCEL"),accept:()=>this.doDelete(a)})}doDelete(a){this.baseService$.delete(a.id).pipe((0,p.R)(this.unsubscribe)).subscribe({next:r=>{r&&this.initData()}})}ngOnDestroy(){this.unsubscribe.next({}),this.unsubscribe.complete()}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(M.b),t.Y36(h.YP),t.Y36(v.sK),t.Y36(o.xA),t.Y36(w.P))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],features:[t._Bn([h.ez,h.YP,l.B,o.xA])],decls:10,vars:9,consts:[[1,"grid"],[1,"col-12","p-0"],[1,"card"],[3,"value","scrollable","responsiveLayout"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","justify-content-end","align-items-center"],["currentPageReportTemplate","{first} - {last} / {totalRecords}",3,"first","rows","totalRecords","showCurrentPageReport","showPageLinks","showJumpToPageDropdown","onPageChange"],[1,"flex","justify-content-between"],[1,"flex","align-items-center","gap-4"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text",1,"w-full",3,"ngModel","placeholder","keyup.enter","ngModelChange"],[1,"m-0"],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button-rounded","p-button-success",3,"click"],["pFrozenColumn","",2,"width","50px"],[2,"width","200px"],[2,"width","auto"],["pFrozenColumn","","alignFrozen","right",2,"width","120px"],["pFrozenColumn","",1,"font-bold",2,"width","50px"],["pFrozenColumn","","alignFrozen","right",1,"font-bold",2,"width","120px"],[1,"flex","gap-2"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"]],template:function(r,e){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-table",3),t.YNc(4,J,10,7,"ng-template",4)(5,j,15,12,"ng-template",5)(6,$,13,4,"ng-template",6),t.qZA(),t.TgZ(7,"div",7)(8,"p-paginator",8),t.NdJ("onPageChange",function(d){return e.onPageChange(d)}),t.qZA()()()()(),t._UZ(9,"p-confirmDialog")),2&r&&(t.xp6(3),t.Q6J("value",e.data)("scrollable",!0)("responsiveLayout",e.isMobile?"stack":"scroll"),t.xp6(5),t.Q6J("first",e.first)("rows",e.rows)("totalRecords",e.totalRecords)("showCurrentPageReport",!0)("showPageLinks",!1)("showJumpToPageDropdown",!1))},dependencies:[s.Fj,s.JJ,s.On,T.iA,h.jx,T.on,_.Hq,N.o,b.H,L.D,E.Q,v.X$],encapsulation:2})}return n})(),W=(()=>{class n{static#t=this.\u0275fac=function(r){return new(r||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[g.Bz.forChild([{path:"",component:q}]),g.Bz]})}return n})();var Y=i(6804),G=i(4055),z=i(6651),k=i(9378),K=i(7902),X=i(6022);let V=(()=>{class n{static#t=this.\u0275fac=function(r){return new(r||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[u.ez,W,s.u5,T.U$,X.Xt,_.hJ,K.JH,N.j,Y.KZ,b.T,G.q4,C.kW,L.U,z.q,k.EV,E.D,v.aw]})}return n})()},3935:(Z,f,i)=>{i.d(f,{b:()=>A});var u=i(7398),s=i(8860),g=i(6146),h=i(1474);let A=(()=>{class p{constructor(o){this.http=o,this.baseUrl=s.N.serverURL+"nguoiquanly"}list(){return this.http.get(this.baseUrl).pipe((0,u.U)(o=>o?.data?.length?o?.data:[]))}paging(o){return this.http.post(this.baseUrl+"/paging",o).pipe((0,u.U)(l=>l))}add(o){return this.http.post(this.baseUrl,o).pipe((0,u.U)(l=>l))}edit(o,l){return this.http.put(`${this.baseUrl}/${l}`,o).pipe((0,u.U)(t=>t))}delete(o){return this.http.delete(`${this.baseUrl}/${o}`).pipe((0,u.U)(l=>l))}static#t=this.\u0275fac=function(l){return new(l||p)(g.LFG(h.eN))};static#e=this.\u0275prov=g.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()}}]);