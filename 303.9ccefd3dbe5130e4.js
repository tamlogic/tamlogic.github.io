"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[303],{2303:(z,Z,o)=>{o.r(Z),o.d(Z,{AccountModule:()=>K});var C=o(6814),s=o(6223),x=o(1682),m=o(5219),N=o(8645),d=o(9773),U=o(4716),u=o(1356),A=o(819),t=o(6146),g=o(3714),L=o(6218),h=o(707),f=o(4480),T=o(2160),R=o(5399),p=o(3911),D=o(7450),v=o(8057);function I(i,c){1&i&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t.BQk()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"WARNING.ACCOUNT_NUMBER_INVALID")," "))}function S(i,c){1&i&&(t._uU(0),t.ALo(1,"translate")),2&i&&t.hij(" ",t.lcZ(1,1,"WARNING.ACCOUNT_NUMBER_REQUIRED")," ")}function B(i,c){if(1&i&&(t.ynx(0),t.TgZ(1,"small",27),t.YNc(2,I,3,3,"ng-container",28)(3,S,2,3,"ng-template",null,29,t.W1O),t.qZA(),t.BQk()),2&i){const n=t.MAs(4),a=t.oxw();t.xp6(2),t.Q6J("ngIf",a.form.get("soHieu").hasError("pattern"))("ngIfElse",n)}}function y(i,c){1&i&&(t.ynx(0),t.TgZ(1,"small",27),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"WARNING.GROUP_REQUIRED")," "))}function O(i,c){1&i&&(t.ynx(0),t.TgZ(1,"small",27),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"WARNING.ACCOUNT_NAME_REQUIRED")," "))}let P=(()=>{class i{constructor(n,a,e,l,r){this.fb=n,this.dialogRef=a,this.dialogService=e,this.baseService$=l,this.translateService=r,this.config=(0,t.f3M)(u.S),this.submitted=!1,this.unsubscribe=new N.x,this.parentAccountOptions=[],this._baseData=this.config.data,this.form=this.fb.group({PARENT_ID:new s.NI(0),soHieu:new s.NI("",[s.kI.required,s.kI.pattern(R.Z.PATTERNS.NO_SPACE_AND_UNICODE_UTF8)]),nhom:new s.NI(void 0,[s.kI.required]),isCalculated:new s.NI(!1),isActive:new s.NI(!1),tenTaiKhoan:new s.NI("",[s.kI.required])})}ngOnInit(){["edit","info"].includes(this._baseData.mode)&&this.form.patchValue({PARENT_ID:this._baseData.data.accountDetail.PARENT_ID,soHieu:this._baseData.data.accountDetail.soHieu,nhom:this._baseData.data.accountDetail.nhom,isCalculated:this._baseData.data.accountDetail.isCalculated,isActive:this._baseData.data.accountDetail.isActive,tenTaiKhoan:this._baseData.data.accountDetail.tenTaiKhoan}),this.baseService$.list().pipe((0,d.R)(this.unsubscribe)).subscribe({next:n=>{this.parentAccountOptions=[{label:this.translateService.instant("LABEL.ORIGIN_ACCOUNT"),value:0},...n.map(a=>({label:`${a.soHieu} - ${a.tenTaiKhoan}`,value:a.id}))]}})}onClickSearchBtn(){}onSubmit(){this.submitted=!0,!this.form.invalid&&("add"===this._baseData.mode?this.baseService$.add(this.form.value):this.baseService$.edit(this.form.value,this._baseData.data.accountDetail.id)).pipe((0,d.R)(this.unsubscribe)).subscribe({next:n=>{n?.errorCode||this.dialogRef.close({isSuccess:!0})}})}onSearch(){this.dialogService.open(D.g,{data:{mode:"account"},header:`${this.translateService.instant("LABEL.SEARCH")} ${this.translateService.instant("LABEL.MANAGER")}`,width:"70vw",maximizable:!0}).onClose.subscribe(a=>{a?.isSuccess&&this.form.patchValue({PARENT_ID:a?.data?.id})})}static#t=this.\u0275fac=function(a){return new(a||i)(t.Y36(s.qu),t.Y36(u.E7),t.Y36(u.xA),t.Y36(A.B),t.Y36(p.sK))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-account-form"]],standalone:!0,features:[t.jDz],decls:47,vars:50,consts:[[3,"formGroup"],[1,"p-fluid","p-formgrid","grid","m-0"],[1,"p-float-label","field","col-12","flex","gap-2"],[1,"flex","flex-column","w-full"],["id","drpAccountcha","formControlName","PARENT_ID","appendTo","body",3,"options"],["for","drpAccountcha",1,"require-label"],["pButton","",1,"w-6rem","pi","pi-search",3,"click"],[1,"ml-2"],[1,"p-float-label","field","col-5","pr-1"],["pInputText","","id","soHieu","formControlName","soHieu","type","text"],["for","soHieu",1,"require-label"],[4,"ngIf"],[1,"p-float-label","field","col-5","px-1"],["pInputText","","id","nhom","type","text","formControlName","nhom"],["for","nhom",1,"require-label"],[1,"col-5","pr-1"],[1,"col-3","pl-0","pt-1","px-1"],["id","isCalculated","formControlName","isCalculated",1,"mr-2",3,"binary"],["for","chucVu"],[1,"col-3","pl-1","pt-1"],["id","isActive","formControlName","isActive",1,"mr-2",3,"binary"],[1,"p-float-label","field","col-12","pl-1"],["inputId","name","rows","3","cols","30","formControlName","tenTaiKhoan","pInputTextarea",""],["for","name"],[1,"flex","justify-content-end","gap-2"],["pButton","","pRipple","","type","button",1,"p-button-outlined",3,"label","click"],["pButton","","pRipple","","type","button",3,"label","click"],[1,"p-error"],[4,"ngIf","ngIfElse"],["empty",""]],template:function(a,e){1&a&&(t.TgZ(0,"form",0)(1,"div",1)(2,"span",2)(3,"div",3),t._UZ(4,"p-dropdown",4),t.TgZ(5,"label",5),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t.TgZ(8,"button",6),t.NdJ("click",function(){return e.onSearch()}),t.TgZ(9,"span",7),t._uU(10),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"div",8),t._UZ(13,"input",9),t.TgZ(14,"label",10),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.YNc(17,B,5,2,"ng-container",11),t.qZA(),t.TgZ(18,"div",12),t._UZ(19,"input",13),t.TgZ(20,"label",14),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.YNc(23,y,4,3,"ng-container",11),t.qZA(),t._UZ(24,"div",15),t.TgZ(25,"div",16),t._UZ(26,"p-checkbox",17),t.TgZ(27,"label",18),t._uU(28),t.ALo(29,"translate"),t.qZA()(),t.TgZ(30,"div",19),t._UZ(31,"p-checkbox",20),t.TgZ(32,"label",18),t._uU(33),t.ALo(34,"translate"),t.qZA()(),t.TgZ(35,"div",21),t._UZ(36,"textarea",22),t.TgZ(37,"label",23),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.YNc(40,O,4,3,"ng-container",11),t.qZA()(),t._UZ(41,"hr"),t.TgZ(42,"div",24)(43,"button",25),t.NdJ("click",function(){return e.dialogRef.close()}),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"button",26),t.NdJ("click",function(){return e.onSubmit()}),t.ALo(46,"translate"),t.qZA()()()),2&a&&(t.Q6J("formGroup",e.form),t.xp6(4),t.ekj("ng-invalid",e.submitted&&e.form.get("PARENT_ID").invalid)("ng-dirty",e.submitted&&e.form.get("PARENT_ID").invalid),t.Q6J("options",e.parentAccountOptions),t.xp6(2),t.Oqu(t.lcZ(7,32,"LABEL.PARENT_ACCOUNT")),t.xp6(4),t.Oqu(t.lcZ(11,34,"BUTTON.SEARCH")),t.xp6(3),t.ekj("ng-invalid",e.submitted&&e.form.get("soHieu").invalid)("ng-dirty",e.submitted&&e.form.get("soHieu").invalid),t.xp6(2),t.Oqu(t.lcZ(16,36,"LABEL.ACCOUNT_NUMBER")),t.xp6(2),t.Q6J("ngIf",e.submitted&&e.form.get("soHieu").invalid),t.xp6(2),t.ekj("ng-invalid",e.submitted&&e.form.get("nhom").invalid)("ng-dirty",e.submitted&&e.form.get("nhom").invalid),t.xp6(2),t.Oqu(t.lcZ(22,38,"LABEL.GROUP")),t.xp6(2),t.Q6J("ngIf",e.submitted&&e.form.get("nhom").invalid),t.xp6(3),t.Q6J("binary",!0),t.xp6(2),t.hij("",t.lcZ(29,40,"LABEL.IS_CALCULATED")," "),t.xp6(3),t.Q6J("binary",!0),t.xp6(2),t.hij("",t.lcZ(34,42,"LABEL.IS_ACTIVE")," "),t.xp6(3),t.ekj("ng-invalid",e.submitted&&e.form.get("tenTaiKhoan").invalid)("ng-dirty",e.submitted&&e.form.get("tenTaiKhoan").invalid),t.xp6(2),t.Oqu(t.lcZ(39,44,"LABEL.ACCOUNT_NAME")),t.xp6(2),t.Q6J("ngIf",e.submitted&&e.form.get("tenTaiKhoan").invalid),t.xp6(3),t.Q6J("label",t.lcZ(44,46,"BUTTON.CANCEL")),t.xp6(2),t.Q6J("label",t.lcZ(46,48,"BUTTON.SAVE")))},dependencies:[g.j,g.o,L.A,L.g,h.hJ,h.Hq,s.u5,s._Y,s.Fj,s.JJ,s.JL,s.UX,s.sg,s.u,v.nD,v.XZ,f.T,f.H,C.O5,T.kW,T.Lt,p.aw,p.X$],encapsulation:2})}return i})();var J=o(3859),b=o(6916),_=o(1712),E=o(3904);function M(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"div",9)(1,"div",10)(2,"span",11),t._UZ(3,"i",12),t.TgZ(4,"input",13),t.NdJ("keyup.enter",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.initData())})("ngModelChange",function(e){t.CHM(n);const l=t.oxw();return t.KtG(l.requestParams.search=e)}),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"h2",14),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"button",15),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.onManage("add","LABEL.ADD"))}),t.qZA()()}if(2&i){const n=t.oxw();t.xp6(4),t.Q6J("ngModel",n.requestParams.search)("placeholder",t.lcZ(5,3,"LABEL.SEARCH_TEXT")),t.xp6(3),t.hij(" ",t.lcZ(8,5,"LABEL.ACCOUNT_LIST")," ")}}function j(i,c){1&i&&(t.TgZ(0,"tr")(1,"th",16),t._uU(2,"ID"),t.qZA(),t.TgZ(3,"th",17),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",17),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",18),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th",19),t._uU(13),t.ALo(14,"translate"),t.qZA()()),2&i&&(t.xp6(4),t.hij(" ",t.lcZ(5,4,"LABEL.SIGNAL_NUMBER")," "),t.xp6(3),t.hij(" ",t.lcZ(8,6,"LABEL.GROUP")," "),t.xp6(3),t.hij(" ",t.lcZ(11,8,"LABEL.ACCOUNT_NAME")," "),t.xp6(3),t.hij(" ",t.lcZ(14,10,"LABEL.ACTION")," "))}function F(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"tr")(1,"td",20),t._uU(2),t.qZA(),t.TgZ(3,"td",17),t._uU(4),t.qZA(),t.TgZ(5,"td",17),t._uU(6),t.qZA(),t.TgZ(7,"td",18),t._uU(8),t.qZA(),t.TgZ(9,"td",21)(10,"div",22)(11,"button",23),t.NdJ("click",function(){const l=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.onManage("edit","LABEL.EDIT",l))}),t.qZA(),t.TgZ(12,"button",24),t.NdJ("click",function(){const l=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.onDelete(l))}),t.qZA()()()()}if(2&i){const n=c.$implicit;t.xp6(2),t.hij(" ",n.id," "),t.xp6(2),t.hij(" ",null==n?null:n.soHieu," "),t.xp6(2),t.Oqu(null==n?null:n.nhom),t.xp6(2),t.Oqu(null==n?null:n.tenTaiKhoan)}}let w=(()=>{class i{constructor(n,a,e,l,r){this.baseService$=n,this.confirmationService=a,this.translateService=e,this.dialogService=l,this.layoutService$=r,this.isMobile=!1,this.data=[],this.unsubscribe=new N.x,this.first=0,this.rows=10,this.requestParams={search:"",pageSize:10,page:0,sorting:[{fieldName:"SoHieu",direction:"ASC"}]},this.totalRecords=0}ngOnInit(){this.isMobile=this.layoutService$.isMobile(),this.initData()}initData(){this.layoutService$.globalLoading.next(!0),this.baseService$.paging(this.requestParams).pipe((0,d.R)(this.unsubscribe),(0,U.x)(()=>{this.layoutService$.globalLoading.next(!1)})).subscribe(n=>{n?(this.data=n.data,this.totalRecords=n?.pagingInfo?.totalRecords):this.data=[]})}onPageChange(n){this.first=n.first,this.rows=n.rows,this.requestParams.page=this.first/this.rows,this.initData()}onManage(n,a,e){this.dialogService.open(P,{data:{mode:n,data:{listAccount:this.data,accountDetail:e}},header:this.translateService.instant(a),width:"50vw",maximizable:!0}).onClose.subscribe(r=>{r?.isSuccess&&this.initData()})}onDelete(n){this.confirmationService.confirm({message:this.translateService.instant("INFO.ARE_YOUR_SURE_DELETE_RECORD"),header:this.translateService.instant("LABEL.CONFIRM"),icon:"pi pi-exclamation-triangle",acceptLabel:this.translateService.instant("BUTTON.ACCEPT"),rejectLabel:this.translateService.instant("BUTTON.CANCEL"),accept:()=>this.doDelete(n)})}doDelete(n){this.baseService$.delete(n.id).pipe((0,d.R)(this.unsubscribe)).subscribe({next:a=>{a&&this.initData()}})}ngOnDestroy(){this.unsubscribe.next({}),this.unsubscribe.complete()}static#t=this.\u0275fac=function(a){return new(a||i)(t.Y36(A.B),t.Y36(m.YP),t.Y36(p.sK),t.Y36(u.xA),t.Y36(J.P))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["ng-component"]],features:[t._Bn([m.ez,m.YP,A.B,u.xA])],decls:10,vars:9,consts:[[1,"grid"],[1,"col-12","p-0"],[1,"card"],[3,"value","scrollable","responsiveLayout"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","justify-content-end","align-items-center"],["currentPageReportTemplate","{first} - {last} / {totalRecords}",3,"first","rows","totalRecords","showCurrentPageReport","showPageLinks","showJumpToPageDropdown","onPageChange"],[1,"flex","justify-content-between"],[1,"flex","align-items-center","gap-4"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text",1,"w-full",3,"ngModel","placeholder","keyup.enter","ngModelChange"],[1,"m-0"],["pButton","","pRipple","","icon","pi pi-plus",1,"p-button-rounded","p-button-success",3,"click"],["pFrozenColumn","",2,"width","50px"],[2,"width","200px"],[2,"width","auto"],["pFrozenColumn","","alignFrozen","right",2,"width","120px"],["pFrozenColumn","",1,"font-bold",2,"width","50px"],["pFrozenColumn","","alignFrozen","right",1,"font-bold",2,"width","120px"],[1,"flex","gap-2"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"]],template:function(a,e){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-table",3),t.YNc(4,M,10,7,"ng-template",4)(5,j,15,12,"ng-template",5)(6,F,13,4,"ng-template",6),t.qZA(),t.TgZ(7,"div",7)(8,"p-paginator",8),t.NdJ("onPageChange",function(r){return e.onPageChange(r)}),t.qZA()()()()(),t._UZ(9,"p-confirmDialog")),2&a&&(t.xp6(3),t.Q6J("value",e.data)("scrollable",!0)("responsiveLayout",e.isMobile?"stack":"scroll"),t.xp6(5),t.Q6J("first",e.first)("rows",e.rows)("totalRecords",e.totalRecords)("showCurrentPageReport",!0)("showPageLinks",!1)("showJumpToPageDropdown",!1))},dependencies:[s.Fj,s.JJ,s.On,b.iA,m.jx,b.on,h.Hq,g.o,f.H,_.D,E.Q,p.X$],encapsulation:2})}return i})(),H=(()=>{class i{static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[x.Bz.forChild([{path:"",component:w}]),x.Bz]})}return i})();var q=o(6804),Q=o(4055),$=o(6651),k=o(9378),Y=o(7902),G=o(6022);let K=(()=>{class i{static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[C.ez,H,s.u5,b.U$,G.Xt,h.hJ,Y.JH,g.j,q.KZ,f.T,Q.q4,T.kW,_.U,v.nD,$.q,k.EV,E.D,p.aw]})}return i})()}}]);