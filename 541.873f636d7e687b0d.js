"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[541],{8541:(w,h,n)=>{n.r(h),n.d(h,{AccessoryModule:()=>G});var p=n(9808),m=n(3075),_=n(4851),y=n(4423),A=n(845),d=n(5787),f=n(1497),g=n(4534),C=n(8018),i=n(1424),a=n(3407),u=n(9748),x=n(9603),v=n(7010),Z=n(5315),b=n(8507),T=n(4930),M=n(373),e=n(5e3),D=n(9783),P=n(330),S=n(7232);function J(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const c=e.oxw(2);return e.KtG(c.deleteSelectedAccessories())}),e.qZA()}2&s&&e.Q6J("hidden",!0)}function R(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",19)(1,"button",20),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.openNew())}),e.qZA(),e.YNc(2,J,1,1,"button",21),e.qZA()}if(2&s){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.selectedAccessories&&t.selectedAccessories.length>0)}}function E(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",23)(1,"h5",24),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",25),e._UZ(5,"i",26),e.TgZ(6,"input",27),e.NdJ("ngModelChange",function(c){e.CHM(t);const r=e.oxw();return e.KtG(r.getParams.searchText=c)})("change",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.getAccessories())}),e.qZA()()()}if(2&s){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,"label.accessory_management")," "),e.xp6(4),e.Q6J("ngModel",t.getParams.searchText)}}function F(s,l){1&s&&(e.TgZ(0,"tr")(1,"th",28),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"p-sortIcon",29),e.qZA(),e.TgZ(5,"th",30),e._uU(6),e.ALo(7,"translate"),e.qZA()()),2&s&&(e.xp6(2),e.hij(" ",e.lcZ(3,2,"label.sale_price"),""),e.xp6(4),e.hij(" ",e.lcZ(7,4,"label.description")," "))}function L(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"tr",31),e.NdJ("click",function(){const r=e.CHM(t).$implicit,V=e.oxw();return e.KtG(V.editAccessory(r))}),e.TgZ(1,"td",32)(2,"span",33),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._uU(5),e.ALo(6,"number"),e.qZA(),e.TgZ(7,"td",32)(8,"span",33),e._uU(9),e.ALo(10,"translate"),e.qZA(),e._uU(11),e.qZA()()}if(2&s){const t=l.$implicit;e.Q6J("pContextMenuRow",t),e.xp6(3),e.Oqu(e.lcZ(4,5,"label.sale_price")),e.xp6(2),e.hij(" ",e.lcZ(6,7,t.salePrice)," "),e.xp6(4),e.Oqu(e.lcZ(10,9,"label.description")),e.xp6(2),e.hij(" ",t.description," ")}}function O(s,l){1&s&&(e.TgZ(0,"small",40),e._uU(1,"Sale Price is required."),e.qZA())}function K(s,l){1&s&&(e.TgZ(0,"small",40),e._uU(1,"Address is required."),e.qZA())}const N=function(s){return{"ng-invalid ng-dirty":s}};function q(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"div",34)(1,"label",35),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"p-inputNumber",36),e.NdJ("ngModelChange",function(c){e.CHM(t);const r=e.oxw();return e.KtG(r.accessory.salePrice=c)}),e.qZA(),e.YNc(5,O,2,0,"small",37),e.qZA(),e.TgZ(6,"div",34)(7,"label",38),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"textarea",39),e.NdJ("ngModelChange",function(c){e.CHM(t);const r=e.oxw();return e.KtG(r.accessory.description=c)}),e.qZA(),e.YNc(11,K,2,0,"small",37),e.qZA()}if(2&s){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,8,"label.sale_price")),e.xp6(2),e.Q6J("ngModel",t.accessory.salePrice)("ngClass",e.VKq(12,N,t.submitted&&!t.accessory.salePrice)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.accessory.salePrice),e.xp6(3),e.Oqu(e.lcZ(9,10,"label.description")),e.xp6(2),e.Q6J("ngModel",t.accessory.description)("ngClass",e.VKq(14,N,t.submitted&&!t.accessory.description)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.accessory.description)}}function I(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.hideDialog())}),e.qZA(),e.TgZ(1,"button",42),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.saveAccessory())}),e.qZA()}}function $(s,l){if(1&s&&(e.TgZ(0,"span"),e._uU(1,"Are you sure you want to delete "),e.TgZ(2,"b"),e._uU(3),e.qZA(),e._uU(4,"?"),e.qZA()),2&s){const t=e.oxw();e.xp6(3),e.Oqu(t.accessory.accessoryName)}}function H(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.deleteAccessoryDialog=!1)}),e.qZA(),e.TgZ(1,"button",44),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.confirmDelete())}),e.qZA()}}function j(s,l){if(1&s){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.deleteAccessoriesDialog=!1)}),e.qZA(),e.TgZ(1,"button",44),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.confirmDeleteSelected())}),e.qZA()}}const k=function(){return["accessoryName","salePrice","description"]},z=function(){return[5,10,20]},B=function(){return{width:"50rem"}},U=function(){return{width:"450px"}};let Q=(()=>{class s{constructor(t,o){this.accessoryService=t,this.messageService=o,this.appUtil=T.Z,this.accessoryDialog=!1,this.deleteAccessoryDialog=!1,this.deleteAccessoriesDialog=!1,this.accessories=[],this.selectedAccessory={},this.items=[],this.accessory={},this.selectedAccessories=[],this.submitted=!1,this.cols=[],this.rowsPerPageOptions=[5,10,20],this.loading=!1,this.getParams={page:0,pageSize:5,sortField:"id",isSort:!0,searchText:""},this.lstAccessories=[],this.totalRecords=0,this.totalPages=0,this.first=0}ngOnInit(){this.cols=[{field:"accessoryName",header:"Accessory name"},{field:"salePrice",header:"Sale Price"},{field:"description",header:"Description"}],this.items=[{label:"View",icon:"pi pi-fw pi-search",command:()=>{this.editAccessory(this.selectedAccessory)}},{label:"Delete",icon:"pi pi-fw pi-times",command:()=>{this.deleteAccessory(this.selectedAccessory)}}]}getAccessories(t,o=!1){this.pendingRequest&&this.pendingRequest.unsubscribe(),this.loading=!0,t&&(this.getParams.page=t.first/t.rows,this.getParams.pageSize=t.rows+1,this.getParams.sortField=t.sortField,this.getParams.isSort=1===t.sortOrder),o&&this.accessoryService.getExcelReport(this.getParams).subscribe(c=>{T.Z.scrollToTop(),this.openDownloadFile(c.data,"excel")}),Object.keys(this.getParams).forEach(c=>null==this.getParams[c]&&delete this.getParams[c]),this.pendingRequest=this.accessoryService.getPagingAccessory(this.getParams).subscribe(c=>{T.Z.scrollToTop(),this.lstAccessories=c.data,this.totalRecords=c.totalItems||0,this.totalPages=c.totalItems/c.pageSize,console.log(this.lstAccessories),this.loading=!1})}openDownloadFile(t,o){try{const c=this.accessoryService.getFolderPathDownload(t,o);c&&window.open(c)}catch(c){this.messageService.add({severity:"error",summary:"Error Message",detail:"File invalid"})}}openNew(){this.accessory={},this.submitted=!1,this.accessoryDialog=!0}deleteSelectedAccessories(){this.deleteAccessoriesDialog=!0}editAccessory(t){this.accessory=Object.assign({},t),this.accessoryDialog=!0}deleteAccessory(t){this.deleteAccessoryDialog=!0,this.accessory=Object.assign({},t)}confirmDeleteSelected(){this.accessoryService.deleteMultipleAccessory(this.selectedAccessories.map(t=>t.id)).subscribe(()=>{this.deleteAccessoriesDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"accessories Deleted",life:3e3}),this.selectedAccessories=[],this.getAccessories()})}confirmDelete(){this.accessoryService.deleteAccessory(this.accessory.id).subscribe(t=>{this.deleteAccessoryDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"accessory Deleted",life:3e3}),this.accessory={},this.getAccessories()})}hideDialog(){this.accessoryDialog=!1,this.submitted=!1,this.accessory={},this.getAccessories()}saveAccessory(){this.submitted=!0,console.log(this.accessory),this.accessory.id?this.accessoryService.updateAccessory(this.accessory,this.accessory.id).subscribe(t=>{console.log(t),this.messageService.add({severity:"success",summary:"Successful",detail:"accessory Updated",life:3e3}),this.hideDialog()}):(this.accessory.id=0,this.accessoryService.createAccessory(this.accessory).subscribe(t=>{console.log(t),this.messageService.add({severity:"success",summary:"Successful",detail:"accessory Created",life:3e3}),this.hideDialog()}))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(M.r),e.Y36(D.ez))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-accessory"]],decls:28,vars:36,consts:[[3,"model"],["cm",""],[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["responsiveLayout","scroll","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","selectionMode","multiple","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","first","lazy","totalRecords","selection","contextMenu","contextMenuSelection","rowHover","firstChange","onLazyLoad","selectionChange","contextMenuSelectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"p-fluid",3,"visible","header","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Confirm",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],[1,"my-2"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],["pButton","","pRipple","","label","Delete","icon","pi pi-trash","class","p-button-danger",3,"hidden","click",4,"ngIf"],["pButton","","pRipple","","label","Delete","icon","pi pi-trash",1,"p-button-danger",3,"hidden","click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",1,"w-full","sm:w-auto",3,"ngModel","ngModelChange","change"],["pSortableColumn","salePrice",1,"w-3"],["field","salePrice"],["pSortableColumn","description",1,"w-3"],[1,"cursor-pointer",3,"pContextMenuRow","click"],[1,"w-3"],[1,"p-column-title"],[1,"field"],["for","salePrice"],[3,"ngModel","ngClass","ngModelChange"],["class","ng-dirty ng-invalid",4,"ngIf"],["for","description"],["id","capacity","pInputTextarea","","required","","rows","3","cols","20","autofocus","",3,"ngModel","ngClass","ngModelChange"],[1,"ng-dirty","ng-invalid"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",3,"click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"p-contextMenu",0,1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"p-toast"),e.TgZ(6,"p-toolbar",5),e.YNc(7,R,3,1,"ng-template",6),e.qZA(),e.TgZ(8,"p-table",7,8),e.NdJ("firstChange",function(r){return o.first=r})("onLazyLoad",function(r){return o.getAccessories(r)})("selectionChange",function(r){return o.selectedAccessories=r})("contextMenuSelectionChange",function(r){return o.selectedAccessory=r}),e.YNc(10,E,7,4,"ng-template",9),e.YNc(11,F,8,6,"ng-template",10),e.YNc(12,L,12,11,"ng-template",11),e.qZA()(),e.TgZ(13,"p-dialog",12),e.NdJ("visibleChange",function(r){return o.accessoryDialog=r}),e.ALo(14,"translate"),e.YNc(15,q,12,16,"ng-template",13),e.YNc(16,I,2,0,"ng-template",14),e.qZA(),e.TgZ(17,"p-dialog",15),e.NdJ("visibleChange",function(r){return o.deleteAccessoryDialog=r}),e.TgZ(18,"div",16),e._UZ(19,"i",17),e.YNc(20,$,5,1,"span",18),e.qZA(),e.YNc(21,H,2,0,"ng-template",14),e.qZA(),e.TgZ(22,"p-dialog",15),e.NdJ("visibleChange",function(r){return o.deleteAccessoriesDialog=r}),e.TgZ(23,"div",16),e._UZ(24,"i",17),e.TgZ(25,"span"),e._uU(26,"Are you sure you want to delete selected accessory?"),e.qZA()(),e.YNc(27,j,2,0,"ng-template",14),e.qZA()()()),2&t){const c=e.MAs(1);e.Q6J("model",o.items),e.xp6(8),e.Q6J("value",o.lstAccessories)("columns",o.cols)("rows",10)("globalFilterFields",e.DdM(31,k))("paginator",!0)("rowsPerPageOptions",e.DdM(32,z))("showCurrentPageReport",!0)("first",o.first)("lazy",!0)("totalRecords",o.totalRecords)("selection",o.selectedAccessories)("contextMenu",c)("contextMenuSelection",o.selectedAccessory)("rowHover",!0),e.xp6(5),e.Akn(e.DdM(33,B)),e.Q6J("visible",o.accessoryDialog)("header",e.lcZ(14,29,o.appUtil.isEmpty(o.accessory)?"label.accessory_add":"label.accessory_edit"))("modal",!0),e.xp6(4),e.Akn(e.DdM(34,U)),e.Q6J("visible",o.deleteAccessoryDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",o.accessory),e.xp6(2),e.Akn(e.DdM(35,U)),e.Q6J("visible",o.deleteAccessoriesDialog)("modal",!0)}},dependencies:[P.xV,p.mk,p.O5,_.iA,D.jx,_.lQ,_.zi,_.fz,A.Hq,m.Fj,m.JJ,m.Q7,m.On,d.H,f.FN,g.o,i.o,a.g,v.Rn,Z.V,S.X$,p.JJ],encapsulation:2}),s})(),Y=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[b.Bz.forChild([{path:"",component:Q}]),b.Bz]}),s})(),G=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[M.r],imports:[P.vI,S.aw,p.ez,Y,_.U$,y.O,m.u5,A.hJ,d.T,f.EV,g.V,C.Xt,i.j,a.A,u.kW,x.cc,v.L$,Z.S]}),s})()},373:(w,h,n)=>{n.d(h,{r:()=>f});var p=n(4004),m=n(2340),_=n(1637),y=n(5e3),A=n(520);const d=`${_.Z.DEFAULT_URLS.API}/Accessories`;let f=(()=>{class g{constructor(i){this.http=i}getPagingAccessory(i){return this.http.get(`${d}`,{params:i}).pipe((0,p.U)(a=>a))}getAllAccessor(){return this.http.get(`${d}/list`,{}).pipe((0,p.U)(i=>i))}getAccessoryDetail(i){return this.http.get(`${d}/${i}`,{}).pipe((0,p.U)(u=>u))}createAccessory(i){return this.http.post(`${d}`,i).pipe((0,p.U)(u=>u))}updateAccessory(i,a){return this.http.put(`${d}/${a}`,i).pipe((0,p.U)(x=>x))}deleteAccessory(i){return this.http.delete(`${d}/${i}`,{}).pipe((0,p.U)(u=>u))}deleteMultipleAccessory(i){return this.http.post(`${d}/multiple`,i).pipe()}getExcelReport(i){return this.http.get(`${d}/export-excel-customer`,{}).pipe((0,p.U)(u=>u))}getFolderPathDownload(i,a){return m.N.serverURL+`/ReportDownload/DownloadReportFromFile?filename=${i}&fileType=${a}`}}return g.\u0275fac=function(i){return new(i||g)(y.LFG(A.eN))},g.\u0275prov=y.Yz7({token:g,factory:g.\u0275fac}),g})()}}]);